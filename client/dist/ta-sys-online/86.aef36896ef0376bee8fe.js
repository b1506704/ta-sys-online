(self.webpackChunkta_sys_online=self.webpackChunkta_sys_online||[]).push([[86],{13086:(t,e,i)=>{"use strict";i.r(e),i.d(e,{InstructorListModule:()=>P});var n=i(61116),r=i(15419),o=i(37211),s=i(76740),a=i(8619),c=i(29146),l=i(60310),u=i(70513),h=i(69333),d=i(52177),p=i(83584),g=i(11018),m=i(35614),x=i(86101),f=i(83914),b=i(67935);function S(t,e){if(1&t&&(a.TgZ(0,"div"),a.TgZ(1,"div",16),a._uU(2),a.qZA(),a.qZA()),2&t){const t=a.oxw();a.xp6(2),a.hij(" ",null==t.instructorData?null:t.instructorData.fullName," ")}}function y(t,e){if(1&t&&(a.TgZ(0,"div"),a.TgZ(1,"div",16),a._uU(2),a.qZA(),a.qZA()),2&t){const t=a.oxw();a.xp6(2),a.hij(" ",null==t.instructorData?null:t.instructorData.description," ")}}const D=function(){return["instructor-form"]},C=function(){return{text:"Gender"}},T=function(){return{text:"Age"}},Z=function(){return{text:"Role"}},B=function(){return{text:"Department"}},w=function(){return{text:"Years of experience"}};let I=(()=>{class t{constructor(t,e){this.instructorStore=t,this.imageService=e,this.fieldList=[],this.imageData={sourceID:"",category:"",title:"",fileName:"",fileSize:0,fileType:"",url:"../../../../assets/imgs/profile.png"}}instructorDataListener(){return this.instructorStore.$instructorInstance.subscribe(t=>{this.instructorData=t,this.imageService.getImageBySourceID(t._id).subscribe(t=>{null!==t&&(this.imageData=t)})})}renderSourceData(){this.instructorData=null,setTimeout(()=>{this.instructorStore.getInstructor(this.instructorID).then(()=>{this.instructorDataListener()})},100)}ngOnInit(){}ngOnChanges(){this.renderSourceData()}ngOnDestroy(){this.instructorDataListener().unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(c.Y),a.Y36(f.Q))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-instructor-detail"]],inputs:{instructorID:"instructorID"},features:[a.TTD],decls:17,vars:18,consts:[[3,"bounceEnabled","scrollByContent","scrollByThumb"],[1,"img-container"],["alt","...",3,"src"],["id","instructor-form-container",3,"classList"],["id","instructor-form",3,"formData","readOnly"],["itemType","group","caption","Personal Information"],["name","fullName"],["text","Full Name"],[4,"dxTemplate"],["dataField","gender",3,"label"],["dataField","age",3,"label"],["dataField","role",3,"label"],["dataField","department",3,"label"],["dataField","yearsOfExperience",3,"label"],["name","description"],["text","Description"],[1,"responsive-field"]],template:function(t,e){1&t&&(a.TgZ(0,"dx-scroll-view",0),a.TgZ(1,"div",1),a._UZ(2,"img",2),a.qZA(),a.TgZ(3,"form",3),a.TgZ(4,"dx-form",4),a.TgZ(5,"dxi-item",5),a.TgZ(6,"dxi-item",6),a._UZ(7,"dxo-label",7),a.YNc(8,S,3,1,"div",8),a.qZA(),a._UZ(9,"dxi-item",9),a._UZ(10,"dxi-item",10),a._UZ(11,"dxi-item",11),a._UZ(12,"dxi-item",12),a._UZ(13,"dxi-item",13),a.TgZ(14,"dxi-item",14),a._UZ(15,"dxo-label",15),a.YNc(16,y,3,1,"div",8),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&t&&(a.Q6J("bounceEnabled",!0)("scrollByContent",!0)("scrollByThumb",!0),a.xp6(2),a.Q6J("src",null==e.imageData?null:e.imageData.url,a.LSH),a.xp6(1),a.Q6J("classList",a.DdM(12,D)),a.xp6(1),a.Q6J("formData",e.instructorData)("readOnly",!0),a.xp6(5),a.Q6J("label",a.DdM(13,C)),a.xp6(1),a.Q6J("label",a.DdM(14,T)),a.xp6(1),a.Q6J("label",a.DdM(15,Z)),a.xp6(1),a.Q6J("label",a.DdM(16,B)),a.xp6(1),a.Q6J("label",a.DdM(17,w)))},directives:[o.N,b.Y,d.ZT3,d.sBj,x.p6],styles:[".img-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:15px}.responsive-field[_ngcontent-%COMP%]{width:100%;border-bottom:2px dotted #fff;font-size:large;word-wrap:break-word;overflow-wrap:break-word}@media screen and (max-width:450px){.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100px;width:100px;border-radius:100px;box-shadow:0 25px 50px -12px #4fcdff40}}@media screen and (min-width:451px){.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:150px;width:150px;border-radius:150px;box-shadow:0 25px 50px -12px #4fcdff40}}"]}),t})();function v(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"div",18),a.TgZ(1,"div",19),a._uU(2),a.qZA(),a.TgZ(3,"div",20),a.TgZ(4,"div",21),a._uU(5),a.qZA(),a.qZA(),a.TgZ(6,"div",22),a._UZ(7,"img",23),a.qZA(),a.TgZ(8,"div"),a.TgZ(9,"dx-button",24),a.NdJ("onClick",function(){const e=a.CHM(t).$implicit;return a.oxw(2).selectInstructor(null==e?null:e._id)}),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=e.$implicit,i=a.oxw(2);a.xp6(2),a.Oqu(null==t?null:t.fullName),a.xp6(3),a.hij("Role: ",null==t?null:t.department,""),a.xp6(2),a.Q6J("src",i.mapImageListToUrl(null==t?null:t._id),a.LSH)}}function O(t,e){if(1&t&&(a.ynx(0),a.TgZ(1,"div",16),a.YNc(2,v,10,3,"div",17),a.qZA(),a.BQk()),2&t){const t=a.oxw();a.xp6(2),a.Q6J("ngForOf",t.instructorList)}}function _(t,e){if(1&t&&(a.ynx(0),a._UZ(1,"app-instructor-detail",25),a.BQk()),2&t){const t=a.oxw(2);a.xp6(1),a.Q6J("instructorID",t.currentInstructorID)}}function L(t,e){if(1&t&&(a.TgZ(0,"div"),a.YNc(1,_,2,1,"ng-container",12),a.qZA()),2&t){const t=a.oxw();a.xp6(1),a.Q6J("ngIf",t.currentInstructorID)}}const N=function(){return{paddingLeft:"25px",marginBottom:"5px"}},M=[{path:"",component:(()=>{class t{constructor(t,e,i,n){this.instructorStore=t,this.store=e,this.router=i,this.imageStore=n,this.departmentList=(0,s.Z)(),this.pageSize=10,this.pullDown=!1,this.isDetailPopupVisible=!1,this.searchBoxOptions={valueChangeEvent:"keyup",showClearButton:!0,onKeyUp:this.onSearchKeyupHandler.bind(this),onValueChanged:this.onSearchValueChanged.bind(this),mode:"search",placeholder:"Search with name"},this.refreshButtonOptions={type:"normal",icon:"refresh",hint:"Fetch data from server",onClick:this.onRefresh.bind(this)},this.filterSelectBoxOptions={items:this.departmentList,valueExpr:"name",displayExpr:"name",placeholder:"Filter with department",onValueChanged:this.onFilterChange.bind(this)},this.sortSelectBoxOptions={items:[{_id:"-1",name:"(NONE)"},{_id:"0",name:"ASC"},{_id:"1",name:"DESC"}],valueExpr:"name",placeholder:"Sort by age",displayExpr:"name",onValueChanged:this.onSortValueChanged.bind(this)},this.imageData={sourceID:"",category:"",title:"",fileName:"",fileSize:0,fileType:"",url:"../../../../assets/imgs/profile.png"},this.imageList=[],this.updateContent=(t,e)=>{const i=this.checkEditorMode(),n=this.currentIndexFromServer;this.updateContentTimer&&clearTimeout(this.updateContentTimer),this.updateContentTimer=setTimeout(()=>{if(this.instructorList.length)switch(i){case"NORMAL":this.paginatePureData(n+1);break;case"FILTER":this.paginateFilterData(n+1);break;case"SEARCH":this.paginateSearchData(n+1);break;case"SORT":this.paginateSortData(n+1)}t.component.release()},500)},this.updateTopContent=t=>{this.updateContent(t,"PullDown")},this.updateBottomContent=t=>{this.updateContent(t,"ReachBottom")}}selectInstructor(t){this.currentInstructorID=t,console.log("SELECTED ID"),console.log(t),this.isDetailPopupVisible=!0}onSearchKeyupHandler(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.isSearchingByName=!0,this.isFilteringByCategory=!1,this.isSortingByPrice=!1,console.log(this.currentSearchByNameValue),""!==this.currentSearchByNameValue?this.instructorStore.initInfiniteSearchByNameData(this.currentSearchByNameValue,0,this.pageSize):(this.store.showNotif("SEARCH MODE OFF","custom"),this.onRefresh())},1250)}onSearchValueChanged(t){this.currentSearchByNameValue=t.value}onSortValueChanged(t){this.isSortingByPrice=!0,this.isSearchingByName=!1,this.isFilteringByCategory=!1,this.currentSortByPriceValue=t.value,"(NONE)"!==t.value?this.instructorStore.initInfiniteSortByPriceData(t.value,0,this.pageSize):(this.store.showNotif("SORT MODE OFF","custom"),this.onRefresh())}onFilterChange(t){this.isFilteringByCategory=!0,this.isSearchingByName=!1,this.isSortingByPrice=!1,this.currentCategoryFilterValue=t.value,console.log(t.value),"(NONE)"!==t.value?this.instructorStore.initInfiniteFilterByCategoryData(t.value,0,this.pageSize):(this.store.showNotif("FILTER MODE OFF","custom"),this.onRefresh())}checkEditorMode(){return!0===this.isFilteringByCategory?"FILTER":!0===this.isSearchingByName?"SEARCH":!0===this.isSortingByPrice?"SORT":"NORMAL"}paginatePureData(t){this.instructorStore.loadInfiniteDataAsync(t,this.pageSize)}paginateFilterData(t){this.instructorStore.filterInfiniteInstructorByCategory(this.currentCategoryFilterValue,t,this.pageSize)}paginateSearchData(t){this.instructorStore.searchInfiniteInstructorByName(this.currentSearchByNameValue,t,this.pageSize)}paginateSortData(t){this.instructorStore.sortInfiniteInstructorByPrice(this.currentSortByPriceValue,t,this.pageSize)}onRefresh(){this.isFilteringByCategory=!1,this.isSearchingByName=!1,this.isSortingByPrice=!1,this.instructorStore.initInfiniteData(0,this.pageSize)}navigateToTest(){this.router.navigate(["/test_list"])}sourceDataListener(){return this.instructorStore.$instructorList.subscribe(t=>{this.instructorList=t})}mapImageListToUrl(t){var e;return 0!==this.imageList.length&&(null===(e=this.imageList.find(e=>e.sourceID===t))||void 0===e?void 0:e.url)||this.imageData.url}imageDataListener(){return this.imageStore.$imageList.subscribe(t=>{0!==t.length&&(this.imageList=t,console.log("IMAGE LIST OF DOCTOR"),console.log(this.imageList))})}currentPageListener(){return this.instructorStore.$currentPage.subscribe(t=>{this.currentIndexFromServer=t})}scrollTop(){this.scrollView.instance.scrollTo({top:0,left:0})}ngOnInit(){this.currentPageListener(),this.instructorStore.initInfiniteData(0,this.pageSize).then(()=>{this.sourceDataListener(),this.imageDataListener()})}ngOnDestroy(){this.sourceDataListener().unsubscribe(),this.currentPageListener().unsubscribe(),this.imageDataListener().unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(c.Y),a.Y36(l.d),a.Y36(r.F0),a.Y36(u.Y))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-instructor-list"]],viewQuery:function(t,e){if(1&t&&a.Gf(o.N,5),2&t){let t;a.iGM(t=a.CRH())&&(e.scrollView=t.first)}},decls:17,vars:35,consts:[[3,"ngStyle"],[3,"location","text"],["widget","dxTextBox","location","before",3,"options"],["widget","dxButton","location","after",3,"options","locateInMenu"],[3,"locateInMenu","location"],["icon","filter","type","normal",3,"disabled"],["widget","dxSelectBox","location","after",3,"locateInMenu","options"],["icon","group","type","normal",3,"disabled"],["widget","dxSelectBox","location","after",3,"options","locateInMenu"],["location","after","locateInMenu","auto"],["icon","arrowright","type","outline","text","Test List","hint","Navigate to Test List",3,"onClick"],[3,"direction","showScrollbar","scrollByContent","scrollByThumb","height","bounceEnabled","onPullDown","onReachBottom"],[4,"ngIf"],["icon","arrowup","label","",3,"index","onClick"],[3,"visible","height","width","showTitle","shading","title","dragEnabled","closeOnOutsideClick","showCloseButton","visibleChange"],[4,"dxTemplate","dxTemplateOf"],[1,"card-container"],["class","card",4,"ngFor","ngForOf"],[1,"card"],[1,"card-title"],[1,"card-body"],[1,"card-text"],[1,"card-img"],["alt","...",2,"height","100%","width","100%",3,"src"],["icon","arrowright","type","outline","text","Detail","hint","Click to see instructor detail",3,"onClick"],[3,"instructorID"]],template:function(t,e){1&t&&(a.TgZ(0,"dx-toolbar",0),a._UZ(1,"dxi-item",1),a._UZ(2,"dxi-item",2),a._UZ(3,"dxi-item",3),a.TgZ(4,"dxi-item",4),a._UZ(5,"dx-button",5),a.qZA(),a._UZ(6,"dxi-item",6),a.TgZ(7,"dxi-item",4),a._UZ(8,"dx-button",7),a.qZA(),a._UZ(9,"dxi-item",8),a.TgZ(10,"dxi-item",9),a.TgZ(11,"dx-button",10),a.NdJ("onClick",function(){return e.navigateToTest()}),a.qZA(),a.qZA(),a.qZA(),a.TgZ(12,"dx-scroll-view",11),a.NdJ("onPullDown",function(t){return e.updateTopContent(t)})("onReachBottom",function(t){return e.updateBottomContent(t)}),a.YNc(13,O,3,1,"ng-container",12),a.qZA(),a.TgZ(14,"dx-speed-dial-action",13),a.NdJ("onClick",function(){return e.scrollTop()}),a.qZA(),a.TgZ(15,"dx-popup",14),a.NdJ("visibleChange",function(t){return e.isDetailPopupVisible=t}),a.YNc(16,L,2,1,"div",15),a.qZA()),2&t&&(a.Q6J("ngStyle",a.DdM(34,N)),a.xp6(1),a.Q6J("location","before")("text","Instructor List"),a.xp6(1),a.Q6J("options",e.searchBoxOptions),a.xp6(1),a.Q6J("options",e.refreshButtonOptions)("locateInMenu","auto"),a.xp6(1),a.Q6J("locateInMenu","auto")("location","after"),a.xp6(1),a.Q6J("disabled",!0),a.xp6(1),a.Q6J("locateInMenu","auto")("options",e.filterSelectBoxOptions),a.xp6(1),a.Q6J("locateInMenu","auto")("location","after"),a.xp6(1),a.Q6J("disabled",!0),a.xp6(1),a.Q6J("options",e.sortSelectBoxOptions)("locateInMenu","auto"),a.xp6(3),a.Q6J("direction","vertical")("showScrollbar",!0)("scrollByContent",!0)("scrollByThumb",!0)("height","69vh")("bounceEnabled",!1),a.xp6(1),a.Q6J("ngIf",e.instructorList),a.xp6(1),a.Q6J("index",1),a.xp6(1),a.Q6J("visible",e.isDetailPopupVisible)("height","80%")("width","80%")("showTitle",!0)("shading",!0)("title","Instructor Detail")("dragEnabled",!0)("closeOnOutsideClick",!1)("showCloseButton",!0),a.xp6(1),a.Q6J("dxTemplateOf","content"))},directives:[h.G,n.PC,d.ZT3,p.K,o.N,n.O5,g.D,m.x,x.p6,n.sg,I],styles:[".card-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center;align-items:flex-start}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{height:250px;margin:10px;background-color:rgba(0,10,12,.486);border-radius:10px;box-shadow:0 54px 55px #00000040,0 -12px 30px #0000001f,0 4px 6px #0000001f,0 12px 13px #0000002b,0 -3px 5px #00000017;width:250px;display:flex;flex-direction:column;justify-content:center;align-items:center}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:large;font-weight:700;font-style:oblique}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-img[_ngcontent-%COMP%]{height:150px;width:150px;margin-bottom:10px}"]}),t})()}];let A=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[r.Bz.forChild(M)],r.Bz]}),t})(),P=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[n.ez,A,o.r,h.k,p.e,g.B,m.C,b.A]]}),t})()}}]);