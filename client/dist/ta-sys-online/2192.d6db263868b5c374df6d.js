(self.webpackChunkta_sys_online=self.webpackChunkta_sys_online||[]).push([[2192],{62192:(e,t,i)=>{"use strict";i.r(t),i.d(t,{MedicineListModule:()=>N});var n=i(61116),o=i(15419),r=i(44486),a=i(37211),c=i(49783),s=i(49791),l=i(60310),d=i(69333),h=i(52177),u=i(83584),p=i(11018),g=i(35614),m=i(86101),x=i(47233),f=i(67935);function y(e,t){if(1&e&&(c.TgZ(0,"div"),c.TgZ(1,"div",14),c._uU(2),c.qZA(),c.qZA()),2&e){const e=c.oxw();c.xp6(2),c.hij(" ",null==e.medicineData?null:e.medicineData.name," ")}}function S(e,t){if(1&e&&(c.TgZ(0,"div"),c.TgZ(1,"div",14),c._uU(2),c.qZA(),c.qZA()),2&e){const e=c.oxw();c.xp6(2),c.hij(" ",e.price," ")}}function b(e,t){if(1&e&&(c.TgZ(0,"div"),c.TgZ(1,"div",14),c._uU(2),c.qZA(),c.qZA()),2&e){const e=c.oxw();c.xp6(2),c.hij(" ",null==e.medicineData?null:e.medicineData.effect," ")}}const Z=function(){return["medicine-form"]},C=function(){return{text:"Brand"}};let T=(()=>{class e{constructor(e){this.medicineStore=e}medicineDataListener(){return this.medicineStore.$medicineInstance.subscribe(e=>{this.medicineData=e,this.price=(0,x.Z)(this.medicineData.price,"$")})}renderSourceData(){this.medicineData=null,this.price=null,setTimeout(()=>{this.medicineStore.getMedicine(this.medicineID).then(()=>{this.medicineDataListener()})},100)}formatCurrency(){return(0,x.Z)(this.medicineData.price,"$")}ngOnInit(){}ngOnChanges(){this.renderSourceData()}ngOnDestroy(){this.medicineDataListener().unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(s.s))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-medicine-detail"]],inputs:{medicineID:"medicineID"},features:[c.TTD],decls:16,vars:9,consts:[[3,"bounceEnabled","scrollByContent","scrollByThumb"],[1,"img-container"],["src","../../../../../assets/imgs/favipiravir_1.png","alt","..."],["id","medicine-form-container",3,"classList"],["id","medicine-form",3,"formData","readOnly"],["itemType","group","caption","Medicine Information"],["name","name"],["text","Name"],[4,"dxTemplate"],["dataField","brand",3,"label"],["name","price"],["text","Price"],["name","effect"],["text","Effect"],[1,"responsive-field"]],template:function(e,t){1&e&&(c.TgZ(0,"dx-scroll-view",0),c.TgZ(1,"div",1),c._UZ(2,"img",2),c.qZA(),c.TgZ(3,"form",3),c.TgZ(4,"dx-form",4),c.TgZ(5,"dxi-item",5),c.TgZ(6,"dxi-item",6),c._UZ(7,"dxo-label",7),c.YNc(8,y,3,1,"div",8),c.qZA(),c._UZ(9,"dxi-item",9),c.TgZ(10,"dxi-item",10),c._UZ(11,"dxo-label",11),c.YNc(12,S,3,1,"div",8),c.qZA(),c.TgZ(13,"dxi-item",12),c._UZ(14,"dxo-label",13),c.YNc(15,b,3,1,"div",8),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.Q6J("bounceEnabled",!0)("scrollByContent",!0)("scrollByThumb",!0),c.xp6(3),c.Q6J("classList",c.DdM(7,Z)),c.xp6(1),c.Q6J("formData",t.medicineData)("readOnly",!0),c.xp6(5),c.Q6J("label",c.DdM(8,C)))},directives:[a.N,f.Y,h.ZT3,h.sBj,m.p6],styles:[".img-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:15px}.responsive-field[_ngcontent-%COMP%]{width:100%;border-bottom:2px dotted #fff;font-size:large;word-wrap:break-word;overflow-wrap:break-word}@media screen and (max-width:450px){.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100px;width:100px;border-radius:100px;box-shadow:0 25px 50px -12px #4fcdff40}}@media screen and (min-width:451px){.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:150px;width:150px;border-radius:150px;box-shadow:0 25px 50px -12px #4fcdff40}}"]}),e})();var D=i(71247);function w(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",18),c.TgZ(1,"div",19),c._uU(2),c.qZA(),c.TgZ(3,"div",20),c.TgZ(4,"div",21),c._uU(5),c.ALo(6,"formatCurrency"),c.qZA(),c.qZA(),c.TgZ(7,"div",22),c._UZ(8,"img",23),c.qZA(),c.TgZ(9,"div"),c.TgZ(10,"dx-button",24),c.NdJ("onClick",function(){const t=c.CHM(e).$implicit;return c.oxw(2).selectMedicine(null==t?null:t._id)}),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=t.$implicit,i=c.oxw(2);c.xp6(2),c.Oqu(null==e?null:e.name),c.xp6(3),c.hij(" Price: ",c.xi3(6,2,null==e?null:e.price,i.currency)," ")}}function B(e,t){if(1&e&&(c.ynx(0),c.TgZ(1,"div",16),c.YNc(2,w,11,5,"div",17),c.qZA(),c.BQk()),2&e){const e=c.oxw();c.xp6(2),c.Q6J("ngForOf",e.medicineList)}}function v(e,t){if(1&e&&(c.ynx(0),c._UZ(1,"app-medicine-detail",25),c.BQk()),2&e){const e=c.oxw(2);c.xp6(1),c.Q6J("medicineID",e.currentMedicineID)}}function O(e,t){if(1&e&&(c.TgZ(0,"div"),c.YNc(1,v,2,1,"ng-container",12),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngIf",e.currentMedicineID)}}const M=function(){return{paddingLeft:"25px",marginBottom:"5px"}},_=[{path:"",component:(()=>{class e{constructor(e,t,i){this.medicineStore=e,this.store=t,this.router=i,this.brandList=(0,r.Z)(),this.pageSize=10,this.pullDown=!1,this.isDetailPopupVisible=!1,this.searchBoxOptions={valueChangeEvent:"keyup",showClearButton:!0,onKeyUp:this.onSearchKeyupHandler.bind(this),onValueChanged:this.onSearchValueChanged.bind(this),mode:"search",placeholder:"Search with name"},this.refreshButtonOptions={type:"normal",icon:"refresh",hint:"Fetch data from server",onClick:this.onRefresh.bind(this)},this.filterSelectBoxOptions={items:this.brandList,valueExpr:"name",displayExpr:"name",placeholder:"Filter with brand",onValueChanged:this.onFilterChange.bind(this)},this.sortSelectBoxOptions={items:[{_id:"-1",name:"(NONE)"},{_id:"0",name:"ASC"},{_id:"1",name:"DESC"}],valueExpr:"name",placeholder:"Sort price",displayExpr:"name",onValueChanged:this.onSortValueChanged.bind(this)},this.currency="$",this.updateContent=(e,t)=>{const i=this.checkEditorMode(),n=this.currentIndexFromServer;this.updateContentTimer&&clearTimeout(this.updateContentTimer),this.updateContentTimer=setTimeout(()=>{if(this.medicineList.length)switch(i){case"NORMAL":this.paginatePureData(n+1);break;case"FILTER":this.paginateFilterData(n+1);break;case"SEARCH":this.paginateSearchData(n+1);break;case"SORT":this.paginateSortData(n+1)}e.component.release()},500)},this.updateTopContent=e=>{this.updateContent(e,"PullDown")},this.updateBottomContent=e=>{this.updateContent(e,"ReachBottom")}}selectMedicine(e){this.currentMedicineID=e,console.log("SELECTED ID"),console.log(e),this.isDetailPopupVisible=!0}onSearchKeyupHandler(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.isSearchingByName=!0,this.isFilteringByCategory=!1,this.isSortingByPrice=!1,console.log(this.currentSearchByNameValue),""!==this.currentSearchByNameValue?this.medicineStore.initInfiniteSearchByNameData(this.currentSearchByNameValue,0,this.pageSize):(this.store.showNotif("SEARCH MODE OFF","custom"),this.onRefresh())},1250)}onSearchValueChanged(e){this.currentSearchByNameValue=e.value}onSortValueChanged(e){this.isSortingByPrice=!0,this.isSearchingByName=!1,this.isFilteringByCategory=!1,this.currentSortByPriceValue=e.value,"(NONE)"!==e.value?this.medicineStore.initInfiniteSortByPriceData(e.value,0,this.pageSize):(this.store.showNotif("SORT MODE OFF","custom"),this.onRefresh())}onFilterChange(e){this.isFilteringByCategory=!0,this.isSearchingByName=!1,this.isSortingByPrice=!1,this.currentCategoryFilterValue=e.value,console.log(e.value),"(NONE)"!==e.value?this.medicineStore.initInfiniteFilterByCategoryData(e.value,0,this.pageSize):(this.store.showNotif("FILTER MODE OFF","custom"),this.onRefresh())}checkEditorMode(){return!0===this.isFilteringByCategory?"FILTER":!0===this.isSearchingByName?"SEARCH":!0===this.isSortingByPrice?"SORT":"NORMAL"}paginatePureData(e){this.medicineStore.loadInfiniteDataAsync(e,this.pageSize)}paginateFilterData(e){this.medicineStore.filterInfiniteMedicineByCategory(this.currentCategoryFilterValue,e,this.pageSize)}paginateSearchData(e){this.medicineStore.searchInfiniteMedicineByName(this.currentSearchByNameValue,e,this.pageSize)}paginateSortData(e){this.medicineStore.sortInfiniteMedicineByPrice(this.currentSortByPriceValue,e,this.pageSize)}onRefresh(){this.isFilteringByCategory=!1,this.isSearchingByName=!1,this.isSortingByPrice=!1,this.medicineStore.initInfiniteData(0,this.pageSize)}navigateToDoctorSchedule(){this.router.navigate(["/doctor_schedule"])}sourceDataListener(){return this.medicineStore.$medicineList.subscribe(e=>{this.medicineList=e})}currentPageListener(){return this.medicineStore.$currentPage.subscribe(e=>{this.currentIndexFromServer=e})}scrollTop(){this.scrollView.instance.scrollTo({top:0,left:0})}ngOnInit(){this.currentPageListener(),this.medicineStore.initInfiniteData(0,this.pageSize).then(()=>{this.sourceDataListener()})}ngOnDestroy(){this.sourceDataListener().unsubscribe(),this.currentPageListener().unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(s.s),c.Y36(l.d),c.Y36(o.F0))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-medicine-list"]],viewQuery:function(e,t){if(1&e&&c.Gf(a.N,5),2&e){let e;c.iGM(e=c.CRH())&&(t.scrollView=e.first)}},decls:17,vars:35,consts:[[3,"ngStyle"],[3,"location","text"],["widget","dxTextBox","location","before",3,"options"],["widget","dxButton","location","after",3,"options","locateInMenu"],[3,"locateInMenu","location"],["icon","filter","type","normal",3,"disabled"],["widget","dxSelectBox","location","after",3,"locateInMenu","options"],["icon","money","type","normal",3,"disabled"],["widget","dxSelectBox","location","after",3,"options","locateInMenu"],["location","after","locateInMenu","auto"],["icon","arrowright","type","outline","text","Doctor Schedule","hint","Navigate to Doctor Schedule",3,"onClick"],[3,"direction","showScrollbar","scrollByContent","scrollByThumb","height","bounceEnabled","onPullDown","onReachBottom"],[4,"ngIf"],["icon","arrowup","label","",3,"index","onClick"],[3,"visible","height","width","showTitle","shading","title","dragEnabled","closeOnOutsideClick","showCloseButton","visibleChange"],[4,"dxTemplate","dxTemplateOf"],[1,"card-container"],["class","card",4,"ngFor","ngForOf"],[1,"card"],[1,"card-title"],[1,"card-body"],[1,"card-text"],[1,"card-img"],["src","../../../../assets/imgs/favipiravir_2.jpg","alt","favipiravir_1",2,"height","100%","width","100%"],["icon","arrowright","type","outline","text","Detail","hint","Click to see medicine detail",3,"onClick"],[3,"medicineID"]],template:function(e,t){1&e&&(c.TgZ(0,"dx-toolbar",0),c._UZ(1,"dxi-item",1),c._UZ(2,"dxi-item",2),c._UZ(3,"dxi-item",3),c.TgZ(4,"dxi-item",4),c._UZ(5,"dx-button",5),c.qZA(),c._UZ(6,"dxi-item",6),c.TgZ(7,"dxi-item",4),c._UZ(8,"dx-button",7),c.qZA(),c._UZ(9,"dxi-item",8),c.TgZ(10,"dxi-item",9),c.TgZ(11,"dx-button",10),c.NdJ("onClick",function(){return t.navigateToDoctorSchedule()}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(12,"dx-scroll-view",11),c.NdJ("onPullDown",function(e){return t.updateTopContent(e)})("onReachBottom",function(e){return t.updateBottomContent(e)}),c.YNc(13,B,3,1,"ng-container",12),c.qZA(),c.TgZ(14,"dx-speed-dial-action",13),c.NdJ("onClick",function(){return t.scrollTop()}),c.qZA(),c.TgZ(15,"dx-popup",14),c.NdJ("visibleChange",function(e){return t.isDetailPopupVisible=e}),c.YNc(16,O,2,1,"div",15),c.qZA()),2&e&&(c.Q6J("ngStyle",c.DdM(34,M)),c.xp6(1),c.Q6J("location","before")("text","Medicine Encyclopedia"),c.xp6(1),c.Q6J("options",t.searchBoxOptions),c.xp6(1),c.Q6J("options",t.refreshButtonOptions)("locateInMenu","auto"),c.xp6(1),c.Q6J("locateInMenu","auto")("location","after"),c.xp6(1),c.Q6J("disabled",!0),c.xp6(1),c.Q6J("locateInMenu","auto")("options",t.filterSelectBoxOptions),c.xp6(1),c.Q6J("locateInMenu","auto")("location","after"),c.xp6(1),c.Q6J("disabled",!0),c.xp6(1),c.Q6J("options",t.sortSelectBoxOptions)("locateInMenu","auto"),c.xp6(3),c.Q6J("direction","vertical")("showScrollbar",!0)("scrollByContent",!0)("scrollByThumb",!0)("height","69vh")("bounceEnabled",!1),c.xp6(1),c.Q6J("ngIf",t.medicineList),c.xp6(1),c.Q6J("index",1),c.xp6(1),c.Q6J("visible",t.isDetailPopupVisible)("height","80%")("width","80%")("showTitle",!0)("shading",!0)("title","Medicine Detail")("dragEnabled",!0)("closeOnOutsideClick",!1)("showCloseButton",!0),c.xp6(1),c.Q6J("dxTemplateOf","content"))},directives:[d.G,n.PC,h.ZT3,u.K,a.N,n.O5,p.D,g.x,m.p6,n.sg,T],pipes:[D.m],styles:[".card-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center;align-items:flex-start}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{height:200px;margin:10px;background-color:rgba(0,10,12,.486);border-radius:10px;box-shadow:0 54px 55px #00000040,0 -12px 30px #0000001f,0 4px 6px #0000001f,0 12px 13px #0000002b,0 -3px 5px #00000017;width:200px;display:flex;flex-direction:column;justify-content:center;align-items:center}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:large;font-weight:700;font-style:oblique}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-img[_ngcontent-%COMP%]{height:100px;width:190px}"]}),e})()}];let A=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[o.Bz.forChild(_)],o.Bz]}),e})();var I=i(89711);let N=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[n.ez,A,a.r,d.k,u.e,p.B,I.d,g.C,f.A]]}),e})()}}]);