(self.webpackChunkta_sys_online=self.webpackChunkta_sys_online||[]).push([[3149],{73149:(e,t,i)=>{"use strict";i.r(t),i.d(t,{ConditionDetailModule:()=>M});var n=i(61116),o=i(56841),a=i(43254),s=i(11018),r=i(841),l=i(35614),c=i(37211),d=i(56118),u=i(83584),h=i(83949),g=i(57335),m=i(15419),p=i(49783),x=i(68084),f=i(31977),Z=i(60310),b=i(70513),w=i(83914),T=i(86101),C=i(52177);function v(e,t){1&e&&(p.TgZ(0,"div",12),p._UZ(1,"div",13),p.qZA())}function A(e,t){if(1&e&&(p.TgZ(0,"div",14),p.TgZ(1,"h2",15),p._uU(2),p.qZA(),p.TgZ(3,"div"),p._uU(4),p.qZA(),p.qZA()),2&e){const e=p.oxw();p.xp6(2),p.hij("Patient ",null==e.customerData?null:e.customerData.fullName,""),p.xp6(2),p.HOy(" HR: ",null==e.patientData?null:e.patientData.heartRate,". RR: ",null==e.patientData?null:e.patientData.respiratoryRate,". BT: ",null==e.patientData?null:e.patientData.bodyTemperature,". BP: ",null==e.patientData?null:e.patientData.bloodPressure,". ")}}function y(e,t){if(1&e&&(p.ynx(0),p.TgZ(1,"p",18),p._uU(2," Patient Info "),p.qZA(),p.TgZ(3,"div",44),p._UZ(4,"img",45),p.qZA(),p.TgZ(5,"div"),p._uU(6),p.qZA(),p.TgZ(7,"div"),p._uU(8),p.qZA(),p.TgZ(9,"div"),p._uU(10),p.qZA(),p.TgZ(11,"div"),p._uU(12),p.qZA(),p.TgZ(13,"div"),p._uU(14),p.qZA(),p.TgZ(15,"div"),p._uU(16),p.qZA(),p.TgZ(17,"div"),p._uU(18),p.qZA(),p.TgZ(19,"div"),p._uU(20),p.qZA(),p.BQk()),2&e){const e=p.oxw(2);p.xp6(4),p.Q6J("src",null==e.imageData?null:e.imageData.url,p.LSH),p.xp6(2),p.hij("Full Name: ",null==e.customerData?null:e.customerData.fullName,""),p.xp6(2),p.hij("Age: ",null==e.customerData?null:e.customerData.age,""),p.xp6(2),p.hij("Gender: ",null==e.customerData?null:e.customerData.gender,""),p.xp6(2),p.hij("Blood Type: ",null==e.customerData?null:e.customerData.bloodType,""),p.xp6(2),p.hij("Height: ",null==e.customerData?null:e.customerData.height,""),p.xp6(2),p.hij("Weight: ",null==e.customerData?null:e.customerData.weight,""),p.xp6(2),p.hij("Job: ",null==e.customerData?null:e.customerData.occupation,""),p.xp6(2),p.hij("Address: ",null==e.customerData?null:e.customerData.address,"")}}const D=function(){return[90,110,200,300]};function _(e,t){if(1&e){const e=p.EpF();p.ynx(0),p.TgZ(1,"div",16),p.TgZ(2,"div",17),p.TgZ(3,"p",18),p._uU(4," Device Monitor "),p.qZA(),p.TgZ(5,"div"),p.TgZ(6,"p"),p._uU(7,"Thermometer"),p.qZA(),p.TgZ(8,"dx-switch",19),p.NdJ("onValueChanged",function(t){return p.CHM(e),p.oxw().thermometerSwitchListener(t)}),p.qZA(),p.qZA(),p.TgZ(9,"div"),p.TgZ(10,"p"),p._uU(11,"Stethoscope"),p.qZA(),p.TgZ(12,"dx-switch",19),p.NdJ("onValueChanged",function(t){return p.CHM(e),p.oxw().stethoscopeSwitchListener(t)}),p.qZA(),p.qZA(),p.TgZ(13,"div"),p.TgZ(14,"p"),p._uU(15,"Co2"),p.qZA(),p.TgZ(16,"dx-switch",19),p.NdJ("onValueChanged",function(t){return p.CHM(e),p.oxw().co2SwitchListener(t)}),p.qZA(),p.qZA(),p.TgZ(17,"div"),p.TgZ(18,"p"),p._uU(19,"Aneroid"),p.qZA(),p.TgZ(20,"dx-switch",19),p.NdJ("onValueChanged",function(t){return p.CHM(e),p.oxw().aneroidSwitchListener(t)}),p.qZA(),p.qZA(),p.qZA(),p.TgZ(21,"div",17),p.YNc(22,y,21,9,"ng-container",3),p.qZA(),p.TgZ(23,"div",20),p.TgZ(24,"dx-linear-gauge",21),p.TgZ(25,"dxo-title",22),p._UZ(26,"dxo-font",23),p.qZA(),p._UZ(27,"dxo-geometry",24),p._UZ(28,"dxo-scale",25),p.TgZ(29,"dxo-range-container",26),p._UZ(30,"dxi-range",27),p._UZ(31,"dxi-range",28),p.qZA(),p.qZA(),p.TgZ(32,"dx-linear-gauge",21),p._UZ(33,"dxo-value-indicator",29),p.TgZ(34,"dxo-title",30),p._UZ(35,"dxo-font",23),p.qZA(),p._UZ(36,"dxo-geometry",24),p._UZ(37,"dxo-scale",25),p._UZ(38,"dxo-range-container",31),p.qZA(),p.TgZ(39,"dx-linear-gauge",21),p._UZ(40,"dxo-value-indicator",32),p.TgZ(41,"dxo-title",33),p._UZ(42,"dxo-font",23),p.qZA(),p._UZ(43,"dxo-geometry",24),p.TgZ(44,"dxo-scale",34),p.TgZ(45,"dxo-label"),p._UZ(46,"dxo-format",35),p.qZA(),p.qZA(),p.TgZ(47,"dxo-range-container",31),p._UZ(48,"dxi-range",27),p._UZ(49,"dxi-range",36),p._UZ(50,"dxi-range",37),p.qZA(),p.qZA(),p.TgZ(51,"dx-circular-gauge",38),p.TgZ(52,"dxo-scale",25),p._UZ(53,"dxo-label",39),p.qZA(),p.TgZ(54,"dxo-title",40),p._UZ(55,"dxo-font",41),p._UZ(56,"dxo-margin",42),p.qZA(),p._UZ(57,"dxo-tooltip",43),p.qZA(),p.qZA(),p.qZA(),p.BQk()}if(2&e){const e=p.oxw();p.xp6(8),p.Q6J("value",!0),p.xp6(4),p.Q6J("value",!0),p.xp6(4),p.Q6J("value",!0),p.xp6(4),p.Q6J("value",!0),p.xp6(2),p.Q6J("ngIf",e.customerData),p.xp6(2),p.Q6J("value",e.patientData.bodyTemperature),p.xp6(2),p.Q6J("size",16),p.xp6(2),p.Q6J("startValue",0)("endValue",100)("tickInterval",30),p.xp6(2),p.Q6J("startValue",-40)("endValue",0),p.xp6(1),p.Q6J("startValue",0)("endValue",40),p.xp6(1),p.Q6J("value",e.patientData.respiratoryRate),p.xp6(3),p.Q6J("size",16),p.xp6(2),p.Q6J("startValue",0)("endValue",100)("tickInterval",10),p.xp6(2),p.Q6J("value",e.patientData.bloodPressure),p.xp6(3),p.Q6J("size",16),p.xp6(2),p.Q6J("startValue",90)("endValue",300)("customTicks",p.DdM(37,D)),p.xp6(4),p.Q6J("startValue",10)("endValue",100),p.xp6(1),p.Q6J("startValue",110)("endValue",200),p.xp6(1),p.Q6J("startValue",210)("endValue",300),p.xp6(1),p.Q6J("value",e.patientData.heartRate),p.xp6(1),p.Q6J("startValue",0)("endValue",210)("tickInterval",20),p.xp6(1),p.Q6J("customizeText",e.customizeText),p.xp6(2),p.Q6J("size",16),p.xp6(2),p.Q6J("enabled",!0)}}function k(e,t){if(1&e&&(p.TgZ(0,"div",48),p.TgZ(1,"div"),p._uU(2),p.qZA(),p.TgZ(3,"div",49),p._uU(4),p.qZA(),p.TgZ(5,"div"),p._uU(6),p.qZA(),p.qZA()),2&e){const e=t.$implicit;p.xp6(2),p.Oqu(null==e?null:e.sender),p.xp6(2),p.hij(" ",null==e?null:e.message," "),p.xp6(2),p.Oqu(null==e?null:e.date)}}function S(e,t){if(1&e&&(p.TgZ(0,"div"),p.TgZ(1,"dx-scroll-view",46),p.YNc(2,k,7,3,"div",47),p.qZA(),p.qZA()),2&e){const e=p.oxw();p.xp6(1),p.Q6J("scrollByContent",!0)("scrollByThumb",!0),p.xp6(1),p.Q6J("ngForOf",e.messageList)}}const O=function(){return["popup"]},q=[{path:"",component:(()=>{class e{constructor(e,t,i,n,o,a,s){this.socket=e,this.route=t,this.customerStore=i,this.doctorStore=n,this.store=o,this.imageStore=a,this.imageService=s,this.visualRange={},this.imageData={sourceID:"",category:"",title:"",fileName:"",fileSize:0,fileType:"",url:"../../../../assets/imgs/profile.png"},this.stethoscopeSwitch=!0,this.thermometerSwitch=!0,this.co2Switch=!0,this.aneroidSwitch=!0,this.patientStatus="Healthy",this.popupVisible=!1,this.isCallPatientActionVisible=!1,this.sendMessageButtonOption={icon:"arrowright",text:"Send",type:"normal",onClick:this.sendMessage.bind(this)},this.clearMessageButtonOption={icon:"trash",text:"Clear",type:"normal",onClick:this.clearMessage.bind(this)},this.commands=[{text:"Please come to my office now"},{text:"You will be discharged soon"},{text:"We have your test results. Please come to my office now."},{text:"Please stay in your bed for further instruction"}],this.currentMessage="",this.messageList=[],this.currentCondition=this.socket.fromEvent("condition"),this.conditions=this.socket.fromEvent("conditions"),this.message=this.socket.fromEvent("message"),this.command=this.socket.fromEvent("command")}customizeText(e){return e.valueText+" BPM"}getCondition(e){this.socket.emit("getCondition",e)}newCondition(){this.socket.emit("newCondition",{id:this.patientID,condition:""})}getPatientID(){return this.route.paramMap.subscribe(e=>{this.patientID=e.get("id"),this.imageService.getImageBySourceID(e.get("id")).subscribe(e=>{null!==e&&(this.imageData=e)}),this.customerStore.getCustomer(e.get("id")).then(()=>{this.customerStore.$customerInstance.subscribe(e=>{null!==e&&(this.customerData=e,console.log(e))})})})}getDoctorID(){return this.store.$currentUser.subscribe(e=>{null!==e&&(console.log("LOGGED IN USER:"),console.log(e),this.doctorStore.getDoctorByUserName(e.userName).then(()=>{this.doctorStore.$doctorInstance.subscribe(e=>{this.doctorData=e})}))})}pmPatient(){this.popupVisible=!0}sendCommand(e){console.log(e.itemData.text),this.socket.emit("call",e.itemData.text),this.isCallPatientActionVisible=!1}onTextBoxValueChanged(e){this.currentMessage=e.value}onEnterKey(){this.sendMessage()}sendMessage(){""!==this.currentMessage.trim()&&(this.socket.emit("sendMessage",{sender:this.doctorData.fullName,message:this.currentMessage,date:(new Date).toLocaleTimeString()}),this.dxTextBox.instance.reset(),this.dxScrollView.instance.scrollBy(this.dxScrollView.instance.scrollHeight()+100))}clearMessage(){this.messageList=[]}disconnect(){this.socket.removeListener("condition",this.getCondition),this.socket.removeListener("message",this.sendMessage),this.socket.removeListener("command",this.sendCommand),this.getPatientID().unsubscribe(),this.patientDataListener().unsubscribe(),this.patientListListener().unsubscribe(),this.messageListener().unsubscribe(),this.commandListener().unsubscribe()}commandPatient(){this.isCallPatientActionVisible=!0}closeCommand(){this.isCallPatientActionVisible=!1}co2SwitchListener(e){this.co2Switch=e.value,this.store.showNotif(!0===e.value?"CO2 POWER ON":"CO2 POWER OFF","custom"),this.co2Socket()}co2Socket(){this.socket.emit("co2Switch",!0===this.co2Switch)}stethoscopeSwitchListener(e){this.stethoscopeSwitch=e.value,this.store.showNotif(!0===e.value?"STETHOSCOPE POWER ON":"STETHOSCOPE POWER OFF","custom"),this.stethoscopeSocket()}stethoscopeSocket(){this.socket.emit("stethoscopeSwitch",!0===this.stethoscopeSwitch)}thermometerSwitchListener(e){this.thermometerSwitch=e.value,this.store.showNotif(!0===e.value?"THERMOMETER POWER ON":"THERMOMETER POWER OFF","custom"),this.thermometerSocket()}thermometerSocket(){this.socket.emit("thermometerSwitch",!0===this.thermometerSwitch)}aneroidSwitchListener(e){this.aneroidSwitch=e.value,this.store.showNotif(!0===e.value?"ANEROID POWER ON":"ANEROID POWER OFF","custom"),this.aneroidSocket()}aneroidSocket(){this.socket.emit("aneroidSwitch",!0===this.aneroidSwitch)}messageListener(){return this.message.subscribe(e=>{console.log("CURRENT MESSAGE"),console.log(e),this.messageList=this.messageList.concat(e),""!==e&&(this.popupVisible=!0)})}commandListener(){return this.command.subscribe(e=>{console.log("CURRENT COMMAND"),console.log(e),""!==e&&this.store.showNotif(`Your message to patient: ${e}`,"custom")})}patientDataListener(){return this.currentCondition.subscribe(e=>{e.condition&&(this.patientData=e.condition)})}patientListListener(){return this.conditions.subscribe(e=>{console.log("TOTAL CONNECTED PATIENT"),console.log(e)})}ngOnInit(){this.getDoctorID(),this.getPatientID(),this.getCondition(this.patientID),this.co2Socket(),this.thermometerSocket(),this.aneroidSocket(),this.stethoscopeSocket(),this.messageListener(),this.commandListener(),this.patientDataListener(),this.patientListListener()}ngOnDestroy(){this.disconnect()}}return e.\u0275fac=function(t){return new(t||e)(p.Y36(g.sk),p.Y36(m.gz),p.Y36(x.k),p.Y36(f.M),p.Y36(Z.d),p.Y36(b.Y),p.Y36(w.Q))},e.\u0275cmp=p.Xpm({type:e,selectors:[["app-condition-detail"]],viewQuery:function(e,t){if(1&e&&(p.Gf(c.N,5),p.Gf(d.I,5)),2&e){let e;p.iGM(e=p.CRH())&&(t.dxScrollView=e.first),p.iGM(e=p.CRH())&&(t.dxTextBox=e.first)}},decls:12,vars:25,consts:[["class","overlay",4,"ngIf"],["style","\n    display: flex;\n    justify-content: space-around;\n    align-items: center;\n    flex-wrap: wrap;\n  ",4,"ngIf"],[2,"height","100%","display","flex","flex-wrap","nowrap"],[4,"ngIf"],["icon","user","label","Message Customer",3,"index","onClick"],["icon","upload","label","Command Patient",3,"index","onClick"],[3,"width","height","showTitle","shading","title","dragEnabled","closeOnOutsideClick","showCloseButton","visible","position","classList","visibleChange"],[4,"dxTemplate","dxTemplateOf"],["toolbar","bottom","location","center"],[3,"showClearButton","placeholder","onValueChanged","onEnterKey"],["widget","dxButton","toolbar","bottom","location","center","locateInMenu","auto",3,"options"],["title","Choose action",3,"items","visible","showTitle","showCancelButton","onItemClick","onCancelClick"],[1,"overlay"],[1,"bar_loader"],[2,"display","flex","justify-content","space-around","align-items","center","flex-wrap","wrap"],[2,"text-align","center"],[2,"display","flex","justify-content","space-evenly","align-items","center","flex-wrap","wrap"],[1,"panel-container"],[2,"font-family","hero","font-size","large","font-weight","bold","width","100%","text-align","center","color","rgb(185, 203, 252)"],[3,"value","onValueChanged"],["id","gauge-demo"],[1,"gauge-element",3,"value"],["text","Body Temperature (\xb0C)"],[3,"size"],["orientation","vertical"],[3,"startValue","endValue","tickInterval"],["backgroundColor","none"],["color","#679EC5",3,"startValue","endValue"],[3,"startValue","endValue"],["type","rhombus","color","#A4DDED"],["text","Respiratory Rate (%)"],["backgroundColor","#CACACA"],["type","circle","color","#E3A857"],["text","Blood Pressure (mm Hg)"],[3,"startValue","endValue","customTicks"],["type","decimal"],["color","#A6C567",3,"startValue","endValue"],["color","#E18E92",3,"startValue","endValue"],["id","gauge",3,"value"],[3,"customizeText"],["text","Heart Rate","horizontalAlignment","center","verticalAlignment","bottom"],["color","white",3,"size"],["top","0"],[3,"enabled"],[1,"image-container"],["alt","...",3,"src"],["width","100%","height","100%","bounceEnabled","true",3,"scrollByContent","scrollByThumb"],["style","\n          display: flex;\n          justify-content: flex-end;\n          align-items: flex-end;\n          flex-direction: column;\n          margin-bottom: 15px;\n        ",4,"ngFor","ngForOf"],[2,"display","flex","justify-content","flex-end","align-items","flex-end","flex-direction","column","margin-bottom","15px"],[2,"text-align","end","font-weight","bold","padding","15px","border-radius","10px","word-wrap","break-word","overflow-wrap","break-word","white-space","normal","width","100%","background-color","rgba(0, 0, 0, 0.493)","color","rgb(255, 249, 249)"]],template:function(e,t){1&e&&(p.YNc(0,v,2,0,"div",0),p.YNc(1,A,5,5,"div",1),p.TgZ(2,"div",2),p.YNc(3,_,58,38,"ng-container",3),p.qZA(),p.TgZ(4,"dx-speed-dial-action",4),p.NdJ("onClick",function(){return t.pmPatient()}),p.qZA(),p.TgZ(5,"dx-speed-dial-action",5),p.NdJ("onClick",function(){return t.commandPatient()}),p.qZA(),p.TgZ(6,"dx-popup",6),p.NdJ("visibleChange",function(e){return t.popupVisible=e}),p.YNc(7,S,3,3,"div",7),p.TgZ(8,"dxi-toolbar-item",8),p.TgZ(9,"dx-text-box",9),p.NdJ("onValueChanged",function(e){return t.onTextBoxValueChanged(e)})("onEnterKey",function(){return t.onEnterKey()}),p.qZA(),p.qZA(),p._UZ(10,"dxi-toolbar-item",10),p.qZA(),p.TgZ(11,"dx-action-sheet",11),p.NdJ("onItemClick",function(e){return t.sendCommand(e)})("onCancelClick",function(){return t.closeCommand()}),p.qZA()),2&e&&(p.Q6J("ngIf",!t.patientData),p.xp6(1),p.Q6J("ngIf",t.patientData),p.xp6(2),p.Q6J("ngIf",t.patientData),p.xp6(1),p.Q6J("index",1),p.xp6(1),p.Q6J("index",2),p.xp6(1),p.Q6J("width","90%")("height","80%")("showTitle",!0)("shading",!0)("title",t.customerData?t.customerData.fullName:null)("dragEnabled",!0)("closeOnOutsideClick",!1)("showCloseButton",!0)("visible",t.popupVisible)("position","center")("classList",p.DdM(24,O)),p.xp6(1),p.Q6J("dxTemplateOf","content"),p.xp6(2),p.Q6J("showClearButton",!0)("placeholder","Enter message..."),p.xp6(1),p.Q6J("options",t.sendMessageButtonOption),p.xp6(1),p.Q6J("items",t.commands)("visible",t.isCallPatientActionVisible)("showTitle",!0)("showCancelButton",!0))},directives:[n.O5,s.D,l.x,T.p6,C.QjJ,d.I,h.n,r.A,a.t,C.POg,C.zVO,C.Lgd,C.yk0,C._xe,C.xqd,C.R57,C.sBj,C.NAX,o.F,C.gz5,C.v6i,c.N,n.sg],styles:['@media screen and (max-width:800px){#gauge-demo[_ngcontent-%COMP%]{justify-content:center;align-items:center}#gauge-demo[_ngcontent-%COMP%], .panel-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:15px;border-radius:15px;width:100%;background-color:rgba(0,0,0,.404);box-shadow:inset 0 30px 60px -12px #fdfdff,inset 0 18px 36px -18px #0000004d}.panel-container[_ngcontent-%COMP%]{justify-content:space-evenly;align-items:flex-start}}@media screen and (min-width:801px){#gauge-demo[_ngcontent-%COMP%]{align-items:center;flex-wrap:wrap;width:40%}#gauge-demo[_ngcontent-%COMP%], .panel-container[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;padding:15px;height:100%;border-radius:15px;background-color:rgba(0,0,0,.404);box-shadow:inset 0 30px 60px -12px #fdfdff,inset 0 18px 36px -18px #0000004d}.panel-container[_ngcontent-%COMP%]{width:20%;align-items:flex-start;flex-direction:column}}.image-container[_ngcontent-%COMP%]{display:flex;width:100%;flex-direction:row;justify-content:center;align-items:center}@media screen and (min-width:375px){.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:100%;height:100%;width:100%;box-shadow:0 25px 50px -12px #4fcdff40;margin-bottom:10px}}@media screen and (max-width:374px){.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:150px;height:150px;width:150px;box-shadow:0 25px 50px -12px #4fcdff40;margin-bottom:10px}}  #gauge-demo .gauge-element{height:50vh}  .overlay{display:flex;justify-content:center;align-items:center;background-color:rgba(0,0,0,.103);z-index:999;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);position:relative}  .bar_loader,   .bar_loader:after,   .bar_loader:before{background:#987c7c;animation:load1 1s ease-in-out infinite;width:1em;height:4em}  .bar_loader{color:#e4cece;text-indent:-9999em;margin:88px auto;position:relative;font-size:11px;transform:translateZ(0);animation-delay:-.16s}  .bar_loader:after,   .bar_loader:before{position:absolute;top:0;content:""}  .bar_loader:before{left:-1.5em;animation-delay:-.32s}  .bar_loader:after{left:1.5em}@keyframes load1{0%,80%,to{box-shadow:0 0;height:4em}40%{box-shadow:0 -2em;height:5em}}']}),e})()}];let V=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({imports:[[m.Bz.forChild(q)],m.Bz]}),e})();const J={url:"https://ng-health-care-demo.herokuapp.com",options:{}};let M=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({imports:[[n.ez,g.HB.forRoot(J),o.K,a.H,V,s.B,r.p,l.C,c.r,d.a,u.e,h.o]]}),e})()}}]);