(self.webpackChunkta_sys_online=self.webpackChunkta_sys_online||[]).push([[398],{21398:(t,e,s)=>{"use strict";s.r(e),s.d(e,{InstructorListModule:()=>q});var r=s(61116),o=s(46553),i=s(37211),n=s(8619),a=s(61305),c=s(41142),l=s(42693);let h=(()=>{class t{constructor(t){this.http=t,this.apiUrl="https://ta-sys-online-server.azurewebsites.net/api/Instructor"}fetchInstructor(t,e){const s=(new l.LE).set("PageNumber",t).set("PageSize",e);return console.log(s.toString()),this.http.get(this.apiUrl+"/paging",{params:s,reportProgress:!0,observe:"body"})}fetchInstructorByLearnerID(t,e,s){const r=(new l.LE).set("PageNumber",t).set("PageSize",e).set("Id",s);return console.log(r.toString()),this.http.get(this.apiUrl+"/byLearnerID",{params:r,reportProgress:!0,observe:"body"})}searchInstructorByProperty(t,e,s,r){const o=(new l.LE).set("Property",t).set("Value",e).set("PageNumber",s).set("PageSize",r);return console.log(o.toString()),this.http.get(this.apiUrl+"/search",{params:o,reportProgress:!0,observe:"body"})}filterInstructorByProperty(t,e,s,r){const o=(new l.LE).set("Value",e).set("Property",t).set("PageNumber",s).set("PageSize",r);return console.log(o.toString()),this.http.get(this.apiUrl+"/filter",{params:o,reportProgress:!0,observe:"body"})}sortInstructorByProperty(t,e,s,r){const o=(new l.LE).set("SortBy",t).set("Order",e).set("PageNumber",s).set("PageSize",r);return console.log(o.toString()),this.http.get(this.apiUrl+"/paging",{params:o,reportProgress:!0,observe:"body"})}uploadInstructor(t){return this.http.post(this.apiUrl,t,{reportProgress:!0,observe:"body"})}generateRandomInstructor(){return this.http.post(this.apiUrl+"/randomInstructor",{reportProgress:!0,observe:"body"})}deleteInstructor(t){return this.http.post(this.apiUrl+"/delete",t,{reportProgress:!0,observe:"body"})}deleteAll(){return this.http.delete(this.apiUrl,{reportProgress:!0,observe:"body"})}getInstructor(t){return this.http.get(this.apiUrl+`/${t}`,{reportProgress:!0,observe:"body"})}updateInstructor(t){return this.http.put(this.apiUrl,t,{reportProgress:!0,observe:"body"})}fetchAll(){return this.http.get(this.apiUrl,{reportProgress:!0,observe:"body"})}}return t.\u0275fac=function(e){return new(e||t)(n.LFG(l.eN))},t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var u=s(80549),g=s(86150);const d={instructorList:[],selectedInstructor:{},instructorInstance:void 0,exportData:[],totalPages:0,currentPage:0,totalItems:0,responseMsg:""};let p=(()=>{class t extends a.b{constructor(t,e,s){super(d),this.instructorService=t,this.userService=e,this.store=s,this.$instructorList=this.select(t=>t.instructorList),this.$exportData=this.select(t=>t.exportData),this.$totalPages=this.select(t=>t.totalPages),this.$totalItems=this.select(t=>t.totalItems),this.$currentPage=this.select(t=>t.currentPage),this.$selectedInstructor=this.select(t=>t.selectedInstructor),this.$instructorInstance=this.select(t=>t.instructorInstance)}fillEmpty(t,e,s,r){let o=s;console.log("FILL INDEX");let i=t*e;console.log(i);for(var n=0;n<r.length;n++)o[i]=r[n],i++;return console.log("Filled array result"),console.log(o),o}initInfiniteData(t,e,s,r){return this.store.setIsLoading(!0),this.userService.filterUserByProperty(t,e,s,r).toPromise().then(t=>{this.setState({instructorList:t.data}),console.log("Current flag: infite list"),console.log(this.state.instructorList),this.setState({totalItems:t.totalRecords}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.pageNumber}),this.store.setIsLoading(!1)})}loadInfiniteDataAsync(t,e,s,r){this.setIsLoading(!0),this.userService.filterUserByProperty(t,e,s,r).subscribe({next:t=>{this.setState({instructorList:this.state.instructorList.concat(t.data)}),console.log("Infinite list"),console.log(this.state.instructorList),console.log("Server response"),console.log(t),this.setState({totalItems:t.totalRecords}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.pageNumber}),this.setIsLoading(!1)},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}})}loadDataAsyncByLearnerID(t,e,s){this.setIsLoading(!0),this.instructorService.fetchInstructorByLearnerID(t,e,s).subscribe({next:s=>{this.setState({instructorList:this.fillEmpty(t-1,e,this.state.instructorList,s.data)}),console.log("Pure list"),console.log(this.state.instructorList),console.log("Server response"),console.log(s),this.setState({totalItems:s.totalRecords}),this.setState({totalPages:s.totalPages}),this.setState({currentPage:s.pageNumber}),this.setIsLoading(!1)},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}})}initInfiniteDataByLearnerID(t,e,s){return this.instructorService.fetchInstructorByLearnerID(t,e,s).toPromise().then(t=>{this.setState({instructorList:t.data}),console.log("Current flag: infite list"),console.log(this.state.instructorList),this.setState({totalItems:t.totalRecords}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.pageNumber})})}loadInfiniteDataAsyncByLearnerID(t,e,s){this.setIsLoading(!0),this.instructorService.fetchInstructorByLearnerID(t,e,s).subscribe({next:t=>{this.setState({instructorList:this.state.instructorList.concat(t.data)}),console.log("Infinite list"),console.log(this.state.instructorList),console.log("Server response"),console.log(t),this.setState({totalItems:t.totalRecords}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.pageNumber}),this.setIsLoading(!1)},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}})}initData(t,e){this.instructorService.fetchInstructor(t,e).toPromise().then(t=>{this.setState({instructorList:new Array(t.totalRecords)}),console.log("Current flag: pure list"),console.log(this.state.instructorList),this.setState({totalItems:t.totalRecords}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.pageNumber})}).then(()=>{this.loadDataAsync(t,e)})}initFilterByPropertyData(t,e,s,r){this.store.showNotif("Filtered Mode On","custom"),this.instructorService.filterInstructorByProperty(t,e,s,r).toPromise().then(t=>{this.setState({instructorList:new Array(t.totalRecords)}),console.log("Current flag: filtered list"),console.log(this.state.instructorList),this.setState({totalItems:t.totalRecords}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.pageNumber})}).then(()=>{this.filterInstructorByProperty(t,e,s,r)})}initInfiniteFilterByPropertyData(t,e,s,r){this.store.showNotif("Filtered Mode On","custom"),this.instructorService.filterInstructorByProperty(t,e,s,r).toPromise().then(t=>{this.setState({instructorList:t.data}),console.log("Current flag: infinite filtered list"),console.log(this.state.instructorList),this.setState({totalItems:t.totalRecords}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.pageNumber})})}initSearchByPropertyData(t,e,s,r){this.store.showNotif("Searched Mode On","custom"),this.instructorService.searchInstructorByProperty(t,e,s,r).toPromise().then(t=>{this.setState({instructorList:new Array(t.totalRecords)}),console.log("Current flag: searched list"),console.log(this.state.instructorList),this.setState({totalItems:t.totalRecords}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.pageNumber})}).then(()=>{this.searchInstructorByProperty(t,e,s,r)})}initInfiniteSearchByPropertyData(t,e,s,r,o,i){this.store.showNotif("Searched Mode On","custom"),this.userService.filterSearchUserByProperty(t,e,s,r,o,i).toPromise().then(t=>{0!==t.totalRecords?this.setState({instructorList:t.data}):this.store.showNotif("No result found!","custom"),console.log("Current flag: infitite searched list"),console.log(this.state.instructorList),this.setState({totalItems:t.totalRecords}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.pageNumber})})}initSortByPropertyData(t,e,s,r){this.store.showNotif("Sort Mode On","custom"),this.instructorService.sortInstructorByProperty(t,e,s,r).toPromise().then(t=>{this.setState({instructorList:new Array(t.totalRecords)}),console.log("Current flag: sort list"),console.log(this.state.instructorList),this.setState({totalItems:t.totalRecords}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.pageNumber})}).then(()=>{this.sortInstructorByProperty(t,e,s,r)})}initInfiniteSortByPropertyData(t,e,s,r,o,i){this.store.showNotif("Sort Mode On","custom"),this.userService.filterSortUserByProperty(t,e,s,r,o,i).toPromise().then(t=>{this.setState({instructorList:t.data}),console.log("Current flag: sort list"),console.log(this.state.instructorList),this.setState({totalItems:t.totalRecords}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.pageNumber})})}loadDataAsync(t,e){this.setIsLoading(!0),this.instructorService.fetchInstructor(t,e).subscribe({next:s=>{this.setState({instructorList:this.fillEmpty(t-1,e,this.state.instructorList,s.data)}),console.log("Pure list"),console.log(this.state.instructorList),console.log("Server response"),console.log(s),this.setState({totalItems:s.totalRecords}),this.setState({totalPages:s.totalPages}),this.setState({currentPage:s.pageNumber}),this.setIsLoading(!1)},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}})}refresh(t,e){this.setIsLoading(!0),this.instructorService.fetchInstructor(t,e).subscribe({next:s=>{this.setState({instructorList:this.fillEmpty(t-1,e,this.state.instructorList,s.data)}),this.setState({totalItems:s.totalRecords}),this.setState({totalPages:s.totalPages}),this.setState({currentPage:s.pageNumber}),console.log("Pure list"),console.log(this.state.instructorList),console.log("Server response"),console.log(s),this.store.showNotif("Refresh successfully","custom"),this.setIsLoading(!1)},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}})}setIsLoading(t){this.store.setIsLoading(t)}uploadInstructor(t,e,s){this.confirmDialog("").then(r=>{r&&(this.setIsLoading(!0),this.instructorService.uploadInstructor(t).subscribe({next:t=>{this.setState({responseMsg:t}),this.setTotalItems(this.state.totalItems+1),console.log(t),this.loadDataAsync(e,s),this.setIsLoading(!1),this.store.showNotif(t.responseMessage,"custom")},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}}))})}updateInstructor(t,e,s){this.confirmDialog("").then(r=>{r&&(this.setIsLoading(!0),this.instructorService.updateInstructor(t).subscribe({next:t=>{this.setState({responseMsg:t}),console.log(t),this.loadDataAsync(e,s),this.setIsLoading(!1),this.store.showNotif(t.responseMessage,"custom")},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}}))})}confirmDialog(t){return(0,c.iG)(""!=t?`<b>${t}</b>`:"<b>Are you sure?</b>","Confirm changes")}deleteSelectedInstructors(t,e,s){this.confirmDialog("").then(r=>{r&&(this.setIsLoading(!0),this.instructorService.deleteInstructor(t).subscribe({next:t=>{this.setState({responseMsg:t}),console.log(t),this.loadDataAsync(e,s),console.log(this.state.instructorList),this.setIsLoading(!1),this.store.showNotif(t.responseMessage,"custom")},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}}))})}deleteAll(){this.confirmDialog("Delete all items?").then(t=>{t&&(this.setIsLoading(!0),this.instructorService.deleteAll().subscribe({next:t=>{this.resetState(),console.log(t),this.setIsLoading(!1),this.store.showNotif(t.responseMessage,"custom")},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}}))})}deleteInstructor(t,e,s){this.confirmDialog("").then(r=>{r&&(this.setIsLoading(!0),this.instructorService.deleteInstructor(t).subscribe({next:t=>{this.setState({responseMsg:t}),this.setTotalItems(this.state.totalItems-1),console.log(t),this.loadDataAsync(e,s),this.setIsLoading(!1),this.store.showNotif(t.responseMessage,"custom")},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}}))})}selectInstructor(t){this.setState({selectedInstructor:t})}setTotalPages(t){this.setState({totalPages:t})}setTotalItems(t){this.setState({totalItems:t})}setCurrentPage(t){this.setState({currentPage:t})}filterInstructorByProperty(t,e,s,r){this.setIsLoading(!0),this.instructorService.filterInstructorByProperty(t,e,s,r).subscribe({next:t=>{0!==t.totalRecords&&(this.setState({instructorList:this.fillEmpty(s-1,r,this.state.instructorList,t.data)}),console.log("Filtered list"),console.log(this.state.instructorList),console.log("Server response"),console.log(t),this.setState({totalItems:t.totalRecords}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.pageNumber})),this.setIsLoading(!1)},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}})}filterInfiniteInstructorByProperty(t,e,s,r){this.setIsLoading(!0),this.instructorService.filterInstructorByProperty(t,e,s,r).subscribe({next:t=>{this.setState({instructorList:this.state.instructorList.concat(t)}),console.log("Filtered list"),console.log(this.state.instructorList),console.log("Server response"),console.log(t),this.setState({totalItems:t.totalRecords}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.pageNumber}),this.setIsLoading(!1)},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}})}searchInstructorByProperty(t,e,s,r){this.setIsLoading(!0),this.instructorService.searchInstructorByProperty(t,e,s,r).subscribe({next:t=>{0!==t.totalRecords?this.setState({instructorList:this.fillEmpty(s-1,r,this.state.instructorList,t.data)}):this.store.showNotif("No result found!","custom"),console.log("Searched list"),console.log(this.state.instructorList),console.log("Server response"),console.log(t),this.setState({totalItems:t.totalRecords}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.pageNumber}),this.setIsLoading(!1)},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}})}searchInfiniteInstructorByProperty(t,e,s,r,o,i){this.setIsLoading(!0),this.userService.filterSearchUserByProperty(t,e,s,r,o,i).subscribe({next:t=>{0!==t.totalRecords?this.setState({instructorList:this.state.instructorList.concat(t)}):this.store.showNotif("No result found!","custome"),console.log("Infite searched list"),console.log(this.state.instructorList),console.log("Server response"),console.log(t),this.setState({totalItems:t.totalRecords}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.pageNumber}),this.setIsLoading(!1)},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}})}sortInstructorByProperty(t,e,s,r){this.setIsLoading(!0),this.instructorService.sortInstructorByProperty(t,e,s,r).subscribe({next:t=>{this.setState({responseMsg:t}),this.setState({instructorList:this.fillEmpty(s-1,r,this.state.instructorList,t.data)}),this.setState({totalItems:t.totalRecords}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.pageNumber}),console.log("Sorted list"),console.log(this.state.instructorList),console.log("Server response"),console.log(t),this.setIsLoading(!1)},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}})}sortInfiniteInstructorByProperty(t,e,s,r,o,i){this.setIsLoading(!0),this.userService.filterSortUserByProperty(t,e,s,r,o,i).subscribe({next:t=>{this.setState({instructorList:this.state.instructorList.concat(t)}),console.log("Infite sorted list"),console.log(this.state.instructorList),console.log("Server response"),console.log(t),this.setState({totalItems:t.totalRecords}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.pageNumber}),this.setIsLoading(!1)},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}})}getInstructor(t){return this.setIsLoading(!0),this.instructorService.getInstructor(t).toPromise().then(t=>{this.setState({instructorInstance:t}),console.log(t),this.setIsLoading(!1)})}setExportData(t){this.setState({instructorList:t})}resetState(){this.setState(d)}}return t.\u0275fac=function(e){return new(e||t)(n.LFG(h),n.LFG(u.b),n.LFG(g.d))},t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var m=s(70513),f=s(25567),S=s(69333),y=s(52177),I=s(83584),P=s(11018),b=s(35614),L=s(86101),x=s(4670),v=s(83914),D=s(67935);function B(t,e){if(1&t&&(n.TgZ(0,"div"),n.TgZ(1,"div",15),n._uU(2),n.qZA(),n.qZA()),2&t){const t=n.oxw();n.xp6(2),n.hij(" ",null==t.instructorData?null:t.instructorData.fullName," ")}}function w(t,e){if(1&t&&(n.TgZ(0,"div"),n.TgZ(1,"div",15),n._uU(2),n.qZA(),n.qZA()),2&t){const t=n.oxw();n.xp6(2),n.hij(" ","0"===(null==t.instructorData?null:t.instructorData.gender)?"Male":"1"===(null==t.instructorData?null:t.instructorData.gender)?"Female":"Not mentioned"," ")}}function N(t,e){if(1&t&&(n.TgZ(0,"div"),n.TgZ(1,"div",15),n._uU(2),n.ALo(3,"date"),n.qZA(),n.qZA()),2&t){const t=n.oxw();n.xp6(2),n.hij(" ",n.lcZ(3,1,null==t.instructorData?null:t.instructorData.dateOfBirth)," ")}}const C=function(){return["instructor-form"]},T=function(){return{text:"Address"}},Z=function(){return{text:"Phone"}};let M=(()=>{class t{constructor(t,e){this.userInfoStore=t,this.imageService=e,this.fieldList=[],this.imageData={sourceID:"",container:"",category:"",title:"",fileName:"",fileSize:0,fileType:"",url:"../../../../assets/imgs/profile.png"}}instructorDataListener(){return this.userInfoStore.$userInfoInstance.subscribe(t=>{this.instructorData=t})}renderSourceData(){this.instructorData=null,this.imageData={sourceID:"",container:"",category:"",title:"",fileName:"",fileSize:0,fileType:"",url:"../../../../assets/imgs/profile.png"},setTimeout(()=>{this.userInfoStore.getUserInfo(this.instructorID).then(()=>{this.instructorDataListener()})},100)}ngOnInit(){}ngOnChanges(){this.renderSourceData()}ngOnDestroy(){this.instructorDataListener().unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(x.$),n.Y36(v.Q))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-instructor-detail"]],inputs:{instructorID:"instructorID"},features:[n.TTD],decls:17,vars:12,consts:[[3,"bounceEnabled","scrollByContent","scrollByThumb"],[1,"img-container"],["alt","...",3,"src"],["id","instructor-form-container",3,"classList"],["id","instructor-form",3,"formData","readOnly"],["itemType","group","caption","Personal Information"],["name","fullName"],["text","Full Name"],[4,"dxTemplate"],["name","gender"],["text","Gender"],["name","dateOfBirth"],["text","Birthdate"],["dataField","address",3,"label"],["dataField","phone",3,"label"],[1,"responsive-field"]],template:function(t,e){1&t&&(n.TgZ(0,"dx-scroll-view",0),n.TgZ(1,"div",1),n._UZ(2,"img",2),n.qZA(),n.TgZ(3,"form",3),n.TgZ(4,"dx-form",4),n.TgZ(5,"dxi-item",5),n.TgZ(6,"dxi-item",6),n._UZ(7,"dxo-label",7),n.YNc(8,B,3,1,"div",8),n.qZA(),n.TgZ(9,"dxi-item",9),n._UZ(10,"dxo-label",10),n.YNc(11,w,3,1,"div",8),n.qZA(),n.TgZ(12,"dxi-item",11),n._UZ(13,"dxo-label",12),n.YNc(14,N,4,3,"div",8),n.qZA(),n._UZ(15,"dxi-item",13),n._UZ(16,"dxi-item",14),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&t&&(n.Q6J("bounceEnabled",!0)("scrollByContent",!0)("scrollByThumb",!0),n.xp6(2),n.Q6J("src",null==e.imageData?null:e.imageData.url,n.LSH),n.xp6(1),n.Q6J("classList",n.DdM(9,C)),n.xp6(1),n.Q6J("formData",e.instructorData)("readOnly",!0),n.xp6(11),n.Q6J("label",n.DdM(10,T)),n.xp6(1),n.Q6J("label",n.DdM(11,Z)))},directives:[i.N,D.Y,y.ZT3,y.sBj,L.p6],pipes:[r.uU],styles:[".img-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:15px}.responsive-field[_ngcontent-%COMP%]{width:100%;border-bottom:2px dotted #fff;font-size:large;word-wrap:break-word;overflow-wrap:break-word}@media screen and (max-width:450px){.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100px;width:100px;border-radius:100px;box-shadow:0 25px 50px -12px #4fcdff40}}@media screen and (min-width:451px){.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:150px;width:150px;border-radius:150px;box-shadow:0 25px 50px -12px #4fcdff40}}"]}),t})();function O(t,e){if(1&t){const t=n.EpF();n.TgZ(0,"div",16),n.TgZ(1,"div",17),n._uU(2),n.qZA(),n.TgZ(3,"div",18),n._UZ(4,"img",19),n.qZA(),n.TgZ(5,"div"),n.TgZ(6,"dx-button",20),n.NdJ("onClick",function(){const e=n.CHM(t).$implicit;return n.oxw(2).selectInstructor(null==e?null:e.id)}),n.qZA(),n.qZA(),n.qZA()}if(2&t){const t=e.$implicit,s=n.oxw(2);n.xp6(2),n.Oqu(null==t?null:t.displayName),n.xp6(2),n.Q6J("src",s.mapImageListToUrl(null==t?null:t._id),n.LSH)}}function A(t,e){if(1&t&&(n.ynx(0),n.TgZ(1,"div",14),n.YNc(2,O,7,2,"div",15),n.qZA(),n.BQk()),2&t){const t=n.oxw();n.xp6(2),n.Q6J("ngForOf",t.instructorList)}}function F(t,e){if(1&t&&(n.ynx(0),n._UZ(1,"app-instructor-detail",21),n.BQk()),2&t){const t=n.oxw(2);n.xp6(1),n.Q6J("instructorID",t.currentInstructorID)}}function R(t,e){if(1&t&&(n.TgZ(0,"div"),n.YNc(1,F,2,1,"ng-container",10),n.qZA()),2&t){const t=n.oxw();n.xp6(1),n.Q6J("ngIf",t.currentInstructorID)}}const _=function(){return{paddingLeft:"25px",marginBottom:"5px"}},U=[{path:"",component:(()=>{class t{constructor(t,e,s,r,o){this.instructorStore=t,this.store=e,this.router=s,this.imageStore=r,this.userStore=o,this.departmentList=[{_id:"-1",name:"(NONE)"},{_id:"0",name:"Dermatology"},{_id:"1",name:"Oncology"},{_id:"2",name:"Endocrinology"},{_id:"3",name:"Gastroenterology"},{_id:"4",name:"Hepato-Biliary-Pancreatic"},{_id:"5",name:"Neurology"},{_id:"6",name:"Respiratory"},{_id:"7",name:"Infectious"},{_id:"8",name:"Ophthalmology"}],this.pageSize=10,this.pullDown=!1,this.isDetailPopupVisible=!1,this.currentSortProperty="displayName",this.currentSearchProperty="displayName",this.currentFilterProperty="roleId",this.searchBoxOptions={valueChangeEvent:"keyup",showClearButton:!0,onKeyUp:this.onSearchKeyupHandler.bind(this),onValueChanged:this.onSearchValueChanged.bind(this),mode:"search",placeholder:"Search with name"},this.refreshButtonOptions={type:"normal",icon:"refresh",hint:"Fetch data from server",onClick:this.onRefresh.bind(this)},this.sortSelectBoxOptions={items:[{_id:"-1",name:"(NONE)"},{_id:"0",name:"asc"},{_id:"1",name:"desc"}],valueExpr:"name",placeholder:"Sort by name",displayExpr:"name",onValueChanged:this.onSortValueChanged.bind(this)},this.imageData={sourceID:"",container:"",category:"",title:"",fileName:"",fileSize:0,fileType:"",url:"../../../../assets/imgs/profile.png"},this.imageList=[],this.updateContent=(t,e)=>{const s=this.checkEditorMode(),r=this.currentIndexFromServer;this.updateContentTimer&&clearTimeout(this.updateContentTimer),this.updateContentTimer=setTimeout(()=>{if(this.instructorList.length)switch(s){case"NORMAL":this.paginatePureData(r+1);break;case"SEARCH":this.paginateSearchData(r+1);break;case"SORT":this.paginateSortData(r+1)}t.component.release()},500)},this.updateTopContent=t=>{this.updateContent(t,"PullDown")},this.updateBottomContent=t=>{this.updateContent(t,"ReachBottom")}}selectInstructor(t){this.currentInstructorID=t,console.log("SELECTED ID"),console.log(t),this.isDetailPopupVisible=!0}onSearchKeyupHandler(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.isSearchingByName=!0,this.isFilteringByCategory=!1,this.isSortingByPrice=!1,console.log(this.currentSearchByPropertyValue),""!==this.currentSearchByPropertyValue?this.instructorStore.initInfiniteSearchByPropertyData(this.currentFilterProperty,this.currentFilterByPropertyValue,this.currentSearchProperty,this.currentSearchByPropertyValue,1,this.pageSize):(this.store.showNotif("SEARCH MODE OFF","custom"),this.onRefresh())},1250)}onSearchValueChanged(t){this.currentSearchByPropertyValue=t.value}onSortValueChanged(t){this.isSortingByPrice=!0,this.isSearchingByName=!1,this.isFilteringByCategory=!1,this.currentSortByPropertyValue=t.value,"(NONE)"!==t.value?this.instructorStore.initInfiniteSortByPropertyData(this.currentFilterProperty,this.currentFilterByPropertyValue,this.currentSortProperty,t.value,1,this.pageSize):(this.store.showNotif("SORT MODE OFF","custom"),this.onRefresh())}checkEditorMode(){return!0===this.isFilteringByCategory?"FILTER":!0===this.isSearchingByName?"SEARCH":!0===this.isSortingByPrice?"SORT":"NORMAL"}paginatePureData(t){this.instructorStore.loadInfiniteDataAsync(this.currentFilterProperty,this.currentFilterByPropertyValue,t,this.pageSize)}paginateSearchData(t){this.instructorStore.searchInfiniteInstructorByProperty(this.currentFilterProperty,this.currentFilterByPropertyValue,this.currentSearchProperty,this.currentSearchByPropertyValue,t,this.pageSize)}paginateSortData(t){this.instructorStore.sortInfiniteInstructorByProperty(this.currentFilterProperty,this.currentFilterByPropertyValue,this.currentSortProperty,this.currentSortByPropertyValue,t,this.pageSize)}onRefresh(){this.isFilteringByCategory=!1,this.isSearchingByName=!1,this.isSortingByPrice=!1,this.userStore.getRole().then(()=>{this.userStore.$roleList.subscribe(t=>{var e;this.currentFilterByPropertyValue=null===(e=t.find(t=>"Instructor"===t.name))||void 0===e?void 0:e.id,this.instructorStore.initInfiniteData(this.currentFilterProperty,this.currentFilterByPropertyValue,1,this.pageSize)})})}navigateToCourse(){this.router.navigate(["/course_list"])}sourceDataListener(){return this.instructorStore.$instructorList.subscribe(t=>{this.instructorList=t})}mapImageListToUrl(t){var e;return 0!==this.imageList.length&&(null===(e=this.imageList.find(e=>e.sourceID===t))||void 0===e?void 0:e.url)||this.imageData.url}imageDataListener(){return this.imageStore.$imageList.subscribe(t=>{0!==t.length&&(this.imageList=t,console.log("IMAGE LIST OF DOCTOR"),console.log(this.imageList))})}currentPageListener(){return this.instructorStore.$currentPage.subscribe(t=>{this.currentIndexFromServer=t})}scrollTop(){this.scrollView.instance.scrollTo({top:0,left:0})}initData(){this.userStore.getRole().then(()=>{this.userStore.$roleList.subscribe(t=>{var e;this.currentFilterByPropertyValue=null===(e=t.find(t=>"Instructor"===t.name))||void 0===e?void 0:e.id,this.instructorStore.initInfiniteData(this.currentFilterProperty,this.currentFilterByPropertyValue,1,this.pageSize).then(()=>{this.sourceDataListener(),this.imageDataListener()})})})}ngOnInit(){this.currentPageListener(),this.initData()}ngOnDestroy(){this.sourceDataListener().unsubscribe(),this.currentPageListener().unsubscribe(),this.imageDataListener().unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(p),n.Y36(g.d),n.Y36(o.F0),n.Y36(m.Y),n.Y36(f.U))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-instructor-list"]],viewQuery:function(t,e){if(1&t&&n.Gf(i.N,5),2&t){let t;n.iGM(t=n.CRH())&&(e.scrollView=t.first)}},decls:14,vars:30,consts:[[3,"ngStyle"],[3,"location","text"],["widget","dxTextBox","location","before",3,"options"],["widget","dxButton","location","after",3,"options","locateInMenu"],[3,"locateInMenu","location"],["icon","group","type","normal",3,"disabled"],["widget","dxSelectBox","location","after",3,"options","locateInMenu"],["location","after","locateInMenu","auto"],["icon","arrowright","type","outline","text","To Course","hint","Navigate to course list ",3,"onClick"],[3,"direction","showScrollbar","scrollByContent","scrollByThumb","height","bounceEnabled","onPullDown","onReachBottom"],[4,"ngIf"],["icon","arrowup","label","",3,"index","onClick"],[3,"visible","height","width","showTitle","shading","title","dragEnabled","closeOnOutsideClick","showCloseButton","visibleChange"],[4,"dxTemplate","dxTemplateOf"],[1,"card-container"],["class","card",4,"ngFor","ngForOf"],[1,"card"],[1,"card-title"],[1,"card-img"],["alt","...",2,"height","100%","width","100%",3,"src"],["icon","arrowright","type","outline","text","Detail","hint","Click to see instructor detail",3,"onClick"],[3,"instructorID"]],template:function(t,e){1&t&&(n.TgZ(0,"dx-toolbar",0),n._UZ(1,"dxi-item",1),n._UZ(2,"dxi-item",2),n._UZ(3,"dxi-item",3),n.TgZ(4,"dxi-item",4),n._UZ(5,"dx-button",5),n.qZA(),n._UZ(6,"dxi-item",6),n.TgZ(7,"dxi-item",7),n.TgZ(8,"dx-button",8),n.NdJ("onClick",function(){return e.navigateToCourse()}),n.qZA(),n.qZA(),n.qZA(),n.TgZ(9,"dx-scroll-view",9),n.NdJ("onPullDown",function(t){return e.updateTopContent(t)})("onReachBottom",function(t){return e.updateBottomContent(t)}),n.YNc(10,A,3,1,"ng-container",10),n.qZA(),n.TgZ(11,"dx-speed-dial-action",11),n.NdJ("onClick",function(){return e.scrollTop()}),n.qZA(),n.TgZ(12,"dx-popup",12),n.NdJ("visibleChange",function(t){return e.isDetailPopupVisible=t}),n.YNc(13,R,2,1,"div",13),n.qZA()),2&t&&(n.Q6J("ngStyle",n.DdM(29,_)),n.xp6(1),n.Q6J("location","before")("text","Instructor List"),n.xp6(1),n.Q6J("options",e.searchBoxOptions),n.xp6(1),n.Q6J("options",e.refreshButtonOptions)("locateInMenu","auto"),n.xp6(1),n.Q6J("locateInMenu","auto")("location","after"),n.xp6(1),n.Q6J("disabled",!0),n.xp6(1),n.Q6J("options",e.sortSelectBoxOptions)("locateInMenu","auto"),n.xp6(3),n.Q6J("direction","vertical")("showScrollbar",!0)("scrollByContent",!0)("scrollByThumb",!0)("height","69vh")("bounceEnabled",!1),n.xp6(1),n.Q6J("ngIf",e.instructorList),n.xp6(1),n.Q6J("index",1),n.xp6(1),n.Q6J("visible",e.isDetailPopupVisible)("height","80%")("width","80%")("showTitle",!0)("shading",!0)("title","Instructor Detail")("dragEnabled",!0)("closeOnOutsideClick",!1)("showCloseButton",!0),n.xp6(1),n.Q6J("dxTemplateOf","content"))},directives:[S.G,r.PC,y.ZT3,I.K,i.N,r.O5,P.D,b.x,L.p6,r.sg,M],styles:[".card-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center;align-items:flex-start}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{height:250px;margin:10px;background-color:rgba(0,10,12,.486);border-radius:10px;box-shadow:0 54px 55px #00000040,0 -12px 30px #0000001f,0 4px 6px #0000001f,0 12px 13px #0000002b,0 -3px 5px #00000017;width:250px;display:flex;flex-direction:column;justify-content:center;align-items:center}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:large;font-weight:700;font-style:oblique}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-img[_ngcontent-%COMP%]{height:150px;width:150px;margin-bottom:10px}"]}),t})()}];let E=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[o.Bz.forChild(U)],o.Bz]}),t})(),q=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[r.ez,E,i.r,S.k,I.e,P.B,b.C,D.A]]}),t})()}}]);