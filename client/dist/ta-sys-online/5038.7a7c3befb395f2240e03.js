(self.webpackChunkta_sys_online=self.webpackChunkta_sys_online||[]).push([[5038],{95038:(e,t,n)=>{"use strict";n.r(t),n.d(t,{HealthConditionModule:()=>Q});var i=n(61116),o=n(56841),a=n(43254),s=n(11018),r=n(841),l=n(35614),c=n(37211),d=n(56118),u=n(83584),g=n(83949),p=n(57335),x=n(15419),m=n(49783),h=n(68084),f=n(60310),b=n(83914),Z=n(86101),v=n(52177);function w(e,t){if(1&e&&(m.TgZ(0,"div",10),m.TgZ(1,"h2",11),m._uU(2),m.qZA(),m.TgZ(3,"div"),m._uU(4),m.qZA(),m.qZA()),2&e){const e=m.oxw();m.xp6(2),m.hij(" Your Room: ",null==e.customerData?null:e.customerData.assignedRoom," "),m.xp6(2),m.HOy(" HR: ",null==e.patientData?null:e.patientData.heartRate,". RR: ",null==e.patientData?null:e.patientData.respiratoryRate,". BT: ",null==e.patientData?null:e.patientData.bodyTemperature,". BP: ",null==e.patientData?null:e.patientData.bloodPressure,". ")}}function T(e,t){1&e&&(m.TgZ(0,"div",12),m._UZ(1,"div",13),m.qZA())}function y(e,t){if(1&e&&(m.ynx(0),m.TgZ(1,"p",40),m._uU(2," Your Info "),m.qZA(),m.TgZ(3,"div",41),m._UZ(4,"img",42),m.qZA(),m.TgZ(5,"div"),m._uU(6),m.qZA(),m.TgZ(7,"div"),m._uU(8),m.qZA(),m.TgZ(9,"div"),m._uU(10),m.qZA(),m.TgZ(11,"div"),m._uU(12),m.qZA(),m.TgZ(13,"div"),m._uU(14),m.qZA(),m.TgZ(15,"div"),m._uU(16),m.qZA(),m.TgZ(17,"div"),m._uU(18),m.qZA(),m.TgZ(19,"div"),m._uU(20),m.qZA(),m.BQk()),2&e){const e=m.oxw(2);m.xp6(4),m.Q6J("src",null==e.imageData?null:e.imageData.url,m.LSH),m.xp6(2),m.hij("Full Name: ",null==e.customerData?null:e.customerData.fullName,""),m.xp6(2),m.hij("Age: ",null==e.customerData?null:e.customerData.age,""),m.xp6(2),m.hij("Gender: ",null==e.customerData?null:e.customerData.gender,""),m.xp6(2),m.hij("Blood Type: ",null==e.customerData?null:e.customerData.bloodType,""),m.xp6(2),m.hij("Height: ",null==e.customerData?null:e.customerData.height,""),m.xp6(2),m.hij("Weight: ",null==e.customerData?null:e.customerData.weight,""),m.xp6(2),m.hij("Job: ",null==e.customerData?null:e.customerData.occupation,""),m.xp6(2),m.hij("Address: ",null==e.customerData?null:e.customerData.address,"")}}const D=function(){return[90,110,200,300]};function C(e,t){if(1&e&&(m.ynx(0),m.TgZ(1,"div",14),m.TgZ(2,"div",15),m.YNc(3,y,21,9,"ng-container",3),m.qZA(),m.TgZ(4,"div",16),m.TgZ(5,"dx-linear-gauge",17),m.TgZ(6,"dxo-title",18),m._UZ(7,"dxo-font",19),m.qZA(),m._UZ(8,"dxo-geometry",20),m._UZ(9,"dxo-scale",21),m.TgZ(10,"dxo-range-container",22),m._UZ(11,"dxi-range",23),m._UZ(12,"dxi-range",24),m.qZA(),m.qZA(),m.TgZ(13,"dx-linear-gauge",17),m._UZ(14,"dxo-value-indicator",25),m.TgZ(15,"dxo-title",26),m._UZ(16,"dxo-font",19),m.qZA(),m._UZ(17,"dxo-geometry",20),m._UZ(18,"dxo-scale",21),m._UZ(19,"dxo-range-container",27),m.qZA(),m.TgZ(20,"dx-linear-gauge",17),m._UZ(21,"dxo-value-indicator",28),m.TgZ(22,"dxo-title",29),m._UZ(23,"dxo-font",19),m.qZA(),m._UZ(24,"dxo-geometry",20),m.TgZ(25,"dxo-scale",30),m.TgZ(26,"dxo-label"),m._UZ(27,"dxo-format",31),m.qZA(),m.qZA(),m.TgZ(28,"dxo-range-container",27),m._UZ(29,"dxi-range",23),m._UZ(30,"dxi-range",32),m._UZ(31,"dxi-range",33),m.qZA(),m.qZA(),m.TgZ(32,"dx-circular-gauge",34),m.TgZ(33,"dxo-scale",21),m._UZ(34,"dxo-label",35),m.qZA(),m.TgZ(35,"dxo-title",36),m._UZ(36,"dxo-font",37),m._UZ(37,"dxo-margin",38),m.qZA(),m._UZ(38,"dxo-tooltip",39),m.qZA(),m.qZA(),m.qZA(),m.BQk()),2&e){const e=m.oxw();m.xp6(3),m.Q6J("ngIf",e.customerData),m.xp6(2),m.Q6J("value",e.patientData.bodyTemperature),m.xp6(2),m.Q6J("size",16),m.xp6(2),m.Q6J("startValue",0)("endValue",100)("tickInterval",30),m.xp6(2),m.Q6J("startValue",-40)("endValue",0),m.xp6(1),m.Q6J("startValue",0)("endValue",40),m.xp6(1),m.Q6J("value",e.patientData.respiratoryRate),m.xp6(3),m.Q6J("size",16),m.xp6(2),m.Q6J("startValue",0)("endValue",100)("tickInterval",10),m.xp6(2),m.Q6J("value",e.patientData.bloodPressure),m.xp6(3),m.Q6J("size",16),m.xp6(2),m.Q6J("startValue",90)("endValue",300)("customTicks",m.DdM(33,D)),m.xp6(4),m.Q6J("startValue",10)("endValue",100),m.xp6(1),m.Q6J("startValue",110)("endValue",200),m.xp6(1),m.Q6J("startValue",210)("endValue",300),m.xp6(1),m.Q6J("value",e.patientData.heartRate),m.xp6(1),m.Q6J("startValue",0)("endValue",210)("tickInterval",20),m.xp6(1),m.Q6J("customizeText",e.customizeText),m.xp6(2),m.Q6J("size",16),m.xp6(2),m.Q6J("enabled",!0)}}function _(e,t){if(1&e&&(m.TgZ(0,"div",45),m._uU(1),m.qZA()),2&e){const e=m.oxw(2);m.xp6(1),m.hij(" ",e.currentCommand," ")}}function k(e,t){if(1&e&&(m.TgZ(0,"div"),m.TgZ(1,"dx-scroll-view",43),m.YNc(2,_,2,1,"div",44),m.qZA(),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("scrollByContent",!0)("scrollByThumb",!0),m.xp6(1),m.Q6J("ngIf",e.currentCommand)}}function A(e,t){if(1&e&&(m.TgZ(0,"div",47),m.TgZ(1,"div"),m._uU(2),m.qZA(),m.TgZ(3,"div",48),m._uU(4),m.qZA(),m.TgZ(5,"div"),m._uU(6),m.qZA(),m.qZA()),2&e){const e=t.$implicit;m.xp6(2),m.Oqu(e.sender),m.xp6(2),m.hij(" ",null==e?null:e.message," "),m.xp6(2),m.Oqu(null==e?null:e.date)}}function q(e,t){if(1&e&&(m.TgZ(0,"div"),m.TgZ(1,"dx-scroll-view",43),m.YNc(2,A,7,3,"div",46),m.qZA(),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("scrollByContent",!0)("scrollByThumb",!0),m.xp6(1),m.Q6J("ngForOf",e.messageList)}}const I=function(){return["popup"]},V=[{path:"",component:(()=>{class e{constructor(e,t,n,i){this.socket=e,this.customerStore=t,this.store=n,this.imageService=i,this.visualRange={},this.imageData={sourceID:"",category:"",title:"",fileName:"",fileSize:0,fileType:"",url:"../../../../assets/imgs/profile.png"},this.popupVisible=!1,this.commandPopupVisible=!1,this.sendMessageButtonOption={icon:"arrowright",text:"Send",type:"normal",onClick:this.sendMessage.bind(this)},this.clearMessageButtonOption={icon:"trash",text:"Clear",type:"normal",onClick:this.clearMessage.bind(this)},this.currentMessage="",this.currentCommand="",this.messageList=[],this.currentCondition=this.socket.fromEvent("condition"),this.message=this.socket.fromEvent("message"),this.command=this.socket.fromEvent("command")}customizeText(e){return e.valueText+" BPM"}getCondition(e){this.socket.emit("getCondition",e)}newCondition(e){this.socket.emit("newCondition",e)}getPatientID(){return this.store.$currentUser.subscribe(e=>{null!==e&&(console.log("LOGGED IN USER:"),console.log(e),this.customerStore.getCustomerByUserName(null==e?void 0:e.userName).then(()=>{this.customerStore.$customerInstance.subscribe(e=>{this.customerData=e,this.patientID=e._id,this.imageService.getImageBySourceID(e._id).subscribe(e=>{null!==e&&(this.imageData=e)}),this.newCondition(e._id),this.patientDataInterval=setInterval(()=>{this.getCondition(e._id)},1e3),console.log("CURRENT CUSTOMER:"),console.log(e),console.log(e._id)})}))})}pmPatient(){this.popupVisible=!0}onTextBoxValueChanged(e){this.currentMessage=e.value}onEnterKey(){this.sendMessage()}sendMessage(){""!==this.currentMessage.trim()&&(this.socket.emit("sendMessage",{sender:this.customerData.fullName,message:this.currentMessage,date:(new Date).toLocaleTimeString()}),this.dxTextBox.instance.reset(),this.dxScrollView.instance.scrollBy(this.dxScrollView.instance.scrollHeight()+100))}clearMessage(){this.messageList=[]}disconnect(){this.socket.removeListener("condition",this.getCondition),this.socket.removeListener("message",this.sendMessage),this.getPatientID().unsubscribe(),clearInterval(this.stethoscopeInterval),clearInterval(this.co2Interval),clearInterval(this.thermometerInterval),clearInterval(this.aneroidInterval),clearInterval(this.patientDataInterval),this.patientDataListener().unsubscribe(),this.messageListener().unsubscribe(),this.commandListener().unsubscribe(),this.getPatientID().unsubscribe()}co2Socket(){this.co2Interval=setInterval(()=>{this.socket.emit("co2",!0)},1e3)}stethoscopeSocket(){this.stethoscopeInterval=setInterval(()=>{this.socket.emit("stethoscope",!0)},1e3)}thermometerSocket(){this.thermometerInterval=setInterval(()=>{this.socket.emit("thermometer",!0)},1e3)}aneroidSocket(){this.aneroidInterval=setInterval(()=>{this.socket.emit("aneroid",!0)},1e3)}messageListener(){return this.message.subscribe(e=>{console.log("CURRENT MESSAGE"),console.log(e),this.messageList=this.messageList.concat(e),""!==e&&(this.popupVisible=!0)})}commandListener(){return this.command.subscribe(e=>{console.log("CURRENT COMMAND"),console.log(e),""!==e&&(this.commandPopupVisible=!0,this.currentCommand=e)})}patientDataListener(){return this.currentCondition.subscribe(e=>{e.condition&&(this.patientData=e.condition)})}ngOnInit(){this.getPatientID(),this.co2Socket(),this.thermometerSocket(),this.aneroidSocket(),this.stethoscopeSocket(),this.messageListener(),this.commandListener(),this.patientDataListener()}ngOnDestroy(){this.disconnect()}}return e.\u0275fac=function(t){return new(t||e)(m.Y36(p.sk),m.Y36(h.k),m.Y36(f.d),m.Y36(b.Q))},e.\u0275cmp=m.Xpm({type:e,selectors:[["app-health-condition"]],viewQuery:function(e,t){if(1&e&&(m.Gf(c.N,5),m.Gf(d.I,5)),2&e){let e;m.iGM(e=m.CRH())&&(t.dxScrollView=e.first),m.iGM(e=m.CRH())&&(t.dxTextBox=e.first)}},decls:12,vars:33,consts:[[2,"height","60vh"],["style","\n      display: flex;\n      justify-content: space-around;\n      align-items: center;\n      flex-wrap: wrap;\n    ",4,"ngIf"],["class","overlay",4,"ngIf"],[4,"ngIf"],["icon","user","label","Message Doctor",3,"index","onClick"],[3,"width","height","showTitle","shading","title","dragEnabled","closeOnOutsideClick","showCloseButton","visible","position","classList","visibleChange"],[4,"dxTemplate","dxTemplateOf"],["toolbar","bottom","location","center"],[3,"showClearButton","placeholder","onValueChanged","onEnterKey"],["widget","dxButton","toolbar","bottom","location","center","locateInMenu","auto",3,"options"],[2,"display","flex","justify-content","space-around","align-items","center","flex-wrap","wrap"],[2,"text-align","center"],[1,"overlay"],[1,"bar_loader"],[2,"display","flex","justify-content","space-evenly","align-items","center","flex-wrap","wrap"],[2,"display","flex","justify-content","space-evenly","align-items","flex-start","flex-direction","column","padding","15px","height","100%","border-radius","15px","background-color","rgba(0, 0, 0, 0.404)","box-shadow","rgb(253, 253, 255) 0px 30px 60px -12px inset,\n            rgba(0, 0, 0, 0.3) 0px 18px 36px -18px inset"],["id","gauge-demo"],[1,"gauge-element",3,"value"],["text","Body Temperature (\xb0C)"],[3,"size"],["orientation","vertical"],[3,"startValue","endValue","tickInterval"],["backgroundColor","none"],["color","#679EC5",3,"startValue","endValue"],[3,"startValue","endValue"],["type","rhombus","color","#A4DDED"],["text","Respiratory Rate (%)"],["backgroundColor","#CACACA"],["type","circle","color","#E3A857"],["text","Blood Pressure (mm Hg)"],[3,"startValue","endValue","customTicks"],["type","decimal"],["color","#A6C567",3,"startValue","endValue"],["color","#E18E92",3,"startValue","endValue"],["id","gauge",3,"value"],[3,"customizeText"],["text","Heart Rate","horizontalAlignment","center","verticalAlignment","bottom"],["color","white",3,"size"],["top","0"],[3,"enabled"],[2,"font-family","hero","font-size","large","font-weight","bold","width","100%","text-align","center","color","rgb(185, 203, 252)"],[1,"image-container"],["alt","...",3,"src"],["width","100%","height","100%","bounceEnabled","true",3,"scrollByContent","scrollByThumb"],["style","\n            text-align: center;\n            font-weight: bold;\n            font-size: larger;\n            padding: 15px;\n            border-radius: 10px;\n            word-wrap: break-word;\n            overflow-wrap: break-word;\n            width: 100%;\n            background-color: rgba(0, 0, 0, 0.493);\n            color: rgb(255, 249, 249);\n          ",4,"ngIf"],[2,"text-align","center","font-weight","bold","font-size","larger","padding","15px","border-radius","10px","word-wrap","break-word","overflow-wrap","break-word","width","100%","background-color","rgba(0, 0, 0, 0.493)","color","rgb(255, 249, 249)"],["style","\n            display: flex;\n            justify-content: flex-end;\n            align-items: flex-end;\n            flex-direction: column;\n            margin-bottom: 15px;\n          ",4,"ngFor","ngForOf"],[2,"display","flex","justify-content","flex-end","align-items","flex-end","flex-direction","column","margin-bottom","15px"],[2,"text-align","end","font-weight","bold","padding","15px","border-radius","10px","word-wrap","break-word","overflow-wrap","break-word","width","100%","background-color","rgba(0, 0, 0, 0.493)","color","rgb(255, 249, 249)"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m.YNc(1,w,5,5,"div",1),m.YNc(2,T,2,0,"div",2),m.YNc(3,C,39,34,"ng-container",3),m.TgZ(4,"dx-speed-dial-action",4),m.NdJ("onClick",function(){return t.pmPatient()}),m.qZA(),m.TgZ(5,"dx-popup",5),m.NdJ("visibleChange",function(e){return t.commandPopupVisible=e}),m.YNc(6,k,3,3,"div",6),m.qZA(),m.TgZ(7,"dx-popup",5),m.NdJ("visibleChange",function(e){return t.popupVisible=e}),m.YNc(8,q,3,3,"div",6),m.TgZ(9,"dxi-toolbar-item",7),m.TgZ(10,"dx-text-box",8),m.NdJ("onValueChanged",function(e){return t.onTextBoxValueChanged(e)})("onEnterKey",function(){return t.onEnterKey()}),m.qZA(),m.qZA(),m._UZ(11,"dxi-toolbar-item",9),m.qZA(),m.qZA()),2&e&&(m.xp6(1),m.Q6J("ngIf",t.patientData),m.xp6(1),m.Q6J("ngIf",!t.patientData),m.xp6(1),m.Q6J("ngIf",t.patientData),m.xp6(1),m.Q6J("index",1),m.xp6(1),m.Q6J("width","90%")("height","80%")("showTitle",!0)("shading",!0)("title","Doctor Command")("dragEnabled",!0)("closeOnOutsideClick",!1)("showCloseButton",!0)("visible",t.commandPopupVisible)("position","center")("classList",m.DdM(31,I)),m.xp6(1),m.Q6J("dxTemplateOf","content"),m.xp6(1),m.Q6J("width","90%")("height","80%")("showTitle",!0)("shading",!0)("title","Healthcare Service")("dragEnabled",!0)("closeOnOutsideClick",!1)("showCloseButton",!0)("visible",t.popupVisible)("position","center")("classList",m.DdM(32,I)),m.xp6(1),m.Q6J("dxTemplateOf","content"),m.xp6(2),m.Q6J("showClearButton",!0)("placeholder","Enter message..."),m.xp6(1),m.Q6J("options",t.sendMessageButtonOption))},directives:[i.O5,s.D,l.x,Z.p6,v.QjJ,d.I,a.t,v.POg,v.zVO,v.Lgd,v.yk0,v._xe,v.xqd,v.R57,v.sBj,v.NAX,o.F,v.gz5,v.v6i,c.N,i.sg],styles:['@media screen and (max-width:800px){#gauge-demo[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;padding:15px;border-radius:15px;background-color:rgba(0,0,0,.404);box-shadow:inset 0 30px 60px -12px #fdfdff,inset 0 18px 36px -18px #0000004d}}@media screen and (min-width:801px){#gauge-demo[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;align-items:center;flex-wrap:wrap;padding:15px;border-radius:15px;background-color:rgba(0,0,0,.404);box-shadow:inset 0 30px 60px -12px #fdfdff,inset 0 18px 36px -18px #0000004d}}.image-container[_ngcontent-%COMP%]{display:flex;width:100%;flex-direction:row;justify-content:center;align-items:center}@media screen and (min-width:375px){.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:100%;height:360px;width:360px;box-shadow:0 25px 50px -12px #4fcdff40;margin-bottom:10px}}@media screen and (max-width:374px){.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:150px;height:150px;width:150px;box-shadow:0 25px 50px -12px #4fcdff40;margin-bottom:10px}}  #gauge-demo .gauge-element{height:50vh}  .overlay{display:flex;justify-content:center;align-items:center;background-color:rgba(0,0,0,.103);z-index:999;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);position:relative}  .bar_loader,   .bar_loader:after,   .bar_loader:before{background:#987c7c;animation:load1 1s ease-in-out infinite;width:1em;height:4em}  .bar_loader{color:#e4cece;text-indent:-9999em;margin:88px auto;position:relative;font-size:11px;transform:translateZ(0);animation-delay:-.16s}  .bar_loader:after,   .bar_loader:before{position:absolute;top:0;content:""}  .bar_loader:before{left:-1.5em;animation-delay:-.32s}  .bar_loader:after{left:1.5em}@keyframes load1{0%,80%,to{box-shadow:0 0;height:4em}40%{box-shadow:0 -2em;height:5em}}']}),e})()}];let U=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=m.oAB({type:e}),e.\u0275inj=m.cJS({imports:[[x.Bz.forChild(V)],x.Bz]}),e})();const J={url:"https://ng-health-care-demo.herokuapp.com",options:{}};let Q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=m.oAB({type:e}),e.\u0275inj=m.cJS({imports:[[i.ez,p.HB.forRoot(J),o.K,a.H,U,s.B,r.p,l.C,c.r,d.a,u.e,g.o]]}),e})()}}]);