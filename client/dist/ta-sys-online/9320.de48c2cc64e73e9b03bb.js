(self.webpackChunkta_sys_online=self.webpackChunkta_sys_online||[]).push([[9320],{99320:(e,t,i)=>{"use strict";i.r(t),i.d(t,{UserProfileModule:()=>k});var n=i(61116),o=i(67935),r=i(15419),a=i(49783),s=i(60310),d=i(68084),l=i(31977),u=i(70513),c=i(52177),m=i(86101);function p(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div"),a.TgZ(1,"div",41),a._UZ(2,"img",42),a.TgZ(3,"input",43),a.NdJ("change",function(t){return a.CHM(e),a.oxw(2).handleInputChange(t)}),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=a.oxw(2);a.xp6(2),a.Q6J("src",e.imageData.url,a.LSH)}}const g=function(){return["signupForm"]},x=function(){return{text:"Full Name"}},h=function(){return{text:"Gender"}},f=function(){return["Male","Female"]},b=function(e,t){return{items:e,value:t}},D=function(){return{text:"Age"}},Z=function(){return["O","A","B"]},y=function(){return{text:"Height"}},_=function(){return{text:"Weight"}},T=function(){return{text:"Job"}},O=function(){return{text:"Address"}};function v(e,t){if(1&e){const e=a.EpF();a.ynx(0),a.TgZ(1,"form",15),a.NdJ("submit",function(t){return a.CHM(e),a.oxw().onCustomerSubmit(t)}),a.TgZ(2,"dx-form",16),a.TgZ(3,"dxi-item",4),a.TgZ(4,"dxi-item",17),a.TgZ(5,"dxi-item",18),a.YNc(6,p,4,1,"div",19),a.qZA(),a.TgZ(7,"dxi-item",20),a._UZ(8,"dxi-validation-rule",21),a._UZ(9,"dxi-validation-rule",22),a.qZA(),a.TgZ(10,"dxi-item",23),a._UZ(11,"dxi-validation-rule",24),a.qZA(),a.TgZ(12,"dxi-item",25),a._UZ(13,"dxi-validation-rule",26),a._UZ(14,"dxi-validation-rule",27),a.qZA(),a.TgZ(15,"dxi-item",28),a._UZ(16,"dxi-validation-rule",24),a.qZA(),a.TgZ(17,"dxi-item",29),a._UZ(18,"dxi-validation-rule",30),a._UZ(19,"dxi-validation-rule",31),a.qZA(),a.TgZ(20,"dxi-item",32),a._UZ(21,"dxi-validation-rule",33),a._UZ(22,"dxi-validation-rule",34),a.qZA(),a.TgZ(23,"dxi-item",35),a._UZ(24,"dxi-validation-rule",36),a._UZ(25,"dxi-validation-rule",37),a.qZA(),a.TgZ(26,"dxi-item",38),a._UZ(27,"dxi-validation-rule",39),a._UZ(28,"dxi-validation-rule",40),a.qZA(),a.TgZ(29,"dxi-item",12),a._UZ(30,"dxi-item",13),a._UZ(31,"dxi-item",13),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.BQk()}if(2&e){const e=a.oxw();a.xp6(1),a.Q6J("classList",a.DdM(23,g)),a.xp6(1),a.Q6J("formData",e.customerData)("showValidationSummary",!0),a.xp6(5),a.Q6J("label",a.DdM(24,x)),a.xp6(2),a.Q6J("min",1),a.xp6(1),a.Q6J("label",a.DdM(25,h))("editorOptions",a.WLB(27,b,a.DdM(26,f),null==e.customerData?null:e.customerData.gender)),a.xp6(2),a.Q6J("label",a.DdM(30,D)),a.xp6(2),a.Q6J("min",1),a.xp6(1),a.Q6J("label",a.DdM(31,h))("editorOptions",a.WLB(33,b,a.DdM(32,Z),null==e.customerData?null:e.customerData.bloodType)),a.xp6(2),a.Q6J("label",a.DdM(36,y)),a.xp6(2),a.Q6J("min",1),a.xp6(1),a.Q6J("label",a.DdM(37,_)),a.xp6(2),a.Q6J("min",1),a.xp6(1),a.Q6J("label",a.DdM(38,T)),a.xp6(2),a.Q6J("min",1),a.xp6(1),a.Q6J("label",a.DdM(39,O)),a.xp6(2),a.Q6J("min",1),a.xp6(1),a.Q6J("colCount",2)("cssClass","buttonGroup"),a.xp6(1),a.Q6J("buttonOptions",e.submitCustomerButtonOptions),a.xp6(1),a.Q6J("buttonOptions",e.resetCustomerButtonOptions)}}function M(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div"),a.TgZ(1,"div",41),a._UZ(2,"img",42),a.TgZ(3,"input",43),a.NdJ("change",function(t){return a.CHM(e),a.oxw(2).handleInputChange(t)}),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=a.oxw(2);a.xp6(2),a.Q6J("src",e.imageData.url,a.LSH)}}const C=function(){return{text:"Role"}},q=function(){return["Doctor","Nurses","Assistants"]},w=function(){return{text:"Department"}},A=function(){return["Dermatology","Oncology","Endocrinology","Gastroenterology","Hepato-Biliary-Pancreatic","Neurology","Respiratory","Infectious","Ophthalmology"]},J=function(){return{text:"Year of experience"}},S=function(){return{text:"Description"}};function U(e,t){if(1&e){const e=a.EpF();a.ynx(0),a.TgZ(1,"form",44),a.NdJ("submit",function(t){return a.CHM(e),a.oxw().onDoctorSubmit(t)}),a.TgZ(2,"dx-form",45),a.TgZ(3,"dxi-item",4),a.TgZ(4,"dxi-item",17),a.TgZ(5,"dxi-item",18),a.YNc(6,M,4,1,"div",19),a.qZA(),a.TgZ(7,"dxi-item",20),a._UZ(8,"dxi-validation-rule",21),a._UZ(9,"dxi-validation-rule",22),a.qZA(),a.TgZ(10,"dxi-item",23),a._UZ(11,"dxi-validation-rule",24),a.qZA(),a.TgZ(12,"dxi-item",25),a._UZ(13,"dxi-validation-rule",26),a._UZ(14,"dxi-validation-rule",27),a.qZA(),a.TgZ(15,"dxi-item",10),a._UZ(16,"dxi-validation-rule",11),a.qZA(),a.TgZ(17,"dxi-item",46),a._UZ(18,"dxi-validation-rule",47),a.qZA(),a.TgZ(19,"dxi-item",48),a._UZ(20,"dxi-validation-rule",49),a._UZ(21,"dxi-validation-rule",50),a.qZA(),a.TgZ(22,"dxi-item",51),a._UZ(23,"dxi-validation-rule",52),a._UZ(24,"dxi-validation-rule",53),a.qZA(),a.TgZ(25,"dxi-item",12),a._UZ(26,"dxi-item",13),a._UZ(27,"dxi-item",13),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.BQk()}if(2&e){const e=a.oxw();a.xp6(1),a.Q6J("classList",a.DdM(21,g)),a.xp6(1),a.Q6J("formData",e.doctorData)("showValidationSummary",!0),a.xp6(5),a.Q6J("label",a.DdM(22,x)),a.xp6(2),a.Q6J("min",1),a.xp6(1),a.Q6J("label",a.DdM(23,h))("editorOptions",a.WLB(25,b,a.DdM(24,f),null==e.doctorData?null:e.doctorData.gender)),a.xp6(2),a.Q6J("label",a.DdM(28,D)),a.xp6(2),a.Q6J("min",1),a.xp6(1),a.Q6J("label",a.DdM(29,C))("editorOptions",a.WLB(31,b,a.DdM(30,q),null==e.doctorData?null:e.doctorData.role)),a.xp6(2),a.Q6J("label",a.DdM(34,w))("editorOptions",a.WLB(36,b,a.DdM(35,A),null==e.doctorData?null:e.doctorData.department)),a.xp6(2),a.Q6J("label",a.DdM(39,J)),a.xp6(2),a.Q6J("min",1),a.xp6(1),a.Q6J("label",a.DdM(40,S)),a.xp6(2),a.Q6J("min",1),a.xp6(1),a.Q6J("colCount",2)("cssClass","buttonGroup"),a.xp6(1),a.Q6J("buttonOptions",e.submitDoctorButtonOptions),a.xp6(1),a.Q6J("buttonOptions",e.resetDoctorButtonOptions)}}const B=function(){return{text:"Username"}},Q=function(){return{disabled:!0}},P=function(){return{text:"Password"}},L=function(){return{mode:"password"}},N=function(){return["Customer","Doctor","Admin"]},I=function(e,t){return{items:e,value:t,disabled:!0}},F=[{path:"",component:(()=>{class e{constructor(e,t,i,n){this.store=e,this.customerStore=t,this.doctorStore=i,this.imageStore=n,this.submitButtonOptions={text:"Submit",icon:"save",type:"normal",useSubmitBehavior:!0},this.resetButtonOptions={text:"Reset",icon:"refresh",type:"normal",useSubmitBehavior:!1,onClick:()=>{this.form.instance.resetValues(),this.form.instance.getEditor("userName").focus()}},this.submitCustomerButtonOptions={text:"Submit",icon:"save",type:"normal",useSubmitBehavior:!0},this.resetCustomerButtonOptions={text:"Reset",icon:"refresh",type:"normal",useSubmitBehavior:!1,onClick:()=>{this.renderSourceData(),this.imageData.url="../../../../assets/imgs/profile.png"}},this.submitDoctorButtonOptions={text:"Submit",icon:"save",type:"normal",useSubmitBehavior:!0},this.resetDoctorButtonOptions={text:"Reset",icon:"refresh",type:"normal",useSubmitBehavior:!1,onClick:()=>{this.renderSourceData(),this.imageData.url="../../../../assets/imgs/profile.png"}},this.imageData={sourceID:"",category:"",title:"",fileName:"",fileSize:0,fileType:"",url:"../../../../assets/imgs/profile.png"},this.onSubmit=e=>{e.preventDefault()},this.onCustomerSubmit=e=>{e.preventDefault(),this.imageData.sourceID=this.customerData._id,this.imageData.category="customer",this.imageData.title=this.customerData.fullName,this.imageStore.uploadImage(this.imageData,0,5),this.customerStore.updateCustomer(this.customerData,this.customerData._id,0,5)},this.onDoctorSubmit=e=>{e.preventDefault(),this.imageData.sourceID=this.doctorData._id,this.imageData.category="doctor",this.imageData.title=this.doctorData.fullName,this.imageStore.uploadImage(this.imageData,0,5),this.doctorStore.updateDoctor(this.doctorData,this.doctorData._id,0,5)}}onFormShown(e){setTimeout(()=>{this.form.instance.getEditor("userName").focus()},200)}handleInputChange(e){var t=e.dataTransfer?e.dataTransfer.files[0]:e.target.files[0];if(console.log(t),void 0!==t)if(t.size<=2e6){this.imageData.fileSize=t.size,this.imageData.fileType=t.type,this.imageData.fileName=t.name;var i=new FileReader;if(!t.type.match(/image-*/))return void this.store.showNotif("Invalid format!","custom");i.onload=this.handleReaderLoaded.bind(this),i.readAsDataURL(t)}else this.store.showNotif("Image cannot exceed 2MB","custom")}handleReaderLoaded(e){var t=e.target;console.log("READER"),console.log(t),this.imageData.url=t.result,console.log("SOURCE ID"),console.log(this.imageData.sourceID)}userDataListener(){return this.store.$currentUser.subscribe(e=>{null!==e&&(this.currentUser=e)})}userRoleListener(){return this.store.$currentRole.subscribe(e=>{this.currentRole=e})}customerDataListener(){return this.customerStore.$customerInstance.subscribe(e=>{void 0!==e&&(this.customerData=e,this.imageStore.getImageBySourceID(e._id).then(()=>{this.imageDataListener()}))})}doctorDataListener(){return this.doctorStore.$doctorInstance.subscribe(e=>{void 0!==e&&(this.doctorData=e,this.imageStore.getImageBySourceID(e._id).then(()=>{this.imageDataListener()}))})}imageDataListener(){return this.imageStore.$imageInstance.subscribe(e=>{null!==e&&(console.log("IMAGE DATA"),console.log(e),this.imageData=e)})}renderSourceData(){switch(this.user=this.currentUser,this.currentRole){case"Customer":this.customerStore.getCustomerByUserName(this.currentUser.userName).then(()=>{this.customerDataListener()}),this.user={userName:this.user.userName,passWord:this.user.passWord,role:this.user.role};break;case"Doctor":this.doctorStore.getDoctorByUserName(this.currentUser.userName).then(()=>{this.doctorDataListener()}),this.user={userName:this.user.userName,passWord:this.user.passWord,role:this.user.role}}}ngOnInit(){this.userDataListener(),this.userRoleListener(),this.renderSourceData()}ngOnDestroy(){this.userDataListener().unsubscribe(),this.userRoleListener().unsubscribe(),this.imageDataListener().unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(s.d),a.Y36(d.k),a.Y36(l.M),a.Y36(u.Y))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-user-profile"]],viewQuery:function(e,t){if(1&e&&a.Gf(o.Y,5),2&e){let e;a.iGM(e=a.CRH())&&(t.form=e.first)}},decls:20,vars:27,consts:[[1,"container"],["id","form-container",3,"classList","submit"],[1,"long-title"],["id","form","validationGroup","userData",3,"formData","showValidationSummary","onContentReady"],["itemType","group"],["itemType","group","caption","Account Information"],["dataField","userName","editorType","dxTextBox",3,"label","editorOptions"],["dataField","passWord","editorType","dxTextBox",3,"label","editorOptions"],["type","required","message","Password is required"],["type","stringLength","message","Password cannot contain more than 12 letters!",3,"min","max"],["dataField","role","editorType","dxSelectBox",3,"label","editorOptions"],["type","required","message","Role is required"],["itemType","group",3,"colCount","cssClass"],["itemType","button","horizontalAlignment","center",3,"buttonOptions"],[4,"ngIf"],["id","customer-form-container",3,"classList","submit"],["id","customer-form","validationGroup","customerData",3,"formData","showValidationSummary"],["itemType","group","caption","Personal Information"],["name","avatar"],[4,"dxTemplate"],["dataField","fullName","editorType","dxTextBox",3,"label"],["type","required","message","Full name is required"],["type","stringLength","message","Full name cannot lower than 1 letter!",3,"min"],["dataField","gender","editorType","dxSelectBox",3,"label","editorOptions"],["type","required","message","Gender is required"],["dataField","age","editorType","dxNumberBox",3,"label"],["type","required","message","Age is required"],["type","range","message","Age cannot lower than 1",3,"min"],["dataField","bloodType","editorType","dxSelectBox",3,"label","editorOptions"],["dataField","height","editorType","dxNumberBox",3,"label"],["type","required","message","Height is required"],["type","range","message","Height cannot lower than 1",3,"min"],["dataField","weight","editorType","dxNumberBox",3,"label"],["type","required","message","Weight is required"],["type","range","message","Weight cannot lower than 1",3,"min"],["dataField","occupation","editorType","dxTextBox",3,"label"],["type","required","message","Job is required"],["type","stringLength","message","Job cannot lower than 12 letters!",3,"min"],["dataField","address","editorType","dxTextBox",3,"label"],["type","required","message","Address is required"],["type","stringLength","message","Address cannot lower than 1 letter!",3,"min"],[1,"image-container"],["alt","...",3,"src"],["type","file","id","img","accept","image/*",1,"img-input",3,"change"],["id","doctor-form-container",3,"classList","submit"],["id","doctor-form","validationGroup","doctorData",3,"formData","showValidationSummary"],["dataField","department","editorType","dxSelectBox",3,"label","editorOptions"],["type","required","message","Department is required"],["dataField","yearsOfExperience","editorType","dxNumberBox",3,"label"],["type","required","message","Year of experience is required"],["type","range","message","Year of Experience cannot lower than 1",3,"min"],["dataField","description","editorType","dxTextBox",3,"label"],["type","required","message","Description is required"],["type","stringLength","message","Description cannot lower than 1 letter!",3,"min"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0),a.TgZ(1,"form",1),a.NdJ("submit",function(e){return t.onSubmit(e)}),a.TgZ(2,"div",2),a.TgZ(3,"h3"),a._uU(4,"Profile Detail"),a.qZA(),a.qZA(),a.TgZ(5,"dx-form",3),a.NdJ("onContentReady",function(e){return t.onFormShown(e)}),a.TgZ(6,"dxi-item",4),a.TgZ(7,"dxi-item",5),a._UZ(8,"dxi-item",6),a.TgZ(9,"dxi-item",7),a._UZ(10,"dxi-validation-rule",8),a._UZ(11,"dxi-validation-rule",9),a.qZA(),a.TgZ(12,"dxi-item",10),a._UZ(13,"dxi-validation-rule",11),a.qZA(),a.TgZ(14,"dxi-item",12),a._UZ(15,"dxi-item",13),a._UZ(16,"dxi-item",13),a.qZA(),a.qZA(),a.qZA(),a._UZ(17,"dxi-item",4),a.qZA(),a.qZA(),a.YNc(18,v,32,40,"ng-container",14),a.YNc(19,U,28,41,"ng-container",14),a.qZA()),2&e&&(a.xp6(1),a.Q6J("classList",a.DdM(17,g)),a.xp6(4),a.Q6J("formData",t.user)("showValidationSummary",!0),a.xp6(3),a.Q6J("label",a.DdM(18,B))("editorOptions",a.DdM(19,Q)),a.xp6(1),a.Q6J("label",a.DdM(20,P))("editorOptions",a.DdM(21,L)),a.xp6(2),a.Q6J("min",1)("max",8),a.xp6(1),a.Q6J("label",a.DdM(22,C))("editorOptions",a.WLB(24,I,a.DdM(23,N),t.currentRole)),a.xp6(2),a.Q6J("colCount",2)("cssClass","buttonGroup"),a.xp6(1),a.Q6J("buttonOptions",t.submitButtonOptions),a.xp6(1),a.Q6J("buttonOptions",t.resetButtonOptions),a.xp6(2),a.Q6J("ngIf","Customer"===t.currentRole),a.xp6(1),a.Q6J("ngIf","Doctor"===t.currentRole))},directives:[o.Y,c.ZT3,c.vrV,n.O5,m.p6],styles:['body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{margin:0;min-height:100%;height:100%}*[_ngcontent-%COMP%]{box-sizing:border-box}@font-face{font-family:Hero;src:url(SVN-Birth-Of-A-Hero.291c0b7b016c2bfb71fa.ttf);font-weight:700}.content[_ngcontent-%COMP%]{line-height:1.5}.content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:30px;margin-top:20px;margin-bottom:20px}.content-block[_ngcontent-%COMP%]{margin-left:40px;margin-right:40px;margin-top:20px}.screen-x-small[_ngcontent-%COMP%]   .content-block[_ngcontent-%COMP%]{margin-left:20px;margin-right:20px}.responsive-paddings[_ngcontent-%COMP%]{padding:20px}.screen-large[_ngcontent-%COMP%]   .responsive-paddings[_ngcontent-%COMP%]{padding:40px}.dx-card.wide-card[_ngcontent-%COMP%]{border-radius:0;margin-left:0;margin-right:0;border-right:0;border-left:0}.with-footer[_ngcontent-%COMP%] > .dx-scrollable-wrapper[_ngcontent-%COMP%] > .dx-scrollable-container[_ngcontent-%COMP%] > .dx-scrollable-content[_ngcontent-%COMP%]{height:100%}.with-footer[_ngcontent-%COMP%] > .dx-scrollable-wrapper[_ngcontent-%COMP%] > .dx-scrollable-container[_ngcontent-%COMP%] > .dx-scrollable-content[_ngcontent-%COMP%] > .dx-scrollview-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100%}  #form-container{margin:10px}  .buttonGroup{margin-top:20px}  .signupForm{background-color:initial;box-shadow:0 10px 20px #00000030,0 6px 6px #0000003b;padding-left:15px;width:70%;padding-right:15px}  .long-title h3{font-family:Segoe UI Light,Helvetica Neue Light,Segoe UI,Helvetica Neue,Trebuchet MS,Verdana;font-weight:200;font-size:28px;text-align:center;margin-bottom:20px}.container[_ngcontent-%COMP%]{justify-content:flex-start}.container[_ngcontent-%COMP%], .image-container[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column}.image-container[_ngcontent-%COMP%]{justify-content:center}@media screen and (min-width:375px){.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:250px;height:250px;width:250px;box-shadow:0 25px 50px -12px #4fcdff40;margin-bottom:10px}}@media screen and (max-width:374px){.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:200px;height:200px;width:200px;box-shadow:0 25px 50px -12px #4fcdff40;margin-bottom:10px}}.img-input[_ngcontent-%COMP%]{color:#0000;width:65px}.img-input[_ngcontent-%COMP%]::-webkit-file-upload-button{visibility:hidden}.img-input[_ngcontent-%COMP%]:before{content:"Upload";display:inline-block;border:1px solid #999;border-radius:3px;padding:5px 8px;outline:none;white-space:nowrap;-webkit-user-select:none;user-select:none;cursor:pointer;text-shadow:1px 1px #fff;font-weight:700;font-size:15px}.img-input[_ngcontent-%COMP%]:hover:before{border-color:#fcffff}.img-input[_ngcontent-%COMP%]:active:before{background:-webkit-linear-gradient(top,#e3e3e3,#f9f9f9)}']}),e})()}];let R=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[r.Bz.forChild(F)],r.Bz]}),e})(),k=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[n.ez,o.A,R]]}),e})()}}]);