(self.webpackChunkta_sys_online=self.webpackChunkta_sys_online||[]).push([[175],{80175:(t,e,i)=>{"use strict";i.r(e),i.d(e,{RoomMonitorModule:()=>f});var o=i(61116),n=i(15419),r=i(37211),a=i(49783),s=i(6379),c=i(60310),l=i(69333),h=i(52177),u=i(83584),d=i(11018);function p(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"div",16),a.TgZ(1,"div",17),a._uU(2),a.qZA(),a.TgZ(3,"div",18),a.TgZ(4,"div",19),a._uU(5),a.qZA(),a.TgZ(6,"div",19),a._uU(7),a.qZA(),a.qZA(),a.TgZ(8,"div",20),a._UZ(9,"img",21),a.qZA(),a.TgZ(10,"div"),a.TgZ(11,"dx-button",22),a.NdJ("click",function(){const e=a.CHM(t).$implicit;return a.oxw(2).selectRoom(e)}),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=e.$implicit;a.xp6(2),a.Oqu(null==t?null:t.number),a.xp6(3),a.hij("Total Slot: ",null==t?null:t.totalSlot,""),a.xp6(2),a.hij(" Total Customer: ",null==t?null:t.customerID.length," ")}}function g(t,e){if(1&t&&(a.ynx(0),a.TgZ(1,"div",14),a.YNc(2,p,12,3,"div",15),a.qZA(),a.BQk()),2&t){const t=a.oxw();a.xp6(2),a.Q6J("ngForOf",t.roomList)}}const m=function(){return{paddingLeft:"25px",marginBottom:"5px"}},x=[{path:"",component:(()=>{class t{constructor(t,e,i){this.roomStore=t,this.store=e,this.router=i,this.vacancyStatus=[{_id:"-1",name:"(NONE)"},{_id:"0",name:"AVAILABLE"},{_id:"1",name:"FULL"}],this.pageSize=10,this.pullDown=!1,this.searchBoxOptions={valueChangeEvent:"keyup",showClearButton:!0,onKeyUp:this.onSearchKeyupHandler.bind(this),onValueChanged:this.onSearchValueChanged.bind(this),mode:"search",placeholder:"Search with name"},this.refreshButtonOptions={type:"normal",icon:"refresh",hint:"Fetch data from server",onClick:this.onRefresh.bind(this)},this.filterSelectBoxOptions={items:this.vacancyStatus,valueExpr:"name",displayExpr:"name",placeholder:"Filter with availability",onValueChanged:this.onFilterChange.bind(this)},this.sortSelectBoxOptions={items:[{_id:"-1",name:"(NONE)"},{_id:"0",name:"ASC"},{_id:"1",name:"DESC"}],valueExpr:"name",placeholder:"Sort by total slot",displayExpr:"name",onValueChanged:this.onSortValueChanged.bind(this)},this.updateContent=(t,e)=>{const i=this.checkEditorMode(),o=this.currentIndexFromServer;this.updateContentTimer&&clearTimeout(this.updateContentTimer),this.updateContentTimer=setTimeout(()=>{if(this.roomList.length)switch(i){case"NORMAL":this.paginatePureData(o+1);break;case"FILTER":this.paginateFilterData(o+1);break;case"SEARCH":this.paginateSearchData(o+1);break;case"SORT":this.paginateSortData(o+1)}t.component.release()},500)},this.updateTopContent=t=>{this.updateContent(t,"PullDown")},this.updateBottomContent=t=>{this.updateContent(t,"ReachBottom")}}onSearchKeyupHandler(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.isSearchingByName=!0,this.isFilteringByCategory=!1,this.isSortingByPrice=!1,console.log(this.currentSearchByNameValue),""!==this.currentSearchByNameValue?this.roomStore.initInfiniteSearchByNameData(this.currentSearchByNameValue,0,this.pageSize):(this.store.showNotif("SEARCH MODE OFF","custom"),this.onRefresh())},1250)}onSearchValueChanged(t){this.currentSearchByNameValue=t.value}onSortValueChanged(t){this.isSortingByPrice=!0,this.isSearchingByName=!1,this.isFilteringByCategory=!1,this.currentSortByPriceValue=t.value,"(NONE)"!==t.value?this.roomStore.initInfiniteSortByPriceData(t.value,0,this.pageSize):(this.store.showNotif("SORT MODE OFF","custom"),this.onRefresh())}onFilterChange(t){this.isFilteringByCategory=!0,this.isSearchingByName=!1,this.isSortingByPrice=!1,this.currentCategoryFilterValue=t.value,console.log(t.value),"(NONE)"!==t.value?this.roomStore.initInfiniteFilterByCategoryData(t.value,0,this.pageSize):(this.store.showNotif("FILTER MODE OFF","custom"),this.onRefresh())}checkEditorMode(){return!0===this.isFilteringByCategory?"FILTER":!0===this.isSearchingByName?"SEARCH":!0===this.isSortingByPrice?"SORT":"NORMAL"}paginatePureData(t){this.roomStore.loadInfiniteDataAsync(t,this.pageSize)}paginateFilterData(t){this.roomStore.filterInfiniteRoomByCategory(this.currentCategoryFilterValue,t,this.pageSize)}paginateSearchData(t){this.roomStore.searchInfiniteRoomByName(this.currentSearchByNameValue,t,this.pageSize)}paginateSortData(t){this.roomStore.sortInfiniteRoomByPrice(this.currentSortByPriceValue,t,this.pageSize)}onRefresh(){this.isFilteringByCategory=!1,this.isSearchingByName=!1,this.isSortingByPrice=!1,this.roomStore.initInfiniteData(0,this.pageSize)}navigateToMedicalCheckup(){this.router.navigate(["/edit_medical_checkup_list"])}selectRoom(t){this.router.navigate(["room",t._id])}sourceDataListener(){return this.roomStore.$roomList.subscribe(t=>{this.roomList=t})}currentPageListener(){return this.roomStore.$currentPage.subscribe(t=>{this.currentIndexFromServer=t})}scrollTop(){this.scrollView.instance.scrollTo({top:0,left:0})}ngOnInit(){this.currentPageListener(),this.roomStore.initInfiniteData(0,this.pageSize).then(()=>{this.sourceDataListener()})}ngOnDestroy(){this.sourceDataListener().unsubscribe(),this.currentPageListener().unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(s.p),a.Y36(c.d),a.Y36(n.F0))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-room-monitor"]],viewQuery:function(t,e){if(1&t&&a.Gf(r.N,5),2&t){let t;a.iGM(t=a.CRH())&&(e.scrollView=t.first)}},decls:15,vars:25,consts:[[3,"ngStyle"],[3,"location","text"],["widget","dxTextBox","location","before",3,"options"],["widget","dxButton","location","after",3,"options","locateInMenu"],[3,"locateInMenu","location"],["icon","filter","type","normal",3,"disabled"],["widget","dxSelectBox","location","after",3,"locateInMenu","options"],["icon","money","type","normal",3,"disabled"],["widget","dxSelectBox","location","after",3,"options","locateInMenu"],["location","after","locateInMenu","auto"],["icon","arrowright","type","outline","text","Medical Checkup","hint","Navigate to Medical Checkup",3,"onClick"],[3,"direction","showScrollbar","scrollByContent","scrollByThumb","height","bounceEnabled","onPullDown","onReachBottom"],[4,"ngIf"],["icon","arrowup","label","",3,"index","onClick"],[1,"card-container"],["class","card",4,"ngFor","ngForOf"],[1,"card"],[1,"card-title"],[1,"card-body"],[1,"card-text"],[1,"card-img"],["src","../../../../assets/imgs/hospital_room.jpg","alt","room...",2,"height","100%","width","100%"],["icon","arrowright","type","outline","text","Detail","hint","Click to see room detail",3,"click"]],template:function(t,e){1&t&&(a.TgZ(0,"dx-toolbar",0),a._UZ(1,"dxi-item",1),a._UZ(2,"dxi-item",2),a._UZ(3,"dxi-item",3),a.TgZ(4,"dxi-item",4),a._UZ(5,"dx-button",5),a.qZA(),a._UZ(6,"dxi-item",6),a.TgZ(7,"dxi-item",4),a._UZ(8,"dx-button",7),a.qZA(),a._UZ(9,"dxi-item",8),a.TgZ(10,"dxi-item",9),a.TgZ(11,"dx-button",10),a.NdJ("onClick",function(){return e.navigateToMedicalCheckup()}),a.qZA(),a.qZA(),a.qZA(),a.TgZ(12,"dx-scroll-view",11),a.NdJ("onPullDown",function(t){return e.updateTopContent(t)})("onReachBottom",function(t){return e.updateBottomContent(t)}),a.YNc(13,g,3,1,"ng-container",12),a.qZA(),a.TgZ(14,"dx-speed-dial-action",13),a.NdJ("onClick",function(){return e.scrollTop()}),a.qZA()),2&t&&(a.Q6J("ngStyle",a.DdM(24,m)),a.xp6(1),a.Q6J("location","before")("text","Room List"),a.xp6(1),a.Q6J("options",e.searchBoxOptions),a.xp6(1),a.Q6J("options",e.refreshButtonOptions)("locateInMenu","auto"),a.xp6(1),a.Q6J("locateInMenu","auto")("location","after"),a.xp6(1),a.Q6J("disabled",!0),a.xp6(1),a.Q6J("locateInMenu","auto")("options",e.filterSelectBoxOptions),a.xp6(1),a.Q6J("locateInMenu","auto")("location","after"),a.xp6(1),a.Q6J("disabled",!0),a.xp6(1),a.Q6J("options",e.sortSelectBoxOptions)("locateInMenu","auto"),a.xp6(3),a.Q6J("direction","vertical")("showScrollbar",!0)("scrollByContent",!0)("scrollByThumb",!0)("height","69vh")("bounceEnabled",!1),a.xp6(1),a.Q6J("ngIf",e.roomList),a.xp6(1),a.Q6J("index",1))},directives:[l.G,o.PC,h.ZT3,u.K,r.N,o.O5,d.D,o.sg],styles:[".card-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center;align-items:flex-start}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{height:200px;margin:10px;background-color:rgba(0,10,12,.486);border-radius:10px;box-shadow:0 54px 55px #00000040,0 -12px 30px #0000001f,0 4px 6px #0000001f,0 12px 13px #0000002b,0 -3px 5px #00000017;width:200px;display:flex;flex-direction:column;justify-content:center;align-items:center}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:large;font-weight:700;font-style:oblique}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-img[_ngcontent-%COMP%]{height:100px;width:190px}"]}),t})()}];let S=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[n.Bz.forChild(x)],n.Bz]}),t})(),f=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[o.ez,S,l.k,u.e,r.r,d.B]]}),t})()}}]);