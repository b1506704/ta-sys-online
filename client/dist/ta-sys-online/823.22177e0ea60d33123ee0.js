(self.webpackChunkta_sys_online=self.webpackChunkta_sys_online||[]).push([[823],{43823:(e,t,i)=>{"use strict";i.r(t),i.d(t,{CourseListModule:()=>Q});var r=i(61116),o=i(46553),n=i(37211),s=i(8619),a=i(11395),c=i(1100),l=i(86150),u=i(70513),h=i(11018),p=i(35614),d=i(3578),g=i(86101),x=i(69333),m=i(52177),b=i(83584),f=i(83914),y=i(67935),S=i(656);function Z(e,t){if(1&e&&(s.TgZ(0,"div"),s.TgZ(1,"div",20),s._uU(2),s.qZA(),s.qZA()),2&e){const e=s.oxw();s.xp6(2),s.hij(" ",null==e.courseData?null:e.courseData.name," ")}}function C(e,t){if(1&e&&(s.TgZ(0,"div"),s.TgZ(1,"div",20),s._uU(2),s.qZA(),s.qZA()),2&e){const e=s.oxw();s.xp6(2),s.hij(" ",null==e.courseData?null:e.courseData.instructorId," ")}}function D(e,t){if(1&e&&(s.TgZ(0,"div"),s.TgZ(1,"div",20),s._uU(2),s.qZA(),s.qZA()),2&e){const e=s.oxw();s.xp6(2),s.hij(" ",null==e.courseData?null:e.courseData.duration," week(s) ")}}function v(e,t){if(1&e&&(s.TgZ(0,"div"),s.TgZ(1,"div",20),s._uU(2),s.ALo(3,"formatCurrency"),s.qZA(),s.qZA()),2&e){const e=s.oxw();s.xp6(2),s.hij(" ",s.xi3(3,1,null==e.courseData?null:e.courseData.cost,e.currency)," ")}}function P(e,t){if(1&e&&(s.TgZ(0,"div"),s.TgZ(1,"div",20),s._uU(2),s.qZA(),s.qZA()),2&e){const e=s.oxw();s.xp6(2),s.hij(" ",null==e.courseData?null:e.courseData.description," ")}}const T=function(){return["course-form"]},w=function(){return{text:"Available Slot"}},B=function(){return{text:"Max Slot"}},L=function(){return{text:"Rating"}},I=function(){return{text:"Feedback"}},O=function(){return{text:"Rating Count"}};let A=(()=>{class e{constructor(e,t){this.courseStore=e,this.imageService=t,this.fieldList=[],this.currency="$",this.imageData={sourceID:"",container:"",category:"",title:"",fileName:"",fileSize:0,fileType:"",url:"../../../../assets/imgs/profile.png"}}courseDataListener(){return this.courseStore.$courseInstance.subscribe(e=>{this.courseData=e,this.imageService.getImageBySourceID(e._id).subscribe(e=>{null!==e&&(this.imageData=e)})})}renderSourceData(){this.courseData=null,this.imageData={sourceID:"",container:"",category:"",title:"",fileName:"",fileSize:0,fileType:"",url:"../../../../assets/imgs/profile.png"},setTimeout(()=>{this.courseStore.getCourse(this.courseID).then(()=>{this.courseDataListener()})},100)}ngOnInit(){}ngOnChanges(){this.renderSourceData()}ngOnDestroy(){this.courseDataListener().unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(a.P),s.Y36(f.Q))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-course-detail"]],inputs:{courseID:"courseID"},features:[s.TTD],decls:26,vars:18,consts:[[3,"bounceEnabled","scrollByContent","scrollByThumb"],[1,"img-container"],["alt","...",3,"src"],["id","course-form-container",3,"classList"],["id","course-form",3,"formData","readOnly"],["itemType","group","caption","Course Summary"],["name","courseName"],["text","Course Name"],[4,"dxTemplate"],["name","instructorName"],["text","Instructor"],["name","duration"],["text","Duration"],["dataField","availableSlot",3,"label"],["dataField","maxSlot",3,"label"],["dataField","rating",3,"label"],["dataField","feedback",3,"label"],["dataField","ratingCount",3,"label"],["name","description"],["text","Description"],[1,"responsive-field"]],template:function(e,t){1&e&&(s.TgZ(0,"dx-scroll-view",0),s.TgZ(1,"div",1),s._UZ(2,"img",2),s.qZA(),s.TgZ(3,"form",3),s.TgZ(4,"dx-form",4),s.TgZ(5,"dxi-item",5),s.TgZ(6,"dxi-item",6),s._UZ(7,"dxo-label",7),s.YNc(8,Z,3,1,"div",8),s.qZA(),s.TgZ(9,"dxi-item",9),s._UZ(10,"dxo-label",10),s.YNc(11,C,3,1,"div",8),s.qZA(),s.TgZ(12,"dxi-item",11),s._UZ(13,"dxo-label",12),s.YNc(14,D,3,1,"div",8),s.qZA(),s.TgZ(15,"dxi-item",11),s._UZ(16,"dxo-label",12),s.YNc(17,v,4,4,"div",8),s.qZA(),s._UZ(18,"dxi-item",13),s._UZ(19,"dxi-item",14),s._UZ(20,"dxi-item",15),s._UZ(21,"dxi-item",16),s._UZ(22,"dxi-item",17),s.TgZ(23,"dxi-item",18),s._UZ(24,"dxo-label",19),s.YNc(25,P,3,1,"div",8),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e&&(s.Q6J("bounceEnabled",!0)("scrollByContent",!0)("scrollByThumb",!0),s.xp6(2),s.Q6J("src",null==t.imageData?null:t.imageData.url,s.LSH),s.xp6(1),s.Q6J("classList",s.DdM(12,T)),s.xp6(1),s.Q6J("formData",t.courseData)("readOnly",!0),s.xp6(14),s.Q6J("label",s.DdM(13,w)),s.xp6(1),s.Q6J("label",s.DdM(14,B)),s.xp6(1),s.Q6J("label",s.DdM(15,L)),s.xp6(1),s.Q6J("label",s.DdM(16,I)),s.xp6(1),s.Q6J("label",s.DdM(17,O)))},directives:[n.N,y.Y,m.ZT3,m.sBj,g.p6],pipes:[S.m],styles:[".img-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:15px}.responsive-field[_ngcontent-%COMP%]{width:100%;border-bottom:2px dotted #fff;font-size:large;word-wrap:break-word;overflow-wrap:break-word}@media screen and (max-width:450px){.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100px;width:100px;border-radius:100px;box-shadow:0 25px 50px -12px #4fcdff40}}@media screen and (min-width:451px){.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:150px;width:150px;border-radius:150px;box-shadow:0 25px 50px -12px #4fcdff40}}"]}),e})();const _=function(){return{paddingLeft:"25px",marginBottom:"5px"}};function N(e,t){if(1&e){const e=s.EpF();s.ynx(0),s.TgZ(1,"dx-toolbar",5),s._UZ(2,"dxi-item",6),s._UZ(3,"dxi-item",7),s._UZ(4,"dxi-item",8),s.TgZ(5,"dxi-item",9),s._UZ(6,"dx-button",10),s.qZA(),s.TgZ(7,"dxi-item",11),s.TgZ(8,"dx-select-box",12),s.NdJ("onValueChanged",function(t){return s.CHM(e),s.oxw().onFilterChange(t)}),s.qZA(),s.qZA(),s.TgZ(9,"dxi-item",9),s._UZ(10,"dx-button",13),s.qZA(),s._UZ(11,"dxi-item",14),s.TgZ(12,"dxi-item",15),s.TgZ(13,"dx-button",16),s.NdJ("onClick",function(){return s.CHM(e),s.oxw().navigateToSubject()}),s.qZA(),s.qZA(),s.qZA(),s.BQk()}if(2&e){const e=s.oxw();s.xp6(1),s.Q6J("ngStyle",s.DdM(22,_)),s.xp6(1),s.Q6J("location","before")("text","Course List"),s.xp6(1),s.Q6J("options",e.searchBoxOptions),s.xp6(1),s.Q6J("options",e.refreshButtonOptions)("locateInMenu","auto"),s.xp6(1),s.Q6J("locateInMenu","auto")("location","after"),s.xp6(1),s.Q6J("disabled",!0),s.xp6(1),s.Q6J("locateInMenu","auto"),s.xp6(1),s.Q6J("displayExpr","name")("placeholder","Select a subject")("valueExpr","id")("searchEnabled",!0)("searchExpr","name")("dataSource",e.subjectList)("value",e.subjectList[0]),s.xp6(1),s.Q6J("locateInMenu","auto")("location","after"),s.xp6(1),s.Q6J("disabled",!0),s.xp6(1),s.Q6J("options",e.sortSelectBoxOptions)("locateInMenu","auto")}}function E(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",19),s.TgZ(1,"div",20),s._uU(2),s.qZA(),s.TgZ(3,"div",21),s.TgZ(4,"div",22),s._uU(5),s.ALo(6,"formatCurrency"),s.qZA(),s.qZA(),s.TgZ(7,"div",23),s._UZ(8,"img",24),s.qZA(),s.TgZ(9,"div"),s.TgZ(10,"dx-button",25),s.NdJ("onClick",function(){const t=s.CHM(e).$implicit;return s.oxw(2).selectCourse(null==t?null:t.id)}),s.qZA(),s.qZA(),s.qZA()}if(2&e){const e=t.$implicit,i=s.oxw(2);s.xp6(2),s.Oqu(null==e?null:e.name),s.xp6(3),s.hij(" Price: ",s.xi3(6,3,null==e?null:e.cost,i.currency)," "),s.xp6(3),s.Q6J("src",i.mapImageListToUrl(null==e?null:e._id),s.LSH)}}function M(e,t){if(1&e&&(s.ynx(0),s.TgZ(1,"div",17),s.YNc(2,E,11,6,"div",18),s.qZA(),s.BQk()),2&e){const e=s.oxw();s.xp6(2),s.Q6J("ngForOf",e.courseList)}}function j(e,t){if(1&e&&(s.ynx(0),s._UZ(1,"app-course-detail",26),s.BQk()),2&e){const e=s.oxw(2);s.xp6(1),s.Q6J("courseID",e.currentCourseID)}}function F(e,t){if(1&e&&(s.TgZ(0,"div"),s.YNc(1,j,2,1,"ng-container",0),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.currentCourseID)}}const U=[{path:"",component:(()=>{class e{constructor(e,t,i,r,o){this.courseStore=e,this.subjectHTTP=t,this.store=i,this.router=r,this.imageStore=o,this.subjectList=[],this.pageSize=10,this.pullDown=!1,this.isDetailPopupVisible=!1,this.currentSortProperty="cost",this.currentSearchProperty="name",this.currentFilterProperty="subjectId",this.currency="$",this.searchBoxOptions={valueChangeEvent:"keyup",showClearButton:!0,onKeyUp:this.onSearchKeyupHandler.bind(this),onValueChanged:this.onSearchValueChanged.bind(this),mode:"search",placeholder:"Search with name"},this.refreshButtonOptions={type:"normal",icon:"refresh",hint:"Fetch data from server",onClick:this.onRefresh.bind(this)},this.filterSelectBoxOptions={items:this.subjectList,valueExpr:"id",searchExpr:"name",displayExpr:"name",placeholder:"Filter with subject",searchEnabled:!0,onValueChanged:this.onFilterChange.bind(this)},this.sortSelectBoxOptions={items:[{_id:"-1",name:"(NONE)"},{_id:"0",name:"asc"},{_id:"1",name:"desc"}],valueExpr:"name",placeholder:"Sort by price",displayExpr:"name",onValueChanged:this.onSortValueChanged.bind(this)},this.imageData={sourceID:"",container:"",category:"",title:"",fileName:"",fileSize:0,fileType:"",url:"../../../../assets/imgs/profile.png"},this.imageList=[],this.updateContent=(e,t)=>{const i=this.checkEditorMode(),r=this.currentIndexFromServer;this.updateContentTimer&&clearTimeout(this.updateContentTimer),this.updateContentTimer=setTimeout(()=>{if(this.courseList.length)switch(i){case"NORMAL":this.paginatePureData(r+1);break;case"FILTER":this.paginateFilterData(r+1);break;case"SEARCH":this.paginateSearchData(r+1);break;case"SORT":this.paginateSortData(r+1)}e.component.release()},500)},this.updateTopContent=e=>{this.updateContent(e,"PullDown")},this.updateBottomContent=e=>{this.updateContent(e,"ReachBottom")}}selectCourse(e){this.currentCourseID=e,console.log("SELECTED ID"),console.log(e),this.isDetailPopupVisible=!0}onSearchKeyupHandler(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.isSearchingByName=!0,this.isFilteringByCategory=!1,this.isSortingByPrice=!1,console.log(this.currentSearchByPropertyValue),""!==this.currentSearchByPropertyValue?this.courseStore.initInfiniteSearchByPropertyData(this.currentSearchProperty,this.currentSearchByPropertyValue,1,this.pageSize):(this.store.showNotif("SEARCH MODE OFF","custom"),this.onRefresh())},1250)}onSearchValueChanged(e){this.currentSearchByPropertyValue=e.value}onSortValueChanged(e){this.isSortingByPrice=!0,this.isSearchingByName=!1,this.isFilteringByCategory=!1,this.currentSortByPropertyValue=e.value,"(NONE)"!==e.value?this.courseStore.initInfiniteSortByPropertyData(this.currentSortProperty,e.value,1,this.pageSize):(this.store.showNotif("SORT MODE OFF","custom"),this.onRefresh())}onFilterChange(e){this.isFilteringByCategory=!0,this.isSearchingByName=!1,this.isSortingByPrice=!1,this.currentCategoryFilterValue=e.value,console.log(e.value),"(NONE)"!==e.value?this.courseStore.initInfiniteFilterByPropertyData(this.currentFilterProperty,e.value,1,this.pageSize):(this.store.showNotif("FILTER MODE OFF","custom"),this.onRefresh())}checkEditorMode(){return!0===this.isFilteringByCategory?"FILTER":!0===this.isSearchingByName?"SEARCH":!0===this.isSortingByPrice?"SORT":"NORMAL"}paginatePureData(e){this.courseStore.loadInfiniteDataAsync(e,this.pageSize)}paginateFilterData(e){this.courseStore.filterInfiniteCourseByProperty(this.currentFilterProperty,this.currentCategoryFilterValue,e,this.pageSize)}paginateSearchData(e){this.courseStore.searchInfiniteCourseByProperty(this.currentSearchProperty,this.currentSearchByPropertyValue,e,this.pageSize)}paginateSortData(e){this.courseStore.sortInfiniteCourseByProperty(this.currentSortProperty,this.currentSortByPropertyValue,e,this.pageSize)}onRefresh(){this.isFilteringByCategory=!1,this.isSearchingByName=!1,this.isSortingByPrice=!1,this.courseStore.initInfiniteData(1,this.pageSize)}navigateToSubject(){this.router.navigate(["/subject_list"])}sourceDataListener(){return this.courseStore.$courseList.subscribe(e=>{this.courseList=e})}mapImageListToUrl(e){var t;return 0!==this.imageList.length&&(null===(t=this.imageList.find(t=>t.sourceID===e))||void 0===t?void 0:t.url)||this.imageData.url}imageDataListener(){return this.imageStore.$imageList.subscribe(e=>{0!==e.length&&(this.imageList=e,console.log("IMAGE LIST OF DOCTOR"),console.log(this.imageList))})}currentPageListener(){return this.courseStore.$currentPage.subscribe(e=>{this.currentIndexFromServer=e})}scrollTop(){this.scrollView.instance.scrollTo({top:0,left:0})}initData(){this.courseStore.initInfiniteData(1,this.pageSize).then(()=>{this.sourceDataListener(),this.imageDataListener()})}filterDataListener(){return this.subjectHTTP.fetchAll().subscribe(e=>{this.subjectList=e,console.log(this.subjectList)})}ngOnInit(){this.filterDataListener(),this.initData(),this.currentPageListener()}ngOnDestroy(){this.sourceDataListener().unsubscribe(),this.currentPageListener().unsubscribe(),this.imageDataListener().unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(a.P),s.Y36(c.L),s.Y36(l.d),s.Y36(o.F0),s.Y36(u.Y))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-course-list"]],viewQuery:function(e,t){if(1&e&&s.Gf(n.N,5),2&e){let e;s.iGM(e=s.CRH())&&(t.scrollView=e.first)}},decls:6,vars:19,consts:[[4,"ngIf"],[3,"direction","showScrollbar","scrollByContent","scrollByThumb","height","bounceEnabled","onPullDown","onReachBottom"],["icon","arrowup","label","",3,"index","onClick"],[3,"visible","height","width","showTitle","shading","title","dragEnabled","closeOnOutsideClick","showCloseButton","visibleChange"],[4,"dxTemplate","dxTemplateOf"],[3,"ngStyle"],[3,"location","text"],["widget","dxTextBox","location","before",3,"options"],["widget","dxButton","location","after",3,"options","locateInMenu"],[3,"locateInMenu","location"],["icon","filter","type","normal",3,"disabled"],["location","after",3,"locateInMenu"],[3,"displayExpr","placeholder","valueExpr","searchEnabled","searchExpr","dataSource","value","onValueChanged"],["icon","group","type","normal",3,"disabled"],["widget","dxSelectBox","location","after",3,"options","locateInMenu"],["location","after","locateInMenu","auto"],["icon","arrowright","type","outline","text","To Subject","hint","Navigate to subject list ",3,"onClick"],[1,"card-container"],["class","card",4,"ngFor","ngForOf"],[1,"card"],[1,"card-title"],[1,"card-body"],[1,"card-text"],[1,"card-img"],["alt","...",2,"height","100%","width","100%",3,"src"],["icon","arrowright","type","outline","text","Detail","hint","Click to see course detail",3,"onClick"],[3,"courseID"]],template:function(e,t){1&e&&(s.YNc(0,N,14,23,"ng-container",0),s.TgZ(1,"dx-scroll-view",1),s.NdJ("onPullDown",function(e){return t.updateTopContent(e)})("onReachBottom",function(e){return t.updateBottomContent(e)}),s.YNc(2,M,3,1,"ng-container",0),s.qZA(),s.TgZ(3,"dx-speed-dial-action",2),s.NdJ("onClick",function(){return t.scrollTop()}),s.qZA(),s.TgZ(4,"dx-popup",3),s.NdJ("visibleChange",function(e){return t.isDetailPopupVisible=e}),s.YNc(5,F,2,1,"div",4),s.qZA()),2&e&&(s.Q6J("ngIf",t.subjectList.length),s.xp6(1),s.Q6J("direction","vertical")("showScrollbar",!0)("scrollByContent",!0)("scrollByThumb",!0)("height","69vh")("bounceEnabled",!1),s.xp6(1),s.Q6J("ngIf",t.courseList),s.xp6(1),s.Q6J("index",1),s.xp6(1),s.Q6J("visible",t.isDetailPopupVisible)("height","80%")("width","80%")("showTitle",!0)("shading",!0)("title","Course Detail")("dragEnabled",!0)("closeOnOutsideClick",!1)("showCloseButton",!0),s.xp6(1),s.Q6J("dxTemplateOf","content"))},directives:[r.O5,n.N,h.D,p.x,g.p6,x.G,r.PC,m.ZT3,b.K,d._,r.sg,A],pipes:[S.m],styles:[".card-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center;align-items:flex-start}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{height:250px;margin:10px;background-color:rgba(0,10,12,.486);border-radius:10px;box-shadow:0 54px 55px #00000040,0 -12px 30px #0000001f,0 4px 6px #0000001f,0 12px 13px #0000002b,0 -3px 5px #00000017;width:250px;display:flex;flex-direction:column;justify-content:center;align-items:center}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:large;font-weight:700;font-style:oblique}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-img[_ngcontent-%COMP%]{height:150px;width:150px;margin-bottom:10px}"]}),e})()}];let q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[o.Bz.forChild(U)],o.Bz]}),e})();var J=i(89711);let Q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[r.ez,q,n.r,x.k,b.e,h.B,p.C,y.A,d.D,J.d]]}),e})()},1100:(e,t,i)=>{"use strict";i.d(t,{L:()=>n});var r=i(42693),o=i(8619);let n=(()=>{class e{constructor(e){this.http=e,this.apiUrl="https://ta-sys-online-server.azurewebsites.net/api/Subject"}fetchSubject(e,t){const i=(new r.LE).set("PageNumber",e).set("PageSize",t);return console.log(i.toString()),this.http.get(this.apiUrl+"/paging",{params:i,reportProgress:!0,observe:"body"})}fetchSubjectByLearnerID(e,t,i){const o=(new r.LE).set("PageNumber",e).set("PageSize",t).set("Id",i);return console.log(o.toString()),this.http.get(this.apiUrl+"/byLearnerID",{params:o,reportProgress:!0,observe:"body"})}searchSubjectByProperty(e,t,i,o){const n=(new r.LE).set("Property",e).set("Value",t).set("PageNumber",i).set("PageSize",o);return console.log(n.toString()),this.http.get(this.apiUrl+"/search",{params:n,reportProgress:!0,observe:"body"})}filterSubjectByProperty(e,t,i,o){const n=(new r.LE).set("Property",e).set("Value",t).set("PageNumber",i).set("PageSize",o);return console.log(n.toString()),this.http.get(this.apiUrl,{params:n,reportProgress:!0,observe:"body"})}sortSubjectByProperty(e,t,i,o){const n=(new r.LE).set("SortBy",e).set("Order",t).set("PageNumber",i).set("PageSize",o);return console.log(n.toString()),this.http.get(this.apiUrl+"/paging",{params:n,reportProgress:!0,observe:"body"})}uploadSubject(e){return this.http.post(this.apiUrl,e,{reportProgress:!0,observe:"body"})}generateRandomSubject(){return this.http.post(this.apiUrl+"/randomSubject",{reportProgress:!0,observe:"body"})}deleteAllSubjects(){return this.http.post(this.apiUrl+"/deleteAll",{reportProgress:!0,observe:"body"})}deleteSubject(e){const t=(new r.LE).set("subjectId",e);return this.http.delete(this.apiUrl,{reportProgress:!0,params:t,observe:"body"})}getSubject(e){return this.http.get(this.apiUrl+`/${e}`,{reportProgress:!0,observe:"body"})}deleteSelectedSubjects(e){return this.http.post(this.apiUrl+"/batch",e,{reportProgress:!0,observe:"body"})}updateSubject(e){return this.http.put(this.apiUrl,e,{reportProgress:!0,observe:"body"})}fetchAll(){return this.http.get(this.apiUrl,{reportProgress:!0,observe:"body"})}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(r.eN))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);