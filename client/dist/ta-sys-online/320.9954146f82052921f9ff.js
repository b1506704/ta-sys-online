(self.webpackChunkta_sys_online=self.webpackChunkta_sys_online||[]).push([[320],{99320:(e,t,n)=>{"use strict";n.r(t),n.d(t,{UserProfileModule:()=>C});var i=n(61116),o=n(67935),r=n(29788),s=n(15419),a=n(8619),d=n(86150),u=n(25567),l=n(4670),c=n(70513),m=n(52177),p=n(86101);function g(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div"),a.TgZ(1,"div",43),a._UZ(2,"img",44),a.TgZ(3,"input",45),a.NdJ("change",function(t){return a.CHM(e),a.oxw().handleInputChange(t)}),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=a.oxw();a.xp6(2),a.Q6J("src",e.imageData.url,a.LSH)}}const x=function(){return["signupForm"]},f=function(){return{text:"Username"}},h=function(){return{disabled:!0}},b=function(){return{text:"Display Name"}},Z=function(){return{text:"Current Password"}},w=function(){return{mode:"password"}},D=function(){return{text:"New Password"}},y=function(){return{text:"Full Name"}},U=function(){return{text:"Birthdate"}},A=function(){return{text:"Address"}},O=function(){return{text:"Email"}},_=function(){return{text:"Phone Number"}},P=[{path:"",component:(()=>{class e{constructor(e,t,n,i){this.store=e,this.userAccountStore=t,this.userInfoStore=n,this.imageStore=i,this.submitUserAccountButtonOptions={text:"Submit",icon:"save",type:"normal",useSubmitBehavior:!0},this.resetUserAccountButtonOptions={text:"Reset",icon:"refresh",type:"normal",useSubmitBehavior:!1,onClick:()=>{this.form.instance.resetValues(),this.form.instance.getEditor("username").focus()}},this.submitUserPasswordButtonOptions={text:"Submit",icon:"save",type:"normal",useSubmitBehavior:!0},this.resetUserPasswordButtonOptions={text:"Reset",icon:"refresh",type:"normal",useSubmitBehavior:!1,onClick:()=>{this.userPasswordData={oldPassword:"",newPassword:""}}},this.submitUserInfoButtonOptions={text:"Submit",icon:"save",type:"normal",useSubmitBehavior:!0},this.resetUserInfoButtonOptions={text:"Reset",icon:"refresh",type:"normal",useSubmitBehavior:!1,onClick:()=>{this.getUserAccountData(this.currentUserId),this.getUserInfoData(this.currentUserId),this.imageData.url="../../../../assets/imgs/profile.png"}},this.userPasswordData={oldPassword:"",newPassword:""},this.genderList=[{id:"(NONE)",name:"(NONE)"},{id:"0",name:"Male"},{id:"1",name:"Female"}],this.imageData={container:"",sourceID:"",category:"",title:"",fileName:"",fileSize:0,fileType:"",url:"../../../../assets/imgs/profile.png"},this.onUserPasswordSubmit=e=>{e.preventDefault(),this.userAccountStore.changePassword(this.currentUserId,this.userPasswordData.oldPassword,this.userPasswordData.newPassword)},this.onUserAccountSubmit=e=>{e.preventDefault(),this.userAccountStore.updateUser(this.userAccountData,1,5)},this.onUserInfoSubmit=e=>{e.preventDefault(),this.userInfoStore.updateUserInfo(this.userInfoData,1,5)}}onFormShown(e){setTimeout(()=>{this.form.instance.getEditor("username").focus()},200)}handleInputChange(e){var t=e.dataTransfer?e.dataTransfer.files[0]:e.target.files[0];if(console.log(t),void 0!==t)if(t.size<=2e6){this.imageData.fileSize=t.size,this.imageData.fileType=t.type,this.imageData.fileName=t.name;var n=new FileReader;if(!t.type.match(/image-*/))return void this.store.showNotif("Invalid format!","custom");n.onload=this.handleReaderLoaded.bind(this),n.readAsDataURL(t)}else this.store.showNotif("Image cannot exceed 2MB","custom")}handleReaderLoaded(e){var t=e.target;console.log("READER"),console.log(t),this.imageData.url=t.result,console.log("SOURCE ID"),console.log(this.imageData.sourceID)}userAccountDataListener(){return this.userAccountStore.$userInstance.subscribe(e=>{null!==e&&(this.userAccountData=e)})}userInfoDataListener(){return this.userInfoStore.$userInfoInstance.subscribe(e=>{null!==e&&(this.userInfoData=e)})}imageDataListener(){return this.imageStore.$imageInstance.subscribe(e=>{null!==e&&(console.log("IMAGE DATA"),console.log(e),this.imageData=e)})}userIdListener(){return this.store.$currentUserId.subscribe(e=>{e&&(this.currentUserId=e,this.getUserAccountData(e),this.getUserInfoData(e))})}getUserAccountData(e){this.userAccountStore.getUser(e).then(()=>{this.userAccountDataListener()})}getUserInfoData(e){this.userInfoStore.getUserInfo(e).then(()=>{this.userInfoDataListener()})}onGenderChange(e){this.userInfoData.gender=e.value}ngOnInit(){this.userIdListener()}ngOnDestroy(){this.userAccountDataListener().unsubscribe(),this.userInfoDataListener().unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(d.d),a.Y36(u.U),a.Y36(l.$),a.Y36(c.Y))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-user-profile"]],viewQuery:function(e,t){if(1&e&&a.Gf(o.Y,5),2&e){let e;a.iGM(e=a.CRH())&&(t.form=e.first)}},decls:56,vars:60,consts:[[1,"container"],["id","user-account-form",3,"classList","submit"],[1,"long-title"],["validationGroup","userAccountData",3,"formData","showValidationSummary","onContentReady"],["itemType","group"],["itemType","group","caption","Account Information"],["dataField","username","editorType","dxTextBox",3,"label","editorOptions"],["dataField","displayName","editorType","dxTextBox",3,"label"],["type","required","message","Display name is required"],["type","stringLength","message","Display name cannot contain more than 12 letters!",3,"min","max"],["itemType","group",3,"colCount","cssClass"],["itemType","button","horizontalAlignment","center",3,"buttonOptions"],["id","password-form",3,"classList","submit"],["validationGroup","userPasswordData",3,"formData","showValidationSummary"],["itemType","group","caption","Password Modification"],["dataField","oldPassword","editorType","dxTextBox",3,"label","editorOptions"],["type","required","message","Current password is required"],["type","stringLength","message","Current password cannot contain more than 12 letters!",3,"min"],["dataField","newPassword","editorType","dxTextBox",3,"label","editorOptions"],["type","required","message","New password is required"],["type","stringLength","message","New password cannot contain more than 12 letters!",3,"min"],["id","user-info-form",3,"classList","submit"],["validationGroup","userInfoData",3,"formData","showValidationSummary"],["itemType","group","caption","Personal Information"],["name","avatar"],[4,"dxTemplate"],["dataField","fullName","editorType","dxTextBox",3,"label"],["type","required","message","Full name is required"],["type","stringLength","message","Full name cannot lower than 1 letter!",3,"min"],["name","gender"],["text","Gender"],[3,"displayExpr","valueExpr","dataSource","value","onValueChanged"],["dataField","dateOfBirth","editorType","dxDateBox",3,"label"],["type","required","message","Birthdate is required"],["dataField","address","editorType","dxTextBox",3,"label"],["type","required","message","Address is required"],["type","stringLength","message","Address cannot lower than 1 letter!",3,"min"],["dataField","email","editorType","dxTextBox",3,"label"],["type","required","message","Email is required"],["type","stringLength","message","Email cannot lower than 1 letter!",3,"min"],["dataField","phone","editorType","dxTextBox",3,"label"],["type","required","message","Phone number is required"],["type","stringLength","message","Phone number cannot lower than 1 letter!",3,"min"],[1,"image-container"],["alt","...",3,"src"],["type","file","id","img","accept","image/*",1,"img-input",3,"change"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0),a.TgZ(1,"form",1),a.NdJ("submit",function(e){return t.onUserAccountSubmit(e)}),a.TgZ(2,"div",2),a.TgZ(3,"h3"),a._uU(4,"Profile Detail"),a.qZA(),a.qZA(),a.TgZ(5,"dx-form",3),a.NdJ("onContentReady",function(e){return t.onFormShown(e)}),a.TgZ(6,"dxi-item",4),a.TgZ(7,"dxi-item",5),a._UZ(8,"dxi-item",6),a.TgZ(9,"dxi-item",7),a._UZ(10,"dxi-validation-rule",8),a._UZ(11,"dxi-validation-rule",9),a.qZA(),a.TgZ(12,"dxi-item",10),a._UZ(13,"dxi-item",11),a._UZ(14,"dxi-item",11),a.qZA(),a.qZA(),a.qZA(),a._UZ(15,"dxi-item",4),a.qZA(),a.qZA(),a.TgZ(16,"form",12),a.NdJ("submit",function(e){return t.onUserPasswordSubmit(e)}),a.TgZ(17,"dx-form",13),a.TgZ(18,"dxi-item",4),a.TgZ(19,"dxi-item",14),a.TgZ(20,"dxi-item",15),a._UZ(21,"dxi-validation-rule",16),a._UZ(22,"dxi-validation-rule",17),a.qZA(),a.TgZ(23,"dxi-item",18),a._UZ(24,"dxi-validation-rule",19),a._UZ(25,"dxi-validation-rule",20),a.qZA(),a.TgZ(26,"dxi-item",10),a._UZ(27,"dxi-item",11),a._UZ(28,"dxi-item",11),a.qZA(),a.qZA(),a.qZA(),a._UZ(29,"dxi-item",4),a.qZA(),a.qZA(),a.TgZ(30,"form",21),a.NdJ("submit",function(e){return t.onUserInfoSubmit(e)}),a.TgZ(31,"dx-form",22),a.TgZ(32,"dxi-item",4),a.TgZ(33,"dxi-item",23),a.TgZ(34,"dxi-item",24),a.YNc(35,g,4,1,"div",25),a.qZA(),a.TgZ(36,"dxi-item",26),a._UZ(37,"dxi-validation-rule",27),a._UZ(38,"dxi-validation-rule",28),a.qZA(),a.TgZ(39,"dxi-item",29),a._UZ(40,"dxo-label",30),a.TgZ(41,"dx-select-box",31),a.NdJ("onValueChanged",function(e){return t.onGenderChange(e)}),a.qZA(),a.qZA(),a.TgZ(42,"dxi-item",32),a._UZ(43,"dxi-validation-rule",33),a.qZA(),a.TgZ(44,"dxi-item",34),a._UZ(45,"dxi-validation-rule",35),a._UZ(46,"dxi-validation-rule",36),a.qZA(),a.TgZ(47,"dxi-item",37),a._UZ(48,"dxi-validation-rule",38),a._UZ(49,"dxi-validation-rule",39),a.qZA(),a.TgZ(50,"dxi-item",40),a._UZ(51,"dxi-validation-rule",41),a._UZ(52,"dxi-validation-rule",42),a.qZA(),a.TgZ(53,"dxi-item",10),a._UZ(54,"dxi-item",11),a._UZ(55,"dxi-item",11),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(1),a.Q6J("classList",a.DdM(45,x)),a.xp6(4),a.Q6J("formData",t.userAccountData)("showValidationSummary",!0),a.xp6(3),a.Q6J("label",a.DdM(46,f))("editorOptions",a.DdM(47,h)),a.xp6(1),a.Q6J("label",a.DdM(48,b)),a.xp6(2),a.Q6J("min",1)("max",25),a.xp6(1),a.Q6J("colCount",2)("cssClass","buttonGroup"),a.xp6(1),a.Q6J("buttonOptions",t.submitUserAccountButtonOptions),a.xp6(1),a.Q6J("buttonOptions",t.resetUserAccountButtonOptions),a.xp6(2),a.Q6J("classList",a.DdM(49,x)),a.xp6(1),a.Q6J("formData",t.userPasswordData)("showValidationSummary",!0),a.xp6(3),a.Q6J("label",a.DdM(50,Z))("editorOptions",a.DdM(51,w)),a.xp6(2),a.Q6J("min",1),a.xp6(1),a.Q6J("label",a.DdM(52,D))("editorOptions",a.DdM(53,w)),a.xp6(2),a.Q6J("min",1),a.xp6(1),a.Q6J("colCount",2)("cssClass","buttonGroup"),a.xp6(1),a.Q6J("buttonOptions",t.submitUserPasswordButtonOptions),a.xp6(1),a.Q6J("buttonOptions",t.resetUserPasswordButtonOptions),a.xp6(2),a.Q6J("classList",a.DdM(54,x)),a.xp6(1),a.Q6J("formData",t.userInfoData)("showValidationSummary",!0),a.xp6(5),a.Q6J("label",a.DdM(55,y)),a.xp6(2),a.Q6J("min",1),a.xp6(3),a.Q6J("displayExpr","name")("valueExpr","id")("dataSource",t.genderList)("value",null==t.userInfoData?null:t.userInfoData.gender),a.xp6(1),a.Q6J("label",a.DdM(56,U)),a.xp6(2),a.Q6J("label",a.DdM(57,A)),a.xp6(2),a.Q6J("min",1),a.xp6(1),a.Q6J("label",a.DdM(58,O)),a.xp6(2),a.Q6J("min",1),a.xp6(1),a.Q6J("label",a.DdM(59,_)),a.xp6(2),a.Q6J("min",1),a.xp6(1),a.Q6J("colCount",2)("cssClass","buttonGroup"),a.xp6(1),a.Q6J("buttonOptions",t.submitUserInfoButtonOptions),a.xp6(1),a.Q6J("buttonOptions",t.resetUserInfoButtonOptions))},directives:[o.Y,m.ZT3,m.vrV,p.p6,m.sBj,r._],styles:['body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{margin:0;min-height:100%;height:100%}*[_ngcontent-%COMP%]{box-sizing:border-box}@font-face{font-family:Hero;src:url(SVN-Birth-Of-A-Hero.291c0b7b016c2bfb71fa.ttf);font-weight:700}.content[_ngcontent-%COMP%]{line-height:1.5}.content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:30px;margin-top:20px;margin-bottom:20px}.content-block[_ngcontent-%COMP%]{margin-left:40px;margin-right:40px;margin-top:20px}.screen-x-small[_ngcontent-%COMP%]   .content-block[_ngcontent-%COMP%]{margin-left:20px;margin-right:20px}.responsive-paddings[_ngcontent-%COMP%]{padding:20px}.screen-large[_ngcontent-%COMP%]   .responsive-paddings[_ngcontent-%COMP%]{padding:40px}.dx-card.wide-card[_ngcontent-%COMP%]{border-radius:0;margin-left:0;margin-right:0;border-right:0;border-left:0}.with-footer[_ngcontent-%COMP%] > .dx-scrollable-wrapper[_ngcontent-%COMP%] > .dx-scrollable-container[_ngcontent-%COMP%] > .dx-scrollable-content[_ngcontent-%COMP%]{height:100%}.with-footer[_ngcontent-%COMP%] > .dx-scrollable-wrapper[_ngcontent-%COMP%] > .dx-scrollable-container[_ngcontent-%COMP%] > .dx-scrollable-content[_ngcontent-%COMP%] > .dx-scrollview-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100%}  #form-container{margin:10px}  .buttonGroup{margin-top:20px}  .signupForm{background-color:initial;box-shadow:0 10px 20px #00000030,0 6px 6px #0000003b;padding-left:15px;width:70%;padding-right:15px}  .long-title h3{font-family:Segoe UI Light,Helvetica Neue Light,Segoe UI,Helvetica Neue,Trebuchet MS,Verdana;font-weight:200;font-size:28px;text-align:center;margin-bottom:20px}.container[_ngcontent-%COMP%]{justify-content:flex-start}.container[_ngcontent-%COMP%], .image-container[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column}.image-container[_ngcontent-%COMP%]{justify-content:center}@media screen and (min-width:375px){.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:250px;height:250px;width:250px;box-shadow:0 25px 50px -12px #4fcdff40;margin-bottom:10px}}@media screen and (max-width:374px){.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:200px;height:200px;width:200px;box-shadow:0 25px 50px -12px #4fcdff40;margin-bottom:10px}}.img-input[_ngcontent-%COMP%]{color:#0000;width:65px}.img-input[_ngcontent-%COMP%]::-webkit-file-upload-button{visibility:hidden}.img-input[_ngcontent-%COMP%]:before{content:"Upload";display:inline-block;border:1px solid #999;border-radius:3px;padding:5px 8px;outline:none;white-space:nowrap;-webkit-user-select:none;user-select:none;cursor:pointer;text-shadow:1px 1px #fff;font-weight:700;font-size:15px}.img-input[_ngcontent-%COMP%]:hover:before{border-color:#fcffff}.img-input[_ngcontent-%COMP%]:active:before{background:-webkit-linear-gradient(top,#e3e3e3,#f9f9f9)}']}),e})()}];let T=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[s.Bz.forChild(P)],s.Bz]}),e})(),C=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[i.ez,o.A,T,r.D]]}),e})()}}]);