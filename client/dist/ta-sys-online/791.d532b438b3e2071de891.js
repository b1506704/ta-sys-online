(self.webpackChunkta_sys_online=self.webpackChunkta_sys_online||[]).push([[791],{1791:(t,e,i)=>{"use strict";i.r(e),i.d(e,{SubjectListModule:()=>C});var n=i(61116),r=i(46553),o=i(37211),s=i(8619),a=i(10418),c=i(41612),l=i(6614),u=i(69333),h=i(52177),p=i(83584),d=i(11018);function g(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"div",16),s.TgZ(1,"div",17),s._uU(2),s.qZA(),s.TgZ(3,"div",18),s._UZ(4,"img",19),s.qZA(),s.TgZ(5,"div"),s.TgZ(6,"dx-button",20),s.NdJ("onClick",function(){const e=s.CHM(t).$implicit;return s.oxw(2).selectSubject(null==e?null:e.id)}),s.qZA(),s.qZA(),s.qZA()}if(2&t){const t=e.$implicit,i=s.oxw(2);s.xp6(2),s.Oqu(null==t?null:t.name),s.xp6(2),s.Q6J("src",i.mapFileListToUrl(null==t?null:t.id),s.LSH)}}function f(t,e){if(1&t&&(s.ynx(0),s.TgZ(1,"div",14),s.YNc(2,g,7,2,"div",15),s.qZA(),s.BQk()),2&t){const t=s.oxw();s.xp6(2),s.Q6J("ngForOf",t.subjectList)}}const S=function(){return{paddingLeft:"25px",marginBottom:"5px"}},y=[{path:"",component:(()=>{class t{constructor(t,e,i,n){this.store=t,this.subjectStore=e,this.router=i,this.fileStore=n,this.pageSize=10,this.pullDown=!1,this.isDetailPopupVisible=!1,this.currentSortProperty="cost",this.currentSearchProperty="name",this.currentFilterProperty="subjectId",this.currency="$",this.searchBoxOptions={valueChangeEvent:"keyup",showClearButton:!0,onKeyUp:this.onSearchKeyupHandler.bind(this),onValueChanged:this.onSearchValueChanged.bind(this),mode:"search",placeholder:"Search with name"},this.refreshButtonOptions={type:"normal",icon:"refresh",hint:"Fetch data from server",onClick:this.onRefresh.bind(this)},this.filterSelectBoxOptions={items:this.subjectList,valueExpr:"name",displayExpr:"name",placeholder:"Filter with subject",onValueChanged:this.onFilterChange.bind(this)},this.sortSelectBoxOptions={items:[{_id:"-1",name:"(NONE)"},{_id:"0",name:"ASC"},{_id:"1",name:"DESC"}],valueExpr:"name",placeholder:"Sort by price",displayExpr:"name",onValueChanged:this.onSortValueChanged.bind(this)},this.fileData={sourceID:"",container:"",category:"",title:"",fileName:"",fileSize:0,fileType:"",url:"../../../../assets/imgs/profile.png"},this.fileList=[],this.updateContent=(t,e)=>{const i=this.checkEditorMode(),n=this.currentIndexFromServer;this.updateContentTimer&&clearTimeout(this.updateContentTimer),this.updateContentTimer=setTimeout(()=>{if(this.subjectList.length)switch(i){case"NORMAL":this.paginatePureData(n+1);break;case"FILTER":this.paginateFilterData(n+1);break;case"SEARCH":this.paginateSearchData(n+1);break;case"SORT":this.paginateSortData(n+1)}t.component.release()},500)},this.updateTopContent=t=>{this.updateContent(t,"PullDown")},this.updateBottomContent=t=>{this.updateContent(t,"ReachBottom")}}selectSubject(t){this.currentSubjectID=t,console.log("SELECTED ID"),console.log(t),this.isDetailPopupVisible=!0}onSearchKeyupHandler(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.isSearchingByName=!0,this.isFilteringByCategory=!1,this.isSortingByPrice=!1,console.log(this.currentSearchByPropertyValue),""!==this.currentSearchByPropertyValue?this.subjectStore.initInfiniteSearchByPropertyData(this.currentSearchProperty,this.currentSearchByPropertyValue,1,this.pageSize):(this.store.showNotif("SEARCH MODE OFF","custom"),this.onRefresh())},1250)}onSearchValueChanged(t){this.currentSearchByPropertyValue=t.value}onSortValueChanged(t){this.isSortingByPrice=!0,this.isSearchingByName=!1,this.isFilteringByCategory=!1,this.currentSortByPropertyValue=t.value,"(NONE)"!==t.value?this.subjectStore.initInfiniteSortByPropertyData(this.currentSortProperty,t.value,1,this.pageSize):(this.store.showNotif("SORT MODE OFF","custom"),this.onRefresh())}onFilterChange(t){this.isFilteringByCategory=!0,this.isSearchingByName=!1,this.isSortingByPrice=!1,this.currentCategoryFilterValue=t.value,console.log(t.value),"(NONE)"!==t.value?this.subjectStore.initInfiniteFilterByPropertyData(this.currentFilterProperty,t.value,1,this.pageSize):(this.store.showNotif("FILTER MODE OFF","custom"),this.onRefresh())}checkEditorMode(){return!0===this.isFilteringByCategory?"FILTER":!0===this.isSearchingByName?"SEARCH":!0===this.isSortingByPrice?"SORT":"NORMAL"}paginatePureData(t){this.subjectStore.loadInfiniteDataAsync(t,this.pageSize)}paginateFilterData(t){this.subjectStore.filterInfiniteSubjectByProperty(this.currentFilterProperty,this.currentCategoryFilterValue,t,this.pageSize)}paginateSearchData(t){this.subjectStore.searchInfiniteSubjectByProperty(this.currentSearchProperty,this.currentSearchByPropertyValue,t,this.pageSize)}paginateSortData(t){this.subjectStore.sortInfiniteSubjectByProperty(this.currentSortProperty,this.currentSortByPropertyValue,t,this.pageSize)}onRefresh(){this.isFilteringByCategory=!1,this.isSearchingByName=!1,this.isSortingByPrice=!1,this.subjectStore.initInfiniteData(1,this.pageSize)}navigateToInstructor(){this.router.navigate(["/instructor_list"])}sourceDataListener(){return this.subjectStore.$subjectList.subscribe(t=>{this.subjectList=t})}mapFileListToUrl(t){var e;return 0!==this.fileList.length&&(null===(e=this.fileList.find(e=>e.sourceID===t))||void 0===e?void 0:e.url)||this.fileData.url}fileDataListener(){return this.fileStore.$fileList.subscribe(t=>{0!==t.length&&(this.fileList=t,console.log("IMAGE LIST OF DOCTOR"),console.log(this.fileList))})}currentPageListener(){return this.subjectStore.$currentPage.subscribe(t=>{this.currentIndexFromServer=t})}scrollTop(){this.scrollView.instance.scrollTo({top:0,left:0})}initData(){this.subjectStore.initInfiniteData(1,this.pageSize).then(()=>{this.sourceDataListener(),this.fileDataListener()})}ngOnInit(){this.currentPageListener(),this.initData()}ngOnDestroy(){this.sourceDataListener().unsubscribe(),this.currentPageListener().unsubscribe(),this.fileDataListener().unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(a.d),s.Y36(c.Z),s.Y36(r.F0),s.Y36(l.V))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-subject-list"]],viewQuery:function(t,e){if(1&t&&s.Gf(o.N,5),2&t){let t;s.iGM(t=s.CRH())&&(e.scrollView=t.first)}},decls:15,vars:25,consts:[[3,"ngStyle"],[3,"location","text"],["widget","dxTextBox","location","before",3,"options"],["widget","dxButton","location","after",3,"options","locateInMenu"],[3,"locateInMenu","location"],["icon","filter","type","normal",3,"disabled"],["widget","dxSelectBox","location","after",3,"locateInMenu","options"],["icon","group","type","normal",3,"disabled"],["widget","dxSelectBox","location","after",3,"options","locateInMenu"],["location","after","locateInMenu","auto"],["icon","arrowright","type","outline","text","To Instructor","hint","Navigate to instructor list ",3,"onClick"],[3,"direction","showScrollbar","scrollByContent","scrollByThumb","height","bounceEnabled","onPullDown","onReachBottom"],[4,"ngIf"],["icon","arrowup","label","",3,"index","onClick"],[1,"card-container"],["class","card",4,"ngFor","ngForOf"],[1,"card"],[1,"card-title"],[1,"card-img"],["alt","...",2,"height","100%","width","100%",3,"src"],["icon","arrowright","type","outline","text","Detail","hint","Click to see subject detail",3,"onClick"]],template:function(t,e){1&t&&(s.TgZ(0,"dx-toolbar",0),s._UZ(1,"dxi-item",1),s._UZ(2,"dxi-item",2),s._UZ(3,"dxi-item",3),s.TgZ(4,"dxi-item",4),s._UZ(5,"dx-button",5),s.qZA(),s._UZ(6,"dxi-item",6),s.TgZ(7,"dxi-item",4),s._UZ(8,"dx-button",7),s.qZA(),s._UZ(9,"dxi-item",8),s.TgZ(10,"dxi-item",9),s.TgZ(11,"dx-button",10),s.NdJ("onClick",function(){return e.navigateToInstructor()}),s.qZA(),s.qZA(),s.qZA(),s.TgZ(12,"dx-scroll-view",11),s.NdJ("onPullDown",function(t){return e.updateTopContent(t)})("onReachBottom",function(t){return e.updateBottomContent(t)}),s.YNc(13,f,3,1,"ng-container",12),s.qZA(),s.TgZ(14,"dx-speed-dial-action",13),s.NdJ("onClick",function(){return e.scrollTop()}),s.qZA()),2&t&&(s.Q6J("ngStyle",s.DdM(24,S)),s.xp6(1),s.Q6J("location","before")("text","Subject List"),s.xp6(1),s.Q6J("options",e.searchBoxOptions),s.xp6(1),s.Q6J("options",e.refreshButtonOptions)("locateInMenu","auto"),s.xp6(1),s.Q6J("locateInMenu","auto")("location","after"),s.xp6(1),s.Q6J("disabled",!0),s.xp6(1),s.Q6J("locateInMenu","auto")("options",e.filterSelectBoxOptions),s.xp6(1),s.Q6J("locateInMenu","auto")("location","after"),s.xp6(1),s.Q6J("disabled",!0),s.xp6(1),s.Q6J("options",e.sortSelectBoxOptions)("locateInMenu","auto"),s.xp6(3),s.Q6J("direction","vertical")("showScrollbar",!0)("scrollByContent",!0)("scrollByThumb",!0)("height","69vh")("bounceEnabled",!1),s.xp6(1),s.Q6J("ngIf",e.subjectList),s.xp6(1),s.Q6J("index",1))},directives:[u.G,n.PC,h.ZT3,p.K,o.N,n.O5,d.D,n.sg],styles:[".card-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center;align-items:flex-start}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{height:250px;margin:10px;background-color:rgba(0,10,12,.486);border-radius:10px;box-shadow:0 54px 55px #00000040,0 -12px 30px #0000001f,0 4px 6px #0000001f,0 12px 13px #0000002b,0 -3px 5px #00000017;width:250px;display:flex;flex-direction:column;justify-content:center;align-items:center}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:large;font-weight:700;font-style:oblique}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-img[_ngcontent-%COMP%]{height:150px;width:150px;margin-bottom:10px}"]}),t})()}];let x=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[r.Bz.forChild(y)],r.Bz]}),t})();var b=i(35614),m=i(67935);let C=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[n.ez,x,o.r,u.k,p.e,d.B,b.C,m.A]]}),t})()}}]);