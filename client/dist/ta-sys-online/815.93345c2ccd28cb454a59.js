(self.webpackChunkta_sys_online=self.webpackChunkta_sys_online||[]).push([[815],{27815:(t,e,s)=>{"use strict";s.r(e),s.d(e,{TestListModule:()=>_});var o=s(61116),i=s(15419),r=s(37211),a=s(8619),n=s(61305),l=s(41142),h=s(42693);let c=(()=>{class t{constructor(t){this.http=t,this.apiUrl="https://ta-sys-online-server.azurewebsites.net/api/Test"}fetchTest(t,e){const s=(new h.LE).set("page",t).set("size",e);return console.log(s.toString()),this.http.get(this.apiUrl,{params:s,reportProgress:!0,observe:"body"})}searchTestByName(t,e,s){const o=(new h.LE).set("value",t).set("page",e).set("size",s);return console.log(o.toString()),this.http.post(this.apiUrl+"/searchByName",{},{params:o,reportProgress:!0,observe:"body"})}filterTestByPrice(t,e,s,o){const i=(new h.LE).set("criteria",t).set("value",e).set("page",s).set("size",o);return console.log(i.toString()),this.http.post(this.apiUrl,{},{params:i,reportProgress:!0,observe:"body"})}filterTestByCategory(t,e,s){const o=(new h.LE).set("value",t).set("page",e).set("size",s);return console.log(o.toString()),this.http.post(this.apiUrl+"/filterByCategory",{},{params:o,reportProgress:!0,observe:"body"})}sortTestByName(t,e,s){const o=(new h.LE).set("value",t).set("page",e).set("size",s);return console.log(o.toString()),this.http.post(this.apiUrl+"/sortByName",{},{params:o,reportProgress:!0,observe:"body"})}sortTestByPrice(t,e,s){const o=(new h.LE).set("value",t).set("page",e).set("size",s);return console.log(o.toString()),this.http.post(this.apiUrl+"/sortByPrice",{},{params:o,reportProgress:!0,observe:"body"})}uploadTest(t){return this.http.post(this.apiUrl,t,{reportProgress:!0,observe:"body"})}generateRandomTest(){return this.http.post(this.apiUrl+"/randomTest",{reportProgress:!0,observe:"body"})}deleteAllTests(){return this.http.post(this.apiUrl+"/deleteAll",{reportProgress:!0,observe:"body"})}deleteTest(t){return this.http.delete(this.apiUrl+`/${t}`,{reportProgress:!0,observe:"body"})}getTest(t){return this.http.get(this.apiUrl+`/${t}`,{reportProgress:!0,observe:"body"})}deleteSelectedTests(t){return this.http.post(this.apiUrl+"/batch",t,{reportProgress:!0,observe:"body"})}updateTest(t,e){return this.http.post(this.apiUrl+`/updateTest/${e}`,t,{reportProgress:!0,observe:"body"})}fetchAll(){return this.http.post(this.apiUrl+"/fetchAll",{},{reportProgress:!0,observe:"body"})}}return t.\u0275fac=function(e){return new(e||t)(a.LFG(h.eN))},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var g=s(10418);const u={testList:[],selectedTest:{},exportData:[],testInstance:void 0,totalPages:0,currentPage:0,totalItems:0,responseMsg:""};let d=(()=>{class t extends n.b{constructor(t,e){super(u),this.testService=t,this.store=e,this.$testList=this.select(t=>t.testList),this.$testInstance=this.select(t=>t.testInstance),this.$exportData=this.select(t=>t.exportData),this.$totalPages=this.select(t=>t.totalPages),this.$totalItems=this.select(t=>t.totalItems),this.$currentPage=this.select(t=>t.currentPage),this.$selectedTest=this.select(t=>t.selectedTest)}fillEmpty(t,e,s,o){let i=s,r=t*e;for(var a=0;a<o.length;a++)i[r]=o[a],r++;return console.log("Filled array result"),console.log(i),i}initInfiniteData(t,e){return this.testService.fetchTest(t,e).toPromise().then(t=>{this.setState({testList:new Array(t.items.length)}),console.log("Current flag: infite list"),console.log(this.state.testList),this.setState({totalItems:t.totalItems}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.currentPage})}).then(()=>{this.loadDataAsync(t,e)})}loadInfiniteDataAsync(t,e){this.setIsLoading(!0),this.testService.fetchTest(t,e).subscribe({next:t=>{this.setState({testList:this.state.testList.concat(t.items)}),console.log("Infinite list"),console.log(this.state.testList),console.log("Server response"),console.log(t),this.setState({totalItems:t.totalItems}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.currentPage}),this.setIsLoading(!1)},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}})}initData(t,e){this.testService.fetchTest(t,e).toPromise().then(t=>{this.setState({testList:new Array(t.totalItems)}),console.log("Current flag: pure list"),console.log(this.state.testList),this.setState({totalItems:t.totalItems}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.currentPage})}).then(()=>{this.loadDataAsync(t,e)})}initFilterByCategoryData(t,e,s){this.store.showNotif("Filtered Mode On","custom"),this.testService.filterTestByCategory(t,0,5).toPromise().then(t=>{this.setState({testList:new Array(t.totalItems)}),console.log("Current flag: filtered list"),console.log(this.state.testList),this.setState({totalItems:t.totalItems}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.currentPage})}).then(()=>{this.filterTestByCategory(t,e,s)})}initInfiniteFilterByCategoryData(t,e,s){this.store.showNotif("Filtered Mode On","custom"),this.testService.filterTestByCategory(t,e,s).toPromise().then(t=>{this.setState({testList:new Array(t.items.length)}),console.log("Current flag: infinite filtered list"),console.log(this.state.testList),this.setState({totalItems:t.totalItems}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.currentPage})}).then(()=>{this.filterTestByCategory(t,e,s)})}initSearchByNameData(t,e,s){this.store.showNotif("Searched Mode On","custom"),this.testService.searchTestByName(t,0,5).toPromise().then(t=>{this.setState({testList:new Array(t.totalItems)}),console.log("Current flag: searched list"),console.log(this.state.testList),this.setState({totalItems:t.totalItems}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.currentPage})}).then(()=>{this.searchTestByName(t,e,s)})}initInfiniteSearchByNameData(t,e,s){this.store.showNotif("Searched Mode On","custom"),this.testService.searchTestByName(t,e,s).toPromise().then(t=>{0!==t.totalItems?this.setState({testList:new Array(t.items.length)}):this.store.showNotif("No result found!","custom"),console.log("Current flag: infitite searched list"),console.log(this.state.testList),this.setState({totalItems:t.totalItems}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.currentPage})}).then(()=>{this.searchTestByName(t,e,s)})}initSortByPriceData(t,e,s){this.store.showNotif("Sort Mode On","custom"),this.testService.sortTestByPrice(t,0,5).toPromise().then(t=>{this.setState({testList:new Array(t.totalItems)}),console.log("Current flag: sort list"),console.log(this.state.testList),this.setState({totalItems:t.totalItems}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.currentPage})}).then(()=>{this.sortTestByPrice(t,e,s)})}initInfiniteSortByPriceData(t,e,s){this.store.showNotif("Sort Mode On","custom"),this.testService.sortTestByPrice(t,e,s).toPromise().then(t=>{this.setState({testList:new Array(t.items.length)}),console.log("Current flag: sort list"),console.log(this.state.testList),this.setState({totalItems:t.totalItems}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.currentPage})}).then(()=>{this.sortTestByPrice(t,e,s)})}loadDataAsync(t,e){this.setIsLoading(!0),this.testService.fetchTest(t,e).subscribe({next:s=>{this.setState({testList:this.fillEmpty(t,e,this.state.testList,s.items)}),console.log("Pure list"),console.log(this.state.testList),console.log("Server response"),console.log(s),this.setState({totalItems:s.totalItems}),this.setState({totalPages:s.totalPages}),this.setState({currentPage:s.currentPage}),this.setIsLoading(!1)},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}})}refresh(t,e){this.setIsLoading(!0),this.testService.fetchTest(t,e).subscribe({next:s=>{this.setState({testList:this.fillEmpty(t,e,this.state.testList,s.items)}),this.setState({totalItems:s.totalItems}),this.setState({totalPages:s.totalPages}),this.setState({currentPage:s.currentPage}),console.log("Pure list"),console.log(this.state.testList),console.log("Server response"),console.log(s),this.store.showNotif("Refresh successfully","custom"),this.setIsLoading(!1)},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}})}setIsLoading(t){this.store.setIsLoading(t)}uploadTest(t,e,s){this.confirmDialog("").then(o=>{o&&(this.setIsLoading(!0),this.testService.uploadTest(t).subscribe({next:t=>{this.setState({responseMsg:t}),this.setTotalItems(this.state.totalItems+1),console.log(t),this.loadDataAsync(e,s),this.setIsLoading(!1),this.store.showNotif(t.responseMessage,"custom")},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}}))})}updateTest(t,e,s,o){this.confirmDialog("").then(i=>{i&&(this.setIsLoading(!0),this.testService.updateTest(t,e).subscribe({next:t=>{this.setState({responseMsg:t}),console.log(t),this.loadDataAsync(s,o),this.setIsLoading(!1),this.store.showNotif(t.responseMessage,"custom")},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}}))})}confirmDialog(t){return(0,l.iG)(""!=t?`<b>${t}</b>`:"<b>Are you sure?</b>","Confirm changes")}deleteSelectedTests(t,e,s){this.confirmDialog("").then(o=>{o&&(this.setIsLoading(!0),this.testService.deleteSelectedTests(t).subscribe({next:t=>{this.setState({responseMsg:t}),console.log(t),this.loadDataAsync(e,s),console.log(this.state.testList),this.setIsLoading(!1),this.store.showNotif(t.responseMessage,"custom")},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}}))})}deleteAllTests(){this.confirmDialog("Delete all items?").then(t=>{t&&(this.setIsLoading(!0),this.testService.deleteAllTests().subscribe({next:t=>{this.setState({responseMsg:t}),this.setState({testList:[]}),this.setState({totalPages:0}),this.setState({currentPage:0}),this.setState({totalItems:0}),console.log(t),this.setIsLoading(!1),this.store.showNotif(t.responseMessage,"custom")},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}}))})}deleteTest(t,e,s){this.confirmDialog("").then(o=>{o&&(this.setIsLoading(!0),this.testService.deleteTest(t).subscribe({next:t=>{this.setState({responseMsg:t}),this.setTotalItems(this.state.totalItems-1),console.log(t),this.loadDataAsync(e,s),this.setIsLoading(!1),this.store.showNotif(t.responseMessage,"custom")},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}}))})}selectTest(t){this.setState({selectedTest:t})}setTotalPages(t){this.setState({totalPages:t})}setTotalItems(t){this.setState({totalItems:t})}setCurrentPage(t){this.setState({currentPage:t})}getTest(t){return this.setIsLoading(!0),this.testService.getTest(t).toPromise().then(t=>{this.setState({testInstance:t}),console.log(t),this.setIsLoading(!1)})}filterTestByPrice(t,e,s,o){this.setIsLoading(!0),this.testService.filterTestByPrice(t,e,s,o).subscribe({next:t=>{this.setState({responseMsg:t}),this.setState({testList:this.fillEmpty(s,o,this.state.testList,t.items)}),this.setState({totalItems:t.totalItems}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.currentPage}),this.setIsLoading(!1)},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}})}filterTestByCategory(t,e,s){this.setIsLoading(!0),this.testService.filterTestByCategory(t,e,s).subscribe({next:t=>{this.setState({testList:this.fillEmpty(e,s,this.state.testList,t.items)}),console.log("Filtered list"),console.log(this.state.testList),console.log("Server response"),console.log(t),this.setState({totalItems:t.totalItems}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.currentPage}),this.setIsLoading(!1)},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}})}filterInfiniteTestByCategory(t,e,s){this.setIsLoading(!0),this.testService.filterTestByCategory(t,e,s).subscribe({next:t=>{this.setState({testList:this.state.testList.concat(t.items)}),console.log("Filtered list"),console.log(this.state.testList),console.log("Server response"),console.log(t),this.setState({totalItems:t.totalItems}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.currentPage}),this.setIsLoading(!1)},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}})}searchTestByName(t,e,s){this.setIsLoading(!0),this.testService.searchTestByName(t,e,s).subscribe({next:t=>{0!==t.totalItems?this.setState({testList:this.fillEmpty(e,s,this.state.testList,t.items)}):this.store.showNotif("No result found!","custom"),console.log("Searched list"),console.log(this.state.testList),console.log("Server response"),console.log(t),this.setState({totalItems:t.totalItems}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.currentPage}),this.setIsLoading(!1)},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}})}searchInfiniteTestByName(t,e,s){this.setIsLoading(!0),this.testService.searchTestByName(t,e,s).subscribe({next:t=>{0!==t.totalItems?this.setState({testList:this.state.testList.concat(t.items)}):this.store.showNotif("No result found!","custome"),console.log("Infite searched list"),console.log(this.state.testList),console.log("Server response"),console.log(t),this.setState({totalItems:t.totalItems}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.currentPage}),this.setIsLoading(!1)},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}})}sortTestByName(t,e,s){this.setIsLoading(!0),this.testService.sortTestByName(t,e,s).subscribe({next:t=>{this.setState({responseMsg:t}),this.setState({testList:this.fillEmpty(e,s,this.state.testList,t.items)}),this.setState({totalItems:t.totalItems}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.currentPage}),console.log("Sorted list"),console.log(this.state.testList),console.log("Server response"),console.log(t),this.setIsLoading(!1)},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}})}sortTestByPrice(t,e,s){this.setIsLoading(!0),this.testService.sortTestByPrice(t,e,s).subscribe({next:t=>{this.setState({responseMsg:t}),this.setState({testList:this.fillEmpty(e,s,this.state.testList,t.items)}),this.setState({totalItems:t.totalItems}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.currentPage}),console.log("Sorted list"),console.log(this.state.testList),console.log("Server response"),console.log(t),this.setIsLoading(!1)},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}})}sortInfiniteTestByPrice(t,e,s){this.setIsLoading(!0),this.testService.sortTestByPrice(t,e,s).subscribe({next:t=>{this.setState({testList:this.state.testList.concat(t.items)}),console.log("Infite sorted list"),console.log(this.state.testList),console.log("Server response"),console.log(t),this.setState({totalItems:t.totalItems}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.currentPage}),this.setIsLoading(!1)},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}})}setExportData(t){this.setState({testList:t})}}return t.\u0275fac=function(e){return new(e||t)(a.LFG(c),a.LFG(g.d))},t.\u0275prov=a.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var p=s(69333),m=s(52177),f=s(83584),S=s(11018),y=s(35614),I=s(86101),P=s(67935);function x(t,e){if(1&t&&(a.TgZ(0,"div"),a.TgZ(1,"div",14),a._uU(2),a.qZA(),a.qZA()),2&t){const t=a.oxw();a.xp6(2),a.hij(" ",null==t.testData?null:t.testData.name," ")}}function T(t,e){if(1&t&&(a.TgZ(0,"div"),a.TgZ(1,"div",14),a._uU(2),a.qZA(),a.qZA()),2&t){const t=a.oxw();a.xp6(2),a.hij(" ",t.price," ")}}function b(t,e){if(1&t&&(a.TgZ(0,"div"),a.TgZ(1,"div",14),a._uU(2),a.qZA(),a.qZA()),2&t){const t=a.oxw();a.xp6(2),a.hij(" ",null==t.testData?null:t.testData.effect," ")}}const L=function(){return["test-form"]},v=function(){return{text:"Brand"}};let w=(()=>{class t{constructor(t){this.testStore=t}testDataListener(){return this.testStore.$testInstance.subscribe(t=>{this.testData=t})}renderSourceData(){this.testData=null,this.price=null,setTimeout(()=>{this.testStore.getTest(this.testID).then(()=>{this.testDataListener()})},100)}ngOnInit(){}ngOnChanges(){this.renderSourceData()}ngOnDestroy(){this.testDataListener().unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(d))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-test-detail"]],inputs:{testID:"testID"},features:[a.TTD],decls:16,vars:9,consts:[[3,"bounceEnabled","scrollByContent","scrollByThumb"],[1,"img-container"],["src","../../../../../assets/imgs/favipiravir_1.png","alt","..."],["id","test-form-container",3,"classList"],["id","test-form",3,"formData","readOnly"],["itemType","group","caption","Test Information"],["name","name"],["text","Name"],[4,"dxTemplate"],["dataField","brand",3,"label"],["name","price"],["text","Price"],["name","effect"],["text","Effect"],[1,"responsive-field"]],template:function(t,e){1&t&&(a.TgZ(0,"dx-scroll-view",0),a.TgZ(1,"div",1),a._UZ(2,"img",2),a.qZA(),a.TgZ(3,"form",3),a.TgZ(4,"dx-form",4),a.TgZ(5,"dxi-item",5),a.TgZ(6,"dxi-item",6),a._UZ(7,"dxo-label",7),a.YNc(8,x,3,1,"div",8),a.qZA(),a._UZ(9,"dxi-item",9),a.TgZ(10,"dxi-item",10),a._UZ(11,"dxo-label",11),a.YNc(12,T,3,1,"div",8),a.qZA(),a.TgZ(13,"dxi-item",12),a._UZ(14,"dxo-label",13),a.YNc(15,b,3,1,"div",8),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&t&&(a.Q6J("bounceEnabled",!0)("scrollByContent",!0)("scrollByThumb",!0),a.xp6(3),a.Q6J("classList",a.DdM(7,L)),a.xp6(1),a.Q6J("formData",e.testData)("readOnly",!0),a.xp6(5),a.Q6J("label",a.DdM(8,v)))},directives:[r.N,P.Y,m.ZT3,m.sBj,I.p6],styles:[".img-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:15px}.responsive-field[_ngcontent-%COMP%]{width:100%;border-bottom:2px dotted #fff;font-size:large;word-wrap:break-word;overflow-wrap:break-word}@media screen and (max-width:450px){.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100px;width:100px;border-radius:100px;box-shadow:0 25px 50px -12px #4fcdff40}}@media screen and (min-width:451px){.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:150px;width:150px;border-radius:150px;box-shadow:0 25px 50px -12px #4fcdff40}}"]}),t})(),B=(()=>{class t{transform(t,e){if(t)return function(t,e){const s=t.toFixed(2).split(".")[0],o=t.toFixed(2).split(".")[1],i=s.split("").reverse();let r=0,a="";for(let n=0;n<i.length;n++)r++,a=r%3==1&&1!=r?i[n]+","+a:i[n]+a;return a+"."+o+e}(t,e||"$")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=a.Yjl({name:"formatCurrency",type:t,pure:!0}),t})();function C(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"div",18),a.TgZ(1,"div",19),a._uU(2),a.qZA(),a.TgZ(3,"div",20),a.TgZ(4,"div",21),a._uU(5),a.ALo(6,"formatCurrency"),a.qZA(),a.qZA(),a.TgZ(7,"div",22),a._UZ(8,"img",23),a.qZA(),a.TgZ(9,"div"),a.TgZ(10,"dx-button",24),a.NdJ("onClick",function(){const e=a.CHM(t).$implicit;return a.oxw(2).selectTest(null==e?null:e._id)}),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=e.$implicit,s=a.oxw(2);a.xp6(2),a.Oqu(null==t?null:t.name),a.xp6(3),a.hij(" Price: ",a.xi3(6,2,null==t?null:t.price,s.currency)," ")}}function N(t,e){if(1&t&&(a.ynx(0),a.TgZ(1,"div",16),a.YNc(2,C,11,5,"div",17),a.qZA(),a.BQk()),2&t){const t=a.oxw();a.xp6(2),a.Q6J("ngForOf",t.testList)}}function D(t,e){if(1&t&&(a.ynx(0),a._UZ(1,"app-test-detail",25),a.BQk()),2&t){const t=a.oxw(2);a.xp6(1),a.Q6J("testID",t.currentTestID)}}function Z(t,e){if(1&t&&(a.TgZ(0,"div"),a.YNc(1,D,2,1,"ng-container",12),a.qZA()),2&t){const t=a.oxw();a.xp6(1),a.Q6J("ngIf",t.currentTestID)}}const M=function(){return{paddingLeft:"25px",marginBottom:"5px"}},A=[{path:"",component:(()=>{class t{constructor(t,e,s){this.testStore=t,this.store=e,this.router=s,this.pageSize=10,this.pullDown=!1,this.isDetailPopupVisible=!1,this.searchBoxOptions={valueChangeEvent:"keyup",showClearButton:!0,onKeyUp:this.onSearchKeyupHandler.bind(this),onValueChanged:this.onSearchValueChanged.bind(this),mode:"search",placeholder:"Search with name"},this.refreshButtonOptions={type:"normal",icon:"refresh",hint:"Fetch data from server",onClick:this.onRefresh.bind(this)},this.filterSelectBoxOptions={items:[],valueExpr:"name",displayExpr:"name",placeholder:"Filter with brand",onValueChanged:this.onFilterChange.bind(this)},this.sortSelectBoxOptions={items:[{_id:"-1",name:"(NONE)"},{_id:"0",name:"ASC"},{_id:"1",name:"DESC"}],valueExpr:"name",placeholder:"Sort price",displayExpr:"name",onValueChanged:this.onSortValueChanged.bind(this)},this.currency="$",this.updateContent=(t,e)=>{const s=this.checkEditorMode(),o=this.currentIndexFromServer;this.updateContentTimer&&clearTimeout(this.updateContentTimer),this.updateContentTimer=setTimeout(()=>{if(this.testList.length)switch(s){case"NORMAL":this.paginatePureData(o+1);break;case"FILTER":this.paginateFilterData(o+1);break;case"SEARCH":this.paginateSearchData(o+1);break;case"SORT":this.paginateSortData(o+1)}t.component.release()},500)},this.updateTopContent=t=>{this.updateContent(t,"PullDown")},this.updateBottomContent=t=>{this.updateContent(t,"ReachBottom")}}selectTest(t){this.currentTestID=t,console.log("SELECTED ID"),console.log(t),this.isDetailPopupVisible=!0}onSearchKeyupHandler(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.isSearchingByName=!0,this.isFilteringByCategory=!1,this.isSortingByPrice=!1,console.log(this.currentSearchByNameValue),""!==this.currentSearchByNameValue?this.testStore.initInfiniteSearchByNameData(this.currentSearchByNameValue,0,this.pageSize):(this.store.showNotif("SEARCH MODE OFF","custom"),this.onRefresh())},1250)}onSearchValueChanged(t){this.currentSearchByNameValue=t.value}onSortValueChanged(t){this.isSortingByPrice=!0,this.isSearchingByName=!1,this.isFilteringByCategory=!1,this.currentSortByPriceValue=t.value,"(NONE)"!==t.value?this.testStore.initInfiniteSortByPriceData(t.value,0,this.pageSize):(this.store.showNotif("SORT MODE OFF","custom"),this.onRefresh())}onFilterChange(t){this.isFilteringByCategory=!0,this.isSearchingByName=!1,this.isSortingByPrice=!1,this.currentCategoryFilterValue=t.value,console.log(t.value),"(NONE)"!==t.value?this.testStore.initInfiniteFilterByCategoryData(t.value,0,this.pageSize):(this.store.showNotif("FILTER MODE OFF","custom"),this.onRefresh())}checkEditorMode(){return!0===this.isFilteringByCategory?"FILTER":!0===this.isSearchingByName?"SEARCH":!0===this.isSortingByPrice?"SORT":"NORMAL"}paginatePureData(t){this.testStore.loadInfiniteDataAsync(t,this.pageSize)}paginateFilterData(t){this.testStore.filterInfiniteTestByCategory(this.currentCategoryFilterValue,t,this.pageSize)}paginateSearchData(t){this.testStore.searchInfiniteTestByName(this.currentSearchByNameValue,t,this.pageSize)}paginateSortData(t){this.testStore.sortInfiniteTestByPrice(this.currentSortByPriceValue,t,this.pageSize)}onRefresh(){this.isFilteringByCategory=!1,this.isSearchingByName=!1,this.isSortingByPrice=!1,this.testStore.initInfiniteData(0,this.pageSize)}navigateToInstructorSchedule(){this.router.navigate(["/instructor_schedule"])}sourceDataListener(){return this.testStore.$testList.subscribe(t=>{this.testList=t})}currentPageListener(){return this.testStore.$currentPage.subscribe(t=>{this.currentIndexFromServer=t})}scrollTop(){this.scrollView.instance.scrollTo({top:0,left:0})}ngOnInit(){this.currentPageListener(),this.testStore.initInfiniteData(0,this.pageSize).then(()=>{this.sourceDataListener()})}ngOnDestroy(){this.sourceDataListener().unsubscribe(),this.currentPageListener().unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(d),a.Y36(g.d),a.Y36(i.F0))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-test-list"]],viewQuery:function(t,e){if(1&t&&a.Gf(r.N,5),2&t){let t;a.iGM(t=a.CRH())&&(e.scrollView=t.first)}},decls:17,vars:35,consts:[[3,"ngStyle"],[3,"location","text"],["widget","dxTextBox","location","before",3,"options"],["widget","dxButton","location","after",3,"options","locateInMenu"],[3,"locateInMenu","location"],["icon","filter","type","normal",3,"disabled"],["widget","dxSelectBox","location","after",3,"locateInMenu","options"],["icon","money","type","normal",3,"disabled"],["widget","dxSelectBox","location","after",3,"options","locateInMenu"],["location","after","locateInMenu","auto"],["icon","arrowright","type","outline","text","Instructor Schedule","hint","Navigate to Instructor Schedule",3,"onClick"],[3,"direction","showScrollbar","scrollByContent","scrollByThumb","height","bounceEnabled","onPullDown","onReachBottom"],[4,"ngIf"],["icon","arrowup","label","",3,"index","onClick"],[3,"visible","height","width","showTitle","shading","title","dragEnabled","closeOnOutsideClick","showCloseButton","visibleChange"],[4,"dxTemplate","dxTemplateOf"],[1,"card-container"],["class","card",4,"ngFor","ngForOf"],[1,"card"],[1,"card-title"],[1,"card-body"],[1,"card-text"],[1,"card-img"],["src","../../../../assets/imgs/favipiravir_2.jpg","alt","favipiravir_1",2,"height","100%","width","100%"],["icon","arrowright","type","outline","text","Detail","hint","Click to see test detail",3,"onClick"],[3,"testID"]],template:function(t,e){1&t&&(a.TgZ(0,"dx-toolbar",0),a._UZ(1,"dxi-item",1),a._UZ(2,"dxi-item",2),a._UZ(3,"dxi-item",3),a.TgZ(4,"dxi-item",4),a._UZ(5,"dx-button",5),a.qZA(),a._UZ(6,"dxi-item",6),a.TgZ(7,"dxi-item",4),a._UZ(8,"dx-button",7),a.qZA(),a._UZ(9,"dxi-item",8),a.TgZ(10,"dxi-item",9),a.TgZ(11,"dx-button",10),a.NdJ("onClick",function(){return e.navigateToInstructorSchedule()}),a.qZA(),a.qZA(),a.qZA(),a.TgZ(12,"dx-scroll-view",11),a.NdJ("onPullDown",function(t){return e.updateTopContent(t)})("onReachBottom",function(t){return e.updateBottomContent(t)}),a.YNc(13,N,3,1,"ng-container",12),a.qZA(),a.TgZ(14,"dx-speed-dial-action",13),a.NdJ("onClick",function(){return e.scrollTop()}),a.qZA(),a.TgZ(15,"dx-popup",14),a.NdJ("visibleChange",function(t){return e.isDetailPopupVisible=t}),a.YNc(16,Z,2,1,"div",15),a.qZA()),2&t&&(a.Q6J("ngStyle",a.DdM(34,M)),a.xp6(1),a.Q6J("location","before")("text","Test Encyclopedia"),a.xp6(1),a.Q6J("options",e.searchBoxOptions),a.xp6(1),a.Q6J("options",e.refreshButtonOptions)("locateInMenu","auto"),a.xp6(1),a.Q6J("locateInMenu","auto")("location","after"),a.xp6(1),a.Q6J("disabled",!0),a.xp6(1),a.Q6J("locateInMenu","auto")("options",e.filterSelectBoxOptions),a.xp6(1),a.Q6J("locateInMenu","auto")("location","after"),a.xp6(1),a.Q6J("disabled",!0),a.xp6(1),a.Q6J("options",e.sortSelectBoxOptions)("locateInMenu","auto"),a.xp6(3),a.Q6J("direction","vertical")("showScrollbar",!0)("scrollByContent",!0)("scrollByThumb",!0)("height","69vh")("bounceEnabled",!1),a.xp6(1),a.Q6J("ngIf",e.testList),a.xp6(1),a.Q6J("index",1),a.xp6(1),a.Q6J("visible",e.isDetailPopupVisible)("height","80%")("width","80%")("showTitle",!0)("shading",!0)("title","Test Detail")("dragEnabled",!0)("closeOnOutsideClick",!1)("showCloseButton",!0),a.xp6(1),a.Q6J("dxTemplateOf","content"))},directives:[p.G,o.PC,m.ZT3,f.K,r.N,o.O5,S.D,y.x,I.p6,o.sg,w],pipes:[B],styles:[".card-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center;align-items:flex-start}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{height:200px;margin:10px;background-color:rgba(0,10,12,.486);border-radius:10px;box-shadow:0 54px 55px #00000040,0 -12px 30px #0000001f,0 4px 6px #0000001f,0 12px 13px #0000002b,0 -3px 5px #00000017;width:200px;display:flex;flex-direction:column;justify-content:center;align-items:center}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:large;font-weight:700;font-style:oblique}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-img[_ngcontent-%COMP%]{height:100px;width:190px}"]}),t})()}];let O=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[i.Bz.forChild(A)],i.Bz]}),t})(),E=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[o.ez]]}),t})(),_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[o.ez,O,r.r,p.k,f.e,S.B,E,y.C,P.A]]}),t})()}}]);