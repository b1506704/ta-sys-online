(self.webpackChunkta_sys_online=self.webpackChunkta_sys_online||[]).push([[413],{36413:(t,e,i)=>{"use strict";i.r(e),i.d(e,{SubjectListModule:()=>O});var n=i(61116),r=i(15419),o=i(37211),s=i(8619),a=i(86150),c=i(41612),l=i(70513),u=i(69333),h=i(52177),p=i(83584),d=i(11018),g=i(35614),m=i(86101),b=i(83914),x=i(67935);function f(t,e){if(1&t&&(s.TgZ(0,"div"),s.TgZ(1,"div",9),s._uU(2),s.qZA(),s.qZA()),2&t){const t=s.oxw();s.xp6(2),s.hij(" ",null==t.subjectData?null:t.subjectData.name," ")}}const y=function(){return["subject-form"]};let S=(()=>{class t{constructor(t,e){this.subjectStore=t,this.imageService=e,this.fieldList=[],this.currency="$",this.imageData={sourceID:"",container:"",category:"",title:"",fileName:"",fileSize:0,fileType:"",url:"../../../../assets/imgs/profile.png"}}subjectDataListener(){return this.subjectStore.$subjectInstance.subscribe(t=>{this.subjectData=t,this.imageService.getImageBySourceID(t._id).subscribe(t=>{null!==t&&(this.imageData=t)})})}renderSourceData(){this.subjectData=null,this.imageData={sourceID:"",container:"",category:"",title:"",fileName:"",fileSize:0,fileType:"",url:"../../../../assets/imgs/profile.png"},setTimeout(()=>{this.subjectStore.getSubject(this.subjectID).then(()=>{this.subjectDataListener()})},100)}ngOnInit(){}ngOnChanges(){this.renderSourceData()}ngOnDestroy(){this.subjectDataListener().unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(c.Z),s.Y36(b.Q))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-subject-detail"]],inputs:{subjectID:"subjectID"},features:[s.TTD],decls:9,vars:8,consts:[[3,"bounceEnabled","scrollByContent","scrollByThumb"],[1,"img-container"],["alt","...",3,"src"],["id","subject-form-container",3,"classList"],["id","subject-form",3,"formData","readOnly"],["itemType","group","caption","Personal Information"],["name","fullName"],["text","Full Name"],[4,"dxTemplate"],[1,"responsive-field"]],template:function(t,e){1&t&&(s.TgZ(0,"dx-scroll-view",0),s.TgZ(1,"div",1),s._UZ(2,"img",2),s.qZA(),s.TgZ(3,"form",3),s.TgZ(4,"dx-form",4),s.TgZ(5,"dxi-item",5),s.TgZ(6,"dxi-item",6),s._UZ(7,"dxo-label",7),s.YNc(8,f,3,1,"div",8),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t&&(s.Q6J("bounceEnabled",!0)("scrollByContent",!0)("scrollByThumb",!0),s.xp6(2),s.Q6J("src",null==e.imageData?null:e.imageData.url,s.LSH),s.xp6(1),s.Q6J("classList",s.DdM(7,y)),s.xp6(1),s.Q6J("formData",e.subjectData)("readOnly",!0))},directives:[o.N,x.Y,h.ZT3,h.sBj,m.p6],styles:[".img-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:15px}.responsive-field[_ngcontent-%COMP%]{width:100%;border-bottom:2px dotted #fff;font-size:large;word-wrap:break-word;overflow-wrap:break-word}@media screen and (max-width:450px){.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100px;width:100px;border-radius:100px;box-shadow:0 25px 50px -12px #4fcdff40}}@media screen and (min-width:451px){.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:150px;width:150px;border-radius:150px;box-shadow:0 25px 50px -12px #4fcdff40}}"]}),t})();var C=i(656);function D(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"div",18),s.TgZ(1,"div",19),s._uU(2),s.qZA(),s.TgZ(3,"div",20),s.TgZ(4,"div",21),s._uU(5),s.ALo(6,"formatCurrency"),s.qZA(),s.qZA(),s.TgZ(7,"div",22),s._UZ(8,"img",23),s.qZA(),s.TgZ(9,"div"),s.TgZ(10,"dx-button",24),s.NdJ("onClick",function(){const e=s.CHM(t).$implicit;return s.oxw(2).selectSubject(null==e?null:e.id)}),s.qZA(),s.qZA(),s.qZA()}if(2&t){const t=e.$implicit,i=s.oxw(2);s.xp6(2),s.Oqu(null==t?null:t.name),s.xp6(3),s.hij(" Price: ",s.xi3(6,3,null==t?null:t.cost,i.currency)," "),s.xp6(3),s.Q6J("src",i.mapImageListToUrl(null==t?null:t._id),s.LSH)}}function T(t,e){if(1&t&&(s.ynx(0),s.TgZ(1,"div",16),s.YNc(2,D,11,6,"div",17),s.qZA(),s.BQk()),2&t){const t=s.oxw();s.xp6(2),s.Q6J("ngForOf",t.subjectList)}}function B(t,e){if(1&t&&(s.ynx(0),s._UZ(1,"app-subject-detail",25),s.BQk()),2&t){const t=s.oxw(2);s.xp6(1),s.Q6J("subjectID",t.currentSubjectID)}}function Z(t,e){if(1&t&&(s.TgZ(0,"div"),s.YNc(1,B,2,1,"ng-container",12),s.qZA()),2&t){const t=s.oxw();s.xp6(1),s.Q6J("ngIf",t.currentSubjectID)}}const j=function(){return{paddingLeft:"25px",marginBottom:"5px"}},w=[{path:"",component:(()=>{class t{constructor(t,e,i,n){this.store=t,this.subjectStore=e,this.router=i,this.imageStore=n,this.pageSize=10,this.pullDown=!1,this.isDetailPopupVisible=!1,this.currentSortProperty="cost",this.currentSearchProperty="name",this.currentFilterProperty="subjectId",this.currency="$",this.searchBoxOptions={valueChangeEvent:"keyup",showClearButton:!0,onKeyUp:this.onSearchKeyupHandler.bind(this),onValueChanged:this.onSearchValueChanged.bind(this),mode:"search",placeholder:"Search with name"},this.refreshButtonOptions={type:"normal",icon:"refresh",hint:"Fetch data from server",onClick:this.onRefresh.bind(this)},this.filterSelectBoxOptions={items:this.subjectList,valueExpr:"name",displayExpr:"name",placeholder:"Filter with subject",onValueChanged:this.onFilterChange.bind(this)},this.sortSelectBoxOptions={items:[{_id:"-1",name:"(NONE)"},{_id:"0",name:"ASC"},{_id:"1",name:"DESC"}],valueExpr:"name",placeholder:"Sort by price",displayExpr:"name",onValueChanged:this.onSortValueChanged.bind(this)},this.imageData={sourceID:"",container:"",category:"",title:"",fileName:"",fileSize:0,fileType:"",url:"../../../../assets/imgs/profile.png"},this.imageList=[],this.updateContent=(t,e)=>{const i=this.checkEditorMode(),n=this.currentIndexFromServer;this.updateContentTimer&&clearTimeout(this.updateContentTimer),this.updateContentTimer=setTimeout(()=>{if(this.subjectList.length)switch(i){case"NORMAL":this.paginatePureData(n+1);break;case"FILTER":this.paginateFilterData(n+1);break;case"SEARCH":this.paginateSearchData(n+1);break;case"SORT":this.paginateSortData(n+1)}t.component.release()},500)},this.updateTopContent=t=>{this.updateContent(t,"PullDown")},this.updateBottomContent=t=>{this.updateContent(t,"ReachBottom")}}selectSubject(t){this.currentSubjectID=t,console.log("SELECTED ID"),console.log(t),this.isDetailPopupVisible=!0}onSearchKeyupHandler(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.isSearchingByName=!0,this.isFilteringByCategory=!1,this.isSortingByPrice=!1,console.log(this.currentSearchByPropertyValue),""!==this.currentSearchByPropertyValue?this.subjectStore.initInfiniteSearchByPropertyData(this.currentSearchProperty,this.currentSearchByPropertyValue,1,this.pageSize):(this.store.showNotif("SEARCH MODE OFF","custom"),this.onRefresh())},1250)}onSearchValueChanged(t){this.currentSearchByPropertyValue=t.value}onSortValueChanged(t){this.isSortingByPrice=!0,this.isSearchingByName=!1,this.isFilteringByCategory=!1,this.currentSortByPropertyValue=t.value,"(NONE)"!==t.value?this.subjectStore.initInfiniteSortByPropertyData(this.currentSortProperty,t.value,1,this.pageSize):(this.store.showNotif("SORT MODE OFF","custom"),this.onRefresh())}onFilterChange(t){this.isFilteringByCategory=!0,this.isSearchingByName=!1,this.isSortingByPrice=!1,this.currentCategoryFilterValue=t.value,console.log(t.value),"(NONE)"!==t.value?this.subjectStore.initInfiniteFilterByPropertyData(this.currentFilterProperty,t.value,1,this.pageSize):(this.store.showNotif("FILTER MODE OFF","custom"),this.onRefresh())}checkEditorMode(){return!0===this.isFilteringByCategory?"FILTER":!0===this.isSearchingByName?"SEARCH":!0===this.isSortingByPrice?"SORT":"NORMAL"}paginatePureData(t){this.subjectStore.loadInfiniteDataAsync(t,this.pageSize)}paginateFilterData(t){this.subjectStore.filterInfiniteSubjectByProperty(this.currentFilterProperty,this.currentCategoryFilterValue,t,this.pageSize)}paginateSearchData(t){this.subjectStore.searchInfiniteSubjectByProperty(this.currentSearchProperty,this.currentSearchByPropertyValue,t,this.pageSize)}paginateSortData(t){this.subjectStore.sortInfiniteSubjectByProperty(this.currentSortProperty,this.currentSortByPropertyValue,t,this.pageSize)}onRefresh(){this.isFilteringByCategory=!1,this.isSearchingByName=!1,this.isSortingByPrice=!1,this.subjectStore.initInfiniteData(1,this.pageSize)}navigateToInstructor(){this.router.navigate(["/instructor_list"])}sourceDataListener(){return this.subjectStore.$subjectList.subscribe(t=>{this.subjectList=t})}mapImageListToUrl(t){var e;return 0!==this.imageList.length&&(null===(e=this.imageList.find(e=>e.sourceID===t))||void 0===e?void 0:e.url)||this.imageData.url}imageDataListener(){return this.imageStore.$imageList.subscribe(t=>{0!==t.length&&(this.imageList=t,console.log("IMAGE LIST OF DOCTOR"),console.log(this.imageList))})}currentPageListener(){return this.subjectStore.$currentPage.subscribe(t=>{this.currentIndexFromServer=t})}scrollTop(){this.scrollView.instance.scrollTo({top:0,left:0})}initData(){this.subjectStore.initInfiniteData(1,this.pageSize).then(()=>{this.sourceDataListener(),this.imageDataListener()})}ngOnInit(){this.currentPageListener(),this.initData()}ngOnDestroy(){this.sourceDataListener().unsubscribe(),this.currentPageListener().unsubscribe(),this.imageDataListener().unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(a.d),s.Y36(c.Z),s.Y36(r.F0),s.Y36(l.Y))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-subject-list"]],viewQuery:function(t,e){if(1&t&&s.Gf(o.N,5),2&t){let t;s.iGM(t=s.CRH())&&(e.scrollView=t.first)}},decls:17,vars:35,consts:[[3,"ngStyle"],[3,"location","text"],["widget","dxTextBox","location","before",3,"options"],["widget","dxButton","location","after",3,"options","locateInMenu"],[3,"locateInMenu","location"],["icon","filter","type","normal",3,"disabled"],["widget","dxSelectBox","location","after",3,"locateInMenu","options"],["icon","group","type","normal",3,"disabled"],["widget","dxSelectBox","location","after",3,"options","locateInMenu"],["location","after","locateInMenu","auto"],["icon","arrowright","type","outline","text","To Instructor","hint","Navigate to instructor list ",3,"onClick"],[3,"direction","showScrollbar","scrollByContent","scrollByThumb","height","bounceEnabled","onPullDown","onReachBottom"],[4,"ngIf"],["icon","arrowup","label","",3,"index","onClick"],[3,"visible","height","width","showTitle","shading","title","dragEnabled","closeOnOutsideClick","showCloseButton","visibleChange"],[4,"dxTemplate","dxTemplateOf"],[1,"card-container"],["class","card",4,"ngFor","ngForOf"],[1,"card"],[1,"card-title"],[1,"card-body"],[1,"card-text"],[1,"card-img"],["alt","...",2,"height","100%","width","100%",3,"src"],["icon","arrowright","type","outline","text","Detail","hint","Click to see subject detail",3,"onClick"],[3,"subjectID"]],template:function(t,e){1&t&&(s.TgZ(0,"dx-toolbar",0),s._UZ(1,"dxi-item",1),s._UZ(2,"dxi-item",2),s._UZ(3,"dxi-item",3),s.TgZ(4,"dxi-item",4),s._UZ(5,"dx-button",5),s.qZA(),s._UZ(6,"dxi-item",6),s.TgZ(7,"dxi-item",4),s._UZ(8,"dx-button",7),s.qZA(),s._UZ(9,"dxi-item",8),s.TgZ(10,"dxi-item",9),s.TgZ(11,"dx-button",10),s.NdJ("onClick",function(){return e.navigateToInstructor()}),s.qZA(),s.qZA(),s.qZA(),s.TgZ(12,"dx-scroll-view",11),s.NdJ("onPullDown",function(t){return e.updateTopContent(t)})("onReachBottom",function(t){return e.updateBottomContent(t)}),s.YNc(13,T,3,1,"ng-container",12),s.qZA(),s.TgZ(14,"dx-speed-dial-action",13),s.NdJ("onClick",function(){return e.scrollTop()}),s.qZA(),s.TgZ(15,"dx-popup",14),s.NdJ("visibleChange",function(t){return e.isDetailPopupVisible=t}),s.YNc(16,Z,2,1,"div",15),s.qZA()),2&t&&(s.Q6J("ngStyle",s.DdM(34,j)),s.xp6(1),s.Q6J("location","before")("text","Subject List"),s.xp6(1),s.Q6J("options",e.searchBoxOptions),s.xp6(1),s.Q6J("options",e.refreshButtonOptions)("locateInMenu","auto"),s.xp6(1),s.Q6J("locateInMenu","auto")("location","after"),s.xp6(1),s.Q6J("disabled",!0),s.xp6(1),s.Q6J("locateInMenu","auto")("options",e.filterSelectBoxOptions),s.xp6(1),s.Q6J("locateInMenu","auto")("location","after"),s.xp6(1),s.Q6J("disabled",!0),s.xp6(1),s.Q6J("options",e.sortSelectBoxOptions)("locateInMenu","auto"),s.xp6(3),s.Q6J("direction","vertical")("showScrollbar",!0)("scrollByContent",!0)("scrollByThumb",!0)("height","69vh")("bounceEnabled",!1),s.xp6(1),s.Q6J("ngIf",e.subjectList),s.xp6(1),s.Q6J("index",1),s.xp6(1),s.Q6J("visible",e.isDetailPopupVisible)("height","80%")("width","80%")("showTitle",!0)("shading",!0)("title","Subject Detail")("dragEnabled",!0)("closeOnOutsideClick",!1)("showCloseButton",!0),s.xp6(1),s.Q6J("dxTemplateOf","content"))},directives:[u.G,n.PC,h.ZT3,p.K,o.N,n.O5,d.D,g.x,m.p6,n.sg,S],pipes:[C.m],styles:[".card-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center;align-items:flex-start}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{height:250px;margin:10px;background-color:rgba(0,10,12,.486);border-radius:10px;box-shadow:0 54px 55px #00000040,0 -12px 30px #0000001f,0 4px 6px #0000001f,0 12px 13px #0000002b,0 -3px 5px #00000017;width:250px;display:flex;flex-direction:column;justify-content:center;align-items:center}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:large;font-weight:700;font-style:oblique}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-img[_ngcontent-%COMP%]{height:150px;width:150px;margin-bottom:10px}"]}),t})()}];let P=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[r.Bz.forChild(w)],r.Bz]}),t})();var v=i(89711);let O=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[n.ez,P,o.r,u.k,p.e,d.B,g.C,x.A,v.d]]}),t})()}}]);