(self.webpackChunkta_sys_online=self.webpackChunkta_sys_online||[]).push([[670],{15756:(t,e,s)=>{"use strict";s.d(e,{C:()=>i});var o=s(42693),r=s(8619);let i=(()=>{class t{constructor(t){this.http=t,this.apiUrl="https://ta-sys-online-server.azurewebsites.net/api/UserInfo"}fetchUserInfo(t,e){const s=(new o.LE).set("PageNumber",t).set("PageSize",e);return console.log(s.toString()),this.http.get(this.apiUrl+"/paging",{params:s,reportProgress:!0,observe:"body"})}fetchUserInfoByLearnerID(t,e,s){const r=(new o.LE).set("PageNumber",t).set("PageSize",e).set("Id",s);return console.log(r.toString()),this.http.get(this.apiUrl+"/byLearnerID",{params:r,reportProgress:!0,observe:"body"})}searchUserInfoByProperty(t,e,s,r){const i=(new o.LE).set("Property",t).set("Value",e).set("PageNumber",s).set("PageSize",r);return console.log(i.toString()),this.http.get(this.apiUrl+"/search",{params:i,reportProgress:!0,observe:"body"})}filterUserInfoByProperty(t,e,s,r){const i=(new o.LE).set("Value",e).set("Property",t).set("PageNumber",s).set("PageSize",r);return console.log(i.toString()),this.http.get(this.apiUrl+"/filter",{params:i,reportProgress:!0,observe:"body"})}sortUserInfoByProperty(t,e,s,r){const i=(new o.LE).set("SortBy",t).set("Order",e).set("PageNumber",s).set("PageSize",r);return console.log(i.toString()),this.http.get(this.apiUrl+"/paging",{params:i,reportProgress:!0,observe:"body"})}uploadUserInfo(t){return this.http.post(this.apiUrl,t,{reportProgress:!0,observe:"body"})}generateRandomUserInfo(){return this.http.post(this.apiUrl+"/randomUserInfo",{reportProgress:!0,observe:"body"})}deleteUserInfo(t){return this.http.post(this.apiUrl+"/delete",t,{reportProgress:!0,observe:"body"})}deleteAll(){return this.http.delete(this.apiUrl,{reportProgress:!0,observe:"body"})}getUserInfo(t){return this.http.get(this.apiUrl+`/${t}`,{reportProgress:!0,observe:"body"})}updateUserInfo(t){return this.http.put(this.apiUrl,t,{reportProgress:!0,observe:"body"})}fetchAll(){return this.http.get(this.apiUrl,{reportProgress:!0,observe:"body"})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o.eN))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},4670:(t,e,s)=>{"use strict";s.d(e,{$:()=>h});var o=s(61305),r=s(41142),i=s(8619),a=s(15756),n=s(10418);const l={userInfoList:[],roleList:[],selectedUserInfo:{},userInfoInstance:null,exportData:[],totalPages:0,currentPage:0,totalItems:0,responseMsg:"",isLoggedIn:null!==localStorage.getItem("access_token")};let h=(()=>{class t extends o.b{constructor(t,e){super(l),this.userInfoService=t,this.store=e,this.$isLoggedIn=this.select(t=>t.isLoggedIn),this.$userInfoList=this.select(t=>t.userInfoList),this.$roleList=this.select(t=>t.roleList),this.$exportData=this.select(t=>t.exportData),this.$totalPages=this.select(t=>t.totalPages),this.$totalItems=this.select(t=>t.totalItems),this.$currentPage=this.select(t=>t.currentPage),this.$selectedUserInfo=this.select(t=>t.selectedUserInfo),this.$userInfoInstance=this.select(t=>t.userInfoInstance)}fillEmpty(t,e,s,o){let r=s,i=t*e;for(var a=0;a<o.length;a++)r[i]=o[a],i++;return console.log("Filled array result"),console.log(r),r}initInfiniteData(t,e){return this.store.setIsLoading(!0),this.userInfoService.fetchUserInfo(t,e).toPromise().then(t=>{this.setState({userInfoList:t.data}),console.log("Current flag: infite list"),console.log(this.state.userInfoList),this.setState({totalItems:t.totalRecords}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.pageNumber}),this.store.setIsLoading(!1)})}loadInfiniteDataAsync(t,e){this.setIsLoading(!0),this.userInfoService.fetchUserInfo(t,e).subscribe({next:t=>{this.setState({userInfoList:this.state.userInfoList.concat(t.data)}),console.log("Infinite list"),console.log(this.state.userInfoList),console.log("Server response"),console.log(t),this.setState({totalItems:t.totalRecords}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.pageNumber}),this.setIsLoading(!1)},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}})}loadDataAsyncByLearnerID(t,e,s){this.setIsLoading(!0),this.userInfoService.fetchUserInfoByLearnerID(t,e,s).subscribe({next:s=>{this.setState({userInfoList:this.fillEmpty(t-1,e,this.state.userInfoList,s.data)}),console.log("Pure list"),console.log(this.state.userInfoList),console.log("Server response"),console.log(s),this.setState({totalItems:s.totalRecords}),this.setState({totalPages:s.totalPages}),this.setState({currentPage:s.pageNumber}),this.setIsLoading(!1)},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}})}initInfiniteDataByLearnerID(t,e,s){return this.userInfoService.fetchUserInfoByLearnerID(t,e,s).toPromise().then(t=>{this.setState({userInfoList:t.data}),console.log("Current flag: infite list"),console.log(this.state.userInfoList),this.setState({totalItems:t.totalRecords}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.pageNumber})})}loadInfiniteDataAsyncByLearnerID(t,e,s){this.setIsLoading(!0),this.userInfoService.fetchUserInfoByLearnerID(t,e,s).subscribe({next:t=>{this.setState({userInfoList:this.state.userInfoList.concat(t.data)}),console.log("Infinite list"),console.log(this.state.userInfoList),console.log("Server response"),console.log(t),this.setState({totalItems:t.totalRecords}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.pageNumber}),this.setIsLoading(!1)},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}})}initData(t,e){this.store.setIsLoading(!0),this.userInfoService.fetchUserInfo(t,e).toPromise().then(t=>{this.setState({userInfoList:new Array(t.totalRecords)}),console.log("Current flag: pure list"),console.log(this.state.userInfoList),this.setState({totalItems:t.totalRecords}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.pageNumber})}).then(()=>{this.loadDataAsync(t,e)})}initFilterByPropertyData(t,e,s,o){this.store.showNotif("Filtered Mode On","custom"),this.store.setIsLoading(!0),this.userInfoService.filterUserInfoByProperty(t,e,s,o).toPromise().then(t=>{this.setState({userInfoList:new Array(t.totalRecords)}),console.log("Current flag: filtered list"),console.log(this.state.userInfoList),this.setState({totalItems:t.totalRecords}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.pageNumber})}).then(()=>{this.filterUserInfoByProperty(t,e,s,o)})}initInfiniteFilterByPropertyData(t,e,s,o){this.store.showNotif("Filtered Mode On","custom"),this.store.setIsLoading(!0),this.userInfoService.filterUserInfoByProperty(t,e,s,o).toPromise().then(t=>{this.setState({userInfoList:t.data}),console.log("Current flag: infinite filtered list"),console.log(this.state.userInfoList),this.setState({totalItems:t.totalRecords}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.pageNumber}),this.store.setIsLoading(!1)})}initSearchByPropertyData(t,e,s,o){this.store.showNotif("Searched Mode On","custom"),this.store.setIsLoading(!0),this.userInfoService.searchUserInfoByProperty(t,e,s,o).toPromise().then(t=>{this.setState({userInfoList:new Array(t.totalRecords)}),console.log("Current flag: searched list"),console.log(this.state.userInfoList),this.setState({totalItems:t.totalRecords}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.pageNumber})}).then(()=>{this.searchUserInfoByProperty(t,e,s,o)})}initInfiniteSearchByPropertyData(t,e,s,o){this.store.showNotif("Searched Mode On","custom"),this.store.setIsLoading(!0),this.userInfoService.searchUserInfoByProperty(t,e,s,o).toPromise().then(t=>{0!==t.totalRecords?this.setState({userInfoList:t.data}):this.store.showNotif("No result found!","custom"),console.log("Current flag: infitite searched list"),console.log(this.state.userInfoList),this.setState({totalItems:t.totalRecords}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.pageNumber}),this.store.setIsLoading(!1)})}initSortByPropertyData(t,e,s,o){this.store.showNotif("Sort Mode On","custom"),this.store.setIsLoading(!0),this.userInfoService.sortUserInfoByProperty(t,e,s,o).toPromise().then(t=>{this.setState({userInfoList:new Array(t.totalRecords)}),console.log("Current flag: sort list"),console.log(this.state.userInfoList),this.setState({totalItems:t.totalRecords}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.pageNumber})}).then(()=>{this.sortUserInfoByProperty(t,e,s,o)})}initInfiniteSortByPropertyData(t,e,s,o){this.store.showNotif("Sort Mode On","custom"),this.store.setIsLoading(!0),this.userInfoService.sortUserInfoByProperty(t,e,s,o).toPromise().then(t=>{this.setState({userInfoList:t.data}),console.log("Current flag: sort list"),console.log(this.state.userInfoList),this.setState({totalItems:t.totalRecords}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.pageNumber}),this.store.setIsLoading(!1)})}loadDataAsync(t,e){this.setIsLoading(!0),this.userInfoService.fetchUserInfo(t,e).subscribe({next:s=>{this.setState({userInfoList:this.fillEmpty(t-1,e,this.state.userInfoList,s.data)}),console.log("Pure list"),console.log(this.state.userInfoList),console.log("Server response"),console.log(s),this.setState({totalItems:s.totalRecords}),this.setState({totalPages:s.totalPages}),this.setState({currentPage:s.pageNumber}),this.setIsLoading(!1)},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}})}refresh(t,e){this.setIsLoading(!0),this.userInfoService.fetchUserInfo(t,e).subscribe({next:s=>{this.setState({userInfoList:this.fillEmpty(t-1,e,this.state.userInfoList,s.data)}),this.setState({totalItems:s.totalRecords}),this.setState({totalPages:s.totalPages}),this.setState({currentPage:s.pageNumber}),console.log("Pure list"),console.log(this.state.userInfoList),console.log("Server response"),console.log(s),this.store.showNotif("Refresh successfully","custom"),this.setIsLoading(!1)},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}})}uploadUserInfo(t,e,s){this.confirmDialog("").then(o=>{o&&(this.setIsLoading(!0),this.userInfoService.uploadUserInfo(t).subscribe({next:t=>{this.setState({responseMsg:t}),this.setTotalItems(this.state.totalItems+1),console.log(t),this.loadDataAsync(e,s),this.setIsLoading(!1),this.store.showNotif(t.responseMessage,"custom")},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}}))})}updateUserInfo(t,e,s){this.confirmDialog("").then(o=>{o&&(this.setIsLoading(!0),this.userInfoService.updateUserInfo(t).subscribe({next:t=>{this.setState({responseMsg:t}),console.log(t),this.loadDataAsync(e,s),this.setIsLoading(!1),this.store.showNotif(t.responseMessage,"custom")},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}}))})}confirmDialog(t){return(0,r.iG)(""!=t?`<b>${t}</b>`:"<b>Are you sure?</b>","Confirm changes")}deleteSelectedUserInfos(t,e,s){this.confirmDialog("").then(o=>{o&&(this.setIsLoading(!0),this.userInfoService.deleteUserInfo(t).subscribe({next:t=>{this.setState({responseMsg:t}),console.log(t),this.loadDataAsync(e,s),console.log(this.state.userInfoList),this.setIsLoading(!1),this.store.showNotif(t.responseMessage,"custom")},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}}))})}deleteAll(){this.confirmDialog("Delete all items?").then(t=>{t&&(this.setIsLoading(!0),this.userInfoService.deleteAll().subscribe({next:t=>{this.resetState(),console.log(t),this.setIsLoading(!1),this.store.showNotif(t.responseMessage,"custom")},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}}))})}deleteUserInfo(t,e,s){this.confirmDialog("").then(o=>{o&&(this.setIsLoading(!0),this.userInfoService.deleteUserInfo(t).subscribe({next:t=>{this.setState({responseMsg:t}),this.setTotalItems(this.state.totalItems-1),console.log(t),this.loadDataAsync(e,s),this.setIsLoading(!1),this.store.showNotif(t.responseMessage,"custom")},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}}))})}selectUserInfo(t){this.setState({selectedUserInfo:t})}setTotalPages(t){this.setState({totalPages:t})}setTotalItems(t){this.setState({totalItems:t})}setCurrentPage(t){this.setState({currentPage:t})}filterUserInfoByProperty(t,e,s,o){this.setIsLoading(!0),this.userInfoService.filterUserInfoByProperty(t,e,s,o).subscribe({next:t=>{0!==t.totalRecords&&(this.setState({userInfoList:this.fillEmpty(s-1,o,this.state.userInfoList,t.data)}),console.log("Filtered list"),console.log(this.state.userInfoList),console.log("Server response"),console.log(t),this.setState({totalItems:t.totalRecords}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.pageNumber})),this.setIsLoading(!1)},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}})}filterInfiniteUserInfoByProperty(t,e,s,o){this.setIsLoading(!0),this.userInfoService.filterUserInfoByProperty(t,e,s,o).subscribe({next:t=>{this.setState({userInfoList:this.state.userInfoList.concat(t)}),console.log("Filtered list"),console.log(this.state.userInfoList),console.log("Server response"),console.log(t),this.setState({totalItems:t.totalRecords}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.pageNumber}),this.setIsLoading(!1)},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}})}searchUserInfoByProperty(t,e,s,o){this.setIsLoading(!0),this.userInfoService.searchUserInfoByProperty(t,e,s,o).subscribe({next:t=>{0!==t.totalRecords?this.setState({userInfoList:this.fillEmpty(s-1,o,this.state.userInfoList,t.data)}):this.store.showNotif("No result found!","custom"),console.log("Searched list"),console.log(this.state.userInfoList),console.log("Server response"),console.log(t),this.setState({totalItems:t.totalRecords}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.pageNumber}),this.setIsLoading(!1)},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}})}searchInfiniteUserInfoByProperty(t,e,s,o){this.setIsLoading(!0),this.userInfoService.searchUserInfoByProperty(t,e,s,o).subscribe({next:t=>{0!==t.totalRecords?this.setState({userInfoList:this.state.userInfoList.concat(t)}):this.store.showNotif("No result found!","custome"),console.log("Infite searched list"),console.log(this.state.userInfoList),console.log("Server response"),console.log(t),this.setState({totalItems:t.totalRecords}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.pageNumber}),this.setIsLoading(!1)},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}})}sortUserInfoByProperty(t,e,s,o){this.setIsLoading(!0),this.userInfoService.sortUserInfoByProperty(t,e,s,o).subscribe({next:t=>{this.setState({responseMsg:t}),this.setState({userInfoList:this.fillEmpty(s-1,o,this.state.userInfoList,t.data)}),this.setState({totalItems:t.totalRecords}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.pageNumber}),console.log("Sorted list"),console.log(this.state.userInfoList),console.log("Server response"),console.log(t),this.setIsLoading(!1)},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}})}sortInfiniteUserInfoByProperty(t,e,s,o){this.setIsLoading(!0),this.userInfoService.sortUserInfoByProperty(t,e,s,o).subscribe({next:t=>{this.setState({userInfoList:this.state.userInfoList.concat(t)}),console.log("Infite sorted list"),console.log(this.state.userInfoList),console.log("Server response"),console.log(t),this.setState({totalItems:t.totalRecords}),this.setState({totalPages:t.totalPages}),this.setState({currentPage:t.pageNumber}),this.setIsLoading(!1)},error:t=>{this.setIsLoading(!1),this.store.showNotif(t.error.responseMessage,"error"),console.log(t)}})}getUserInfo(t){return this.setIsLoading(!0),this.userInfoService.getUserInfo(t).toPromise().then(t=>{this.setState({userInfoInstance:t}),console.log(t),this.setIsLoading(!1)})}setExportData(t){this.setState({userInfoList:t})}resetState(){this.setState(l)}setIsLoading(t){this.store.setIsLoading(t)}}return t.\u0275fac=function(e){return new(e||t)(i.LFG(a.C),i.LFG(n.d))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);